{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7864e3a89a7862904f43","webpack:///v-uploader.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///src/Uploader.vue","webpack:///./src/index.js","webpack:///./src/Uploader.vue","webpack:///./src/Uploader.vue?e72d","webpack:///./src/Uploader.vue?fe91","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./node_modules/vue-loader/lib/component-normalizer.js","webpack:///./node_modules/fine-uploader/lib/traditional.js","webpack:///./node_modules/fine-uploader/fine-uploader/fine-uploader.js","webpack:///./node_modules/fine-uploader/fine-uploader/fine-uploader-gallery.min.css?852d","webpack:///./node_modules/fine-uploader/fine-uploader/fine-uploader-gallery.min.css","webpack:///./node_modules/css-loader/lib/url/escape.js","webpack:///./node_modules/fine-uploader/fine-uploader/loading.gif","webpack:///./node_modules/fine-uploader/fine-uploader/processing.gif","webpack:///./node_modules/fine-uploader/fine-uploader/edit.gif","webpack:///./node_modules/fine-uploader/fine-uploader/trash.gif","webpack:///./node_modules/fine-uploader/fine-uploader/retry.gif","webpack:///./node_modules/fine-uploader/fine-uploader/continue.gif","webpack:///./node_modules/fine-uploader/fine-uploader/pause.gif","webpack:///./node_modules/holderjs/holder.js","webpack:///./src/constants.js","webpack:///./src/Uploader.vue?3b52"],"names":["root","factory","exports","module","define","amd","self","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cssWithMappingToString","item","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","source","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","toString","mediaQuery","alreadyImportedModules","length","id","push","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","createStyleElement","styleElement","document","createElement","type","head","appendChild","obj","update","remove","querySelector","ssrIdKey","isProduction","noop","parentNode","removeChild","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","applyToTag","newObj","css","media","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","options","ssrId","firstChild","hasDocument","DEBUG","Error","listToStyles","getElementsByTagName","navigator","test","userAgent","toLowerCase","parentId","_isProduction","_options","newList","mayRemove","textStore","replacement","filter","Boolean","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_fine_uploader__","__WEBPACK_IMPORTED_MODULE_0_fine_uploader___default","__WEBPACK_IMPORTED_MODULE_1_fine_uploader_fine_uploader_fine_uploader_gallery_min_css__","__WEBPACK_IMPORTED_MODULE_2_holderjs__","__WEBPACK_IMPORTED_MODULE_2_holderjs___default","__WEBPACK_IMPORTED_MODULE_3__constants__","Plugin","install","Vue","keys","language","uploader","props","default","preview","buttonText","buttonIcon","previewWidth","previewHeight","multiple","uploadFileObjName","itemLimit","fileSizeLimit","fileTypeExts","imageMaxHeight","imageMaxWidth","imageMinHeight","imageMinWidth","uploadFileUrl","deleteFileUrl","showMessage","component","injectStyle","ssrContext","normalizeComponent","__vue_styles__","Component","locals","newStyles","part","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","h","global","qq","element","hide","style","display","attach","fn","addEventListener","attachEvent","detach","removeEventListener","detachEvent","contains","descendant","compareDocumentPosition","elementB","opacity","filters","Math","round","extend","hasClass","considerParent","re","RegExp","className","addClass","removeClass","replace","getByClass","first","candidates","result","querySelectorAll","each","idx","val","getFirstByClass","children","child","nodeType","nextSibling","setText","text","innerText","textContent","clearText","hasAttribute","attrName","attrVal","exec","getAttribute","undefined","canvasToBlob","canvas","mime","quality","dataUriToBlob","toDataURL","dataUri","arrayBuffer","byteString","intArray","mimeString","split","indexOf","atob","decodeURI","ArrayBuffer","Uint8Array","character","charCodeAt","data","BlobBuilder","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","blobBuilder","append","getBlob","Blob","log","message","level","console","isObject","variable","isFunction","isArray","value","buffer","constructor","isItemList","maybeItemList","isNodeList","maybeNodeList","namedItem","isString","maybeString","trimStr","string","String","trim","format","str","args","Array","slice","arguments","newStr","nextIdxToReplace","strBefore","substring","strAfter","isFile","maybeFile","File","isFileList","maybeFileList","FileList","isFileOrInput","maybeFileOrInput","isInput","maybeInput","notFile","evaluateType","normalizedType","HTMLInputElement","tagName","isBlob","maybeBlob","isXhrUploadSupported","input","FormData","createXhrInstance","upload","XMLHttpRequest","ActiveXObject","error","isFolderDropSupported","dataTransfer","items","webkitGetAsEntry","isFileChunkingSupported","androidStock","webkitSlice","mozSlice","sliceBlob","fileOrBlob","start","end","arrayBufferToHex","bytesAsHex","bytes","byt","byteAsHexStr","readBlobToHex","blob","startOffset","initialBlob","fileReader","FileReader","promise","Promise","onload","success","onerror","failure","readAsArrayBuffer","second","extendNested","prop","override","target","sourceFn","super_","srcPropName","srcPropVal","arr","elt","from","len","getUniqueId","r","random","ie","ie7","ie8","ie10","ie11","edge","safari","vendor","chrome","opera","firefox","windows","platform","android","ios6","ios","ios7","ios8","ios800","iosChrome","iosSafari","iosSafariWebView","preventDefault","e","returnValue","toElement","div","html","innerHTML","iterableItem","callback","keyOrIndex","Storage","key","getItem","charAt","oldFunc","newArgs","apply","obj2url","temp","prefixDone","uristrings","prefix","nextObj","nextTemp","obj2FormData","formData","arrayKeyName","obj2Inputs","form","parseJson","json","parse","eval","getExtension","filename","extIdx","lastIndexOf","substr","getFilename","blobOrFileInput","fileName","DisposeSupport","disposers","dispose","disposer","shift","addDisposer","disposeFunction","version","supportedFeatures","isCrossOriginXhrSupported","withCredentials","isXdrSupported","XDomainRequest","supportsUploading","supportsUploadingBlobs","supportsFileDrop","supportsAjaxFileUploading","supportsFolderDrop","supportsChunking","supportsResume","supportsUploadViaPaste","supportsUploadCors","supportsDeleteFileXdr","supportsDeleteFileCorsXhr","supportsDeleteFileCors","supportsFolderSelection","supportsImagePreviews","supportsUploadProgress","tempInput","supported","disabled","ex","span","localStorage","setItem","match","postMessage","webkitdirectory","ajaxUploading","blobUploading","canDetermineSize","chunking","deleteFileCors","deleteFileCorsXdr","deleteFileCorsXhr","dialogElement","HTMLDialogElement","fileDrop","folderDrop","folderSelection","imagePreviews","imageValidation","itemSizeValidation","pause","progressBar","resume","scaling","tiffPreviews","unlimitedScaledImageSize","uploading","uploadCors","uploadCustomHeaders","uploadNonMultipart","uploadViaPaste","isGenericPromise","maybePromise","then","successArgs","failureArgs","successCallbacks","failureCallbacks","doneCallbacks","state","onSuccess","onFailure","done","BlobProxy","referenceBlob","onCreate","create","UploadButton","createInput","BUTTON_ID_ATTR_NAME","buttonId","title","setMultiple","folders","acceptFiles","position","right","top","fontFamily","fontSize","margin","padding","cursor","height","disposeSupport","onChange","hoverClass","focusClass","ios8BrowserCrashWorkaround","overflow","direction","getInput","getButtonId","isMultiple","optInput","removeAttribute","setAcceptFiles","reset","UploadData","uploaderProxy","getDataByIds","idOrIds","entries","getDataByUuids","uuids","uuid","byUuid","getDataByStatus","status","statusResults","statuses","statusEnum","statusResultIndexes","byStatus","dataIndex","byProxyGroupId","byBatchId","addFile","spec","SUBMITTING","originalName","size","file","batchId","proxyGroupId","onBeforeStatusChange","onStatusChange","retrieve","optionalFilter","removeFileRef","record","setStatus","newStatus","oldStatus","byStatusOldStatusIndex","splice","uuidChanged","newUuid","oldUuid","updateName","newName","updateSize","newSize","setParentId","targetId","getIdsInProxyGroup","getIdsInBatch","SUBMITTED","REJECTED","QUEUED","CANCELED","PAUSED","UPLOADING","UPLOAD_FINALIZING","UPLOAD_RETRYING","UPLOAD_SUCCESSFUL","UPLOAD_FAILED","DELETE_FAILED","DELETING","DELETED","basePublicApi","addBlobs","blobDataOrArray","params","endpoint","addFiles","addInitialFiles","cannedFileList","cannedFile","_addCannedFile","_maybeHandleIos8SafariWorkaround","_storedIds","_currentBatchId","processBlob","_handleNewFile","blobs","defaultName","verifiedFiles","processBlobData","blobData","processCanvas","processCanvasData","canvasData","normalizedQuality","processFileOrInput","fileOrInput","files","fileContainer","_prepareItemsForUpload","cancel","uploadData","_uploadData","getName","_handler","cancelAll","storedIdsCopy","storedFileId","clearStoredFiles","continueUpload","enabled","_uploadFile","deleteFile","_onSubmitDelete","doesExist","fileOrBlobId","isValid","drawThumbnail","fileId","imgOrCanvas","maxSize","fromServer","customResizeFunction","fileOrUrl","promiseToReturn","_imageGenerator","_thumbnailUrls","scale","getFile","container","generate","modifiedContainer","reason","getButton","_getButton","_buttonIdsForFileIds","getEndpoint","_endpointStore","uploadDataRecord","getInProgress","getParentId","uploadDataEntry","getUploads","getResumableFilesData","getSize","getNetUploads","_netUploaded","getRemainingAllowedItems","allowedItems","_currentItemLimit","_netUploadedOrQueued","getUuid","isResumable","hasResumeRecord","debug","pauseUpload","expunge","_autoRetries","_retryTimeouts","_preventRetries","_buttons","button","_paramsStore","_pasteHandler","session","refreshOnReset","_refreshSessionData","_succeededSinceLastAllComplete","_failedSinceLastAllComplete","_totalProgress","_customResumeDataStore","retry","_manualRetry","scaleImage","specs","Scaler","setCustomHeaders","headers","_customHeadersStore","set","setCustomResumeData","setDeleteFileCustomHeaders","_deleteFileCustomHeadersStore","setDeleteFileEndpoint","_deleteFileEndpointStore","setDeleteFileParams","_deleteFileParamsStore","setEndpoint","setForm","elementOrId","_updateFormSupportAndParams","setItemLimit","newItemLimit","setName","setParams","setUuid","_onDeleteComplete","errorMessage","uploadStoredFiles","_itemError","_uploadStoredFiles","basePrivateApi","sessionData","deleteFileEndpoint","deleteFileParams","thumbnailUrl","_annotateWithButtonId","associatedInput","qqButtonId","_getButtonId","_batchError","callbacks","onError","_createDeleteHandler","DeleteFileAjaxRequester","method","toUpperCase","maxConnections","uuidParamName","request","uuidName","customHeaders","paramsStore","endpointStore","cors","onDelete","_onDelete","onDeleteComplete","xhrOrXdr","isError","_createPasteHandler","PasteSupport","targetElement","paste","pasteReceived","_handleCheckedCallback","onPasteReceived","_handlePasteSuccess","identifier","_createStore","initialValue","_readOnlyValues_","store","catchall","perIdReadOnlyValues","readOnlyValues","copy","orig","getReadOnlyValues","includeReadOnlyValues","values","addReadOnly","_createUploadDataTracker","_onUploadStatusChange","_maybeAllComplete","setTimeout","_createUploadButton","accept","validation","allowedExtensions","classes","buttonFocus","buttonHover","workarounds","ios8BrowserCrash","iosEmptyVideos","_isAllowedExtension","inputName","_onInputChange","fileInputTitle","_disposeSupport","_createUploadHandler","additionalOptions","namespace","lastOnProgress","preventRetryParam","preventRetryResponseProperty","onProgress","loaded","total","_onProgress","onComplete","xhr","retVal","_onComplete","onCancel","cancelFinalizationEffort","_onCancel","onUploadPrep","_onUploadPrep","onUpload","_onUpload","onUploadResult","onUploadChunk","chunkData","_onUploadChunk","onUploadChunkResult","partIndex","onUploadChunkSuccess","_onUploadChunkSuccess","onResume","customResumeData","onAutoRetry","responseJSON","_onAutoRetry","onUuidChanged","setSize","_setSize","getDataByUuid","isQueued","isInProgress","getCustomResumeData","_getCustomResumeData","UploadHandlerController","_fileOrBlobRejected","_formatSize","sizeSymbols","max","toFixed","_generateExtraButtonSpecs","_extraButtonSpecs","extraButtons","extraButtonOptionEntry","extraButtonSpec","_initExtraButton","extraButtonsSpec","_defaultButtonId","buttonOrFileInputOrFile","inputs","fileInput","fileBlobOrInput","_getNotFinished","_getValidationBase","_getValidationDescriptor","fileWrapper","_getValidationDescriptors","fileWrappers","fileDescriptors","_handleCameraAccess","camera","optionRoot","details","callbackRetVal","successParam","newFileWrapperList","actualFile","handler","_customNewFileHandler","_handleNewFileGeneric","addFileToHandler","_trackButton","fileList","extSuppliedName","extension","_handleDeleteSuccess","_handleDeleteFailed","_initFormSupportAndParams","_formSupport","FormSupport","attachedToForm","getFormInputsAsObject","autoUpload","newAutoUpload","newEndpoint","_isDeletePossible","expected","allowXdr","allowed","valid","allowedExt","extRegex","code","maybeNameOrNames","extensionsForMessage","placeholderMatch","messages","names","validationBase","allowedExtension","formatFileName","sizeLimit","minSizeLimit","placeholder","_onBeforeManualRetry","notFinished","_onAllComplete","ios8SafariUploads","alert","unsupportedBrowserIos8Safari","_maybeParseAndSendUploadError","response","errorReason","defaultResponseError","_maybeProcessNextItemAfterOnValidateCallback","validItem","stopOnFirstInvalidFile","validationDescriptor","onValidate","_onValidateCallbackSuccess","_onValidateCallbackFailure","successful","failed","onAllComplete","_shouldAutoRetry","retryWaitPeriod","autoAttemptDelay","_onBeforeAutoRetry","onManualRetry","clearTimeout","storedItemIndex","fileIndex","onIndividualProgress","_onSubmit","_onSubmitCallbackSuccess","_onSubmitted","onSubmitted","_storeForLater","onSuccessCallback","additionalMandatedParams","adjustedOnSuccessCallback","onSubmitDelete","_deleteHandler","sendDelete","_onTotalProgress","onTotalProgress","enableAuto","_onValidateBatchCallbackFailure","_onValidateBatchCallbackSuccess","validationDescriptors","proposedNetFilesUploadedOrQueued","tooManyItemsError","nextIndex","_validateFileOrBlobData","_upload","onValidateBatch","_preventLeaveInProgress","event","onLeave","Session","_session","addFileRecord","refresh","_sessionRequestComplete","onSessionRequestComplete","onNewSize","maxAutoAttempts","formElementOrId","onSubmit","idToUpload","stillSubmitting","validityChecker","allowEmpty","ImageValidation","validate","image","errorCode","_wrapCallbacks","safeCallback","errorMsg","exception","callbackName","callbackFunc","FineUploaderBasic","disableCancelForFormUploads","warnBeforeUnload","filenameParam","forceMultipart","omitDefaultParams","paramsInBody","requireSuccessJson","totalFileSizeName","maxHeight","maxWidth","minHeight","minWidth","maybeXhr","maybeXhrOrXdr","attemptNumber","fileOrBlobData","typeError","sizeError","minSizeError","emptyError","noFilesError","maxHeightImageError","maxWidthImageError","minHeightImageError","minWidthImageError","retryFailTooManyItems","concurrent","mandatory","paramNames","partByteOffset","chunkSize","totalFileSize","totalParts","partSize","jsonPayload","resetOnStatus","recordsExpireIn","resuming","customKeys","fileOrBlobName","sendCredentials","interceptSubmit","customResizer","sendOriginal","orient","defaultType","defaultQuality","failureText","includeExif","sizes","ImageGenerator","_scaler","handleNewFile","TotalProgress","entry","AjaxRequester","isSimpleMethod","containsNonSimpleHeaders","containsNonSimple","header","isXdr","getCorsAjaxTransport","ontimeout","onprogress","getXhrOrXdr","suppliedXhr","requestData","dequeue","nextId","queue","sendRequest","xdrError","isResponseSuccessful","getParams","onDemandParams","additionalParams","mandatedParams","optXhr","url","payload","onSend","createUrl","additionalQueryParams","getXdrLoadHandler","getXdrErrorHandler","onreadystatechange","getXhrReadyStateChangeHandler","registerForUploadProgress","open","setHeaders","send","shouldParamsBeInQueryString","contentType","addToPath","readyState","lengthComputable","onDemandHeaders","additionalHeaders","allHeaders","acceptHeader","setRequestHeader","allowXRequestedWithAndCacheControl","responseCode","successfulResponseCodes","prepareToSend","validMethods","DELETE","PATCH","POST","PUT","GET","initTransport","path","cacheBuster","withPath","appendToPath","withParams","withQueryParams","_additionalQueryParams_","withHeaders","withPayload","thePayload","withCacheBuster","qqtimestamp","Date","getTime","canceled","UploadHandler","proxy","fileState","fileItem","getThirdPartyFileId","_getFileState","_setThirdPartyFileId","thirdPartyFileId","_wasCanceled","preventRetryResponse","controller","chunkingPossible","concurrentChunkingPossible","chunked","chunkIdx","_getChunkData","attemptingResume","chunkProgress","_getChunkDataForCallback","finalize","finalizeChunks","normaizedResponse","normalizeResponse","_maybeDeletePersistedChunkData","cleanup","normalizedResponse","handleFailure","clearCachedChunk","inProgressIdx","responseToReport","inProgressChunksArray","inProgress","remaining","unshift","ignoreFailure","_getXhrs","ckid","ckXhr","abort","_cancelled","moveInProgressToRemaining","connectionManager","free","hasMoreParts","nextPart","nextIdx","_getTotalChunks","reevaluateChunking","sendNext","inProgressChunks","available","requestOverrides","uploadChunkData","overrides","uploadChunk","inProgressChunkIdx","_maybePersistChunkedState","clearXhr","_open","_openChunks","_waiting","openChunkEntriesCount","openChunksCount","openChunkIndexes","dontAllowNext","allowNext","waitingIndex","connectionsIndex","getProxyOrBlob","getWaitingOrConnected","waitingOrConnected","chunks","parseInt","isUsingConnection","pop","openChunksEntry","simple","uploadFile","maybeNewUuid","_clearXhrs","getProxy","initHandler","handlerType","traditional","handlerModuleSubtype","onFinalizing","_removeExpiredChunkingRecords","isDeferredEligibleForUpload","maybeDefer","generatedBlob","updateBlob","maybeSendDeferredFiles","errorResponse","idsInGroup","uploadedThisId","idInGroup","now","originalResponse","_shouldChunkThisFile","blobToUpload","cancelRetVal","isProxied","_getLocalStorageId","isAttemptingResume","WindowReceiveMessage","callbackWrapperDetachers","receiveMessage","onMessageCallbackWrapper","stopReceivingMessages","detacher","FormUploadHandler","expungeFile","detachLoadEvents","isCors","postMessageCallbackTimers","corsMessageReceiver","iframe","getElementById","_getIframeName","getFileIdForIframeName","iframeName","initIframeForUpload","body","registerPostMessageCallback","onloadCallbacks","onloadCallback","_parseJsonResponse","_detachLoadEvent","formHandlerInstanceId","_attachLoadEvent","responseDescriptor","contentDocument","_createIframe","_initFormForUpload","targetName","innerHtmlOrMessage","XhrUploadHandler","xhrId","ajaxRequester","_getAjaxRequester","getChunkSize","chunkFiles","resumeEnabled","blobOrProxy","_initTempState","_maybePrepareForResume","cachedChunks","tempState","xhrs","ajaxRequesters","responseParser","lastChunkIdx","_getXhr","resumableFilesData","_iterateResumeRecords","notResumable","optInProgress","optRemaining","chunkingState","reverse","paused","totalChunks","newBlob","chunkId","_createXhr","optChunkIdx","_registerXhr","chunkIndex","fileSize","startBytes","endBytes","count","startByte","endByte","localStorageId","forEach","_getMimeType","_getPersistableData","ceil","_markNotResumable","removeItem","persistedData","lastUpdated","_registerProgressHandler","progressCalculator","totalSuccessfullyLoadedForFile","loadedForRequest","totalForRequest","estActualChunkLoaded","totalLoadedForFile","chunkLoaded","optAjaxRequester","xhrsId","expirationDays","expirationDate","setDate","getDate","requester","_method","detectSubsampling","img","ctx","iw","naturalWidth","ih","naturalHeight","width","getContext","drawImage","getImageData","detectVerticalSquash","alpha","ratio","sy","ey","py","renderImageToDataURL","doSquash","renderImageToCanvas","maybeCalculateDownsampledDimensions","origHeight","origWidth","newHeight","sqrt","newWidth","modifiedDimensions","save","resize","renderImageToCanvasWithCustomResizer","imageHeight","imageWidth","orientation","targetHeight","targetWidth","transformCoordinate","tmpCtx","sx","dx","tmpCanvas","vertSquashRatio","dw","dh","dy","clearRect","restore","qqImageRendered","resizeInfo","sourceCanvas","sourceCanvasContext","targetCanvas","translate","rotate","PI","MegaPixImage","srcImage","errorCallback","Image","URL","createObjectURL","webkitURL","src","listeners","imageLoadListeners","opt","imgWidth","imgHeight","optionsKey","optionsValue","oldTargetSrc","onrender","isImg","el","isCanvas","isImgCorsSupported","crossOrigin","isCanvasSupported","determineMimeOfFileName","nameWithPath","pathSegments","isCrossOrigin","targetProtocol","targetHostname","targetPort","targetAnchor","href","protocol","port","hostname","location","registerImgLoadListeners","registerCanvasDrawImageListener","registerThumbnailRenderedListener","registered","draw","drawPreview","Identify","megapixErrorHandler","isPreviewable","dummyExif","exif","Exif","mpImg","Orientation","failureMsg","drawOnCanvasOrImgFromUrl","canvasOrImg","tempImg","tempImgRender","drawOnImgFromUrlWithCssScaling","drawFromUrl","fileBlobOrUrl","_testing","parseLittleEndian","hex","pow","seekToApp1","offset","theOffset","thePromise","segmentLength","getApp1Offset","isLittleEndian","app1Start","getDirEntryCount","littleEndian","getIfd","dirEntries","getDirEntries","ifdHex","getTagValues","tagsToFind","TAG_IDS","vals","tagValHex","tagValLength","idHex","tagsToFindIdx","TAG_INFO","274","parser","onParseFailure","app1Offset","dirEntryCount","tagValues","isIdentifiable","magicBytes","questionableBytes","identifiable","magicBytesEntries","magicBytesArrayEntry","previewable","isPreviewableSync","PREVIEWABLE_MIME_TYPES","fileMime","isRecognizedImage","hasNonZeroLimits","limits","atLeastOne","limit","getWidthHeight","sizeDetermination","getFailingLimit","dimensions","failingLimit","limitName","limitValue","limitMatcher","dimensionPropName","actualValue","validationEffort","isJsonResponseValid","handleFileItems","fileItems","someItemsIgnored","err","refreshEffort","refreshCompleteCallback","requesterOptions","SessionAjaxRequester","queryServer","responseText","includeOriginal","failedToScaleText","_getSortedSizes","getFileRecords","originalFileUuid","originalFileName","originalBlobOrBlobData","records","originalBlob","sizeRecord","outputType","_determineOutputType","requestedType","refType","_getName","_generateScaledImage","failedText","api","scaledIds","originalId","blobSize","scaledId","qqparentuuid","qqparentsize","param","scalingEffort","scalingOptions","scaler","referenceType","scaledVersionProperties","startOfExt","versionType","scaledName","scaledExt","nameAppendage","sort","a","b","sourceFile","imageGenerator","scaledImageDataUri","signalSuccess","_insertExifHeader","scaledImageDataUriWithExif","originalImage","reader","insertionEffort","originalImageDataUri","ExifRestorer","readAsDataURL","_dataUriToBlob","_createBlob","KEY_STR","encode64","chr1","chr2","enc1","enc2","enc3","output","chr3","enc4","isNaN","origFileBase64","resizedFileBase64","rawImage","decode64","segments","slice2Segments","exifManipulation","exifArray","getExifArray","newImageArray","insertExif","seg","x","imageData","buf","separatePoint","mae","ato","array","rawImageArray","endPoint","perFileProgress","totalLoaded","totalSize","lastLoadedSent","lastTotalSent","callbackProxy","noRetryableFiles","retryable","none","failedId","updateTotalProgress","onNew","newLoaded","newTotal","oldLoaded","oldTotal","isImage","unregisterPasteHandler","detachPasteHandler","clipboardData","getAsFile","startUpload","determineNewEndpoint","formEl","validateForm","nativeSubmit","checkValidity","maybeUploadOnSubmit","submit","_form2Obj","notIrrelevantType","irrelevantTypes","radioOrCheckbox","ignoreValue","checked","selectValue","select","selected","elements","getIframeContentJson","doc","innerHtml","contentWindow","nodeValue","createForm","responseFromMessage","multipart","addChunkingSpecificParams","allChunksDoneRequester","AllChunksDoneAjaxRequester","createReadyStateChangedHandler","onUploadOrChunkComplete","getChunksCompleteParams","isErrorUploadResponse","parseResponse","sendChunksCompleteRequest","complete","setParamsAndGetEntityToSend","entityToSendParams","xhrOverrides","customParams","defaultParams","xhrOverrideParams","setUploadHeaders","headersOptions","headerOverrides","headerName","headerValue","extraHeaders","uploadChunkParams","toSend","promises","endpointHandler","DragAndDrop","uploadDroppedFiles","uploadDropZone","filesAsArray","dropLog","dropDisabled","processingDroppedFilesComplete","getElement","traverseFileTree","parseEntryPromise","qqPath","extractDirectoryPath","droppedFiles","fileError","fullPath","isDirectory","getFilesInDirectory","entriesLeft","indexOfNameInFullPath","accumEntries","existingPromise","dirReader","createReader","readEntries","newEntries","handleDataTransfer","pendingFolderPromises","handleDataTransferPromise","processingDroppedFiles","allowMultipleItems","dropError","setupDropzone","dropArea","dropZone","UploadDropZone","HIDE_ZONES_EVENT_NAME","onEnter","dropActive","stopPropagation","onLeaveNotDescendants","onDrop","HIDE_BEFORE_ENTER_ATTR","uploadDropZones","isFileDrag","dragEvent","fileDrag","types","leavingDocumentOut","y","dropZoneElements","dropZones","maybeHideDropZones","HTMLElement","setupExtraDropzone","removeDropzone","dzs","targetEl","errorSpecifics","dragoverShouldBeCanceled","isValidFileDrag","effectTest","dt","isSafari","effectAllowed","includes","isOrSetDropDisabled","isDisabled","preventDrop","triggerHidezonesEvent","triggerUsingOldApi","hideZonesEvent","createEvent","initEvent","CustomEvent","dispatchEvent","dropOutsideDisabled","dropEffect","effect","relatedTarget","elementFromPoint","clientX","clientY","uiPublicApi","_parent","_templating","addCacheToDom","clearFiles","addExtraDropzone","_dnd","removeExtraDropzone","getItemByFileId","isHiddenForever","getFileContainer","_setupDragAndDrop","_totalFilesInBatch","_filesInBatchAddedToUi","_setupClickAndEditEventHandlers","formattedFilename","updateFilename","uploadPaused","continued","uploadContinued","getId","fileContainerOrChildEl","getFileId","getDropTarget","qqDropTarget","uiPrivateApi","_removeFileItem","removeFile","_fileButtonsClickHandler","FileButtonsClickHandler","_bindFileButtonsClickEvent","_focusinEventSupported","_isEditFilenameEnabled","_filenameClickHandler","_bindFilenameClickEvent","_filenameInputFocusInHandler","_bindFilenameInputFocusInEvent","_filenameInputFocusHandler","_bindFilenameInputFocusEvent","dragAndDrop","extraDropzones","templating","defaultDropZone","getDropZone","showDropProcessing","hideDropProcessing","errorData","lvl","onDeleteFile","onRetry","onPause","onContinue","onGetName","isEditFilenamePossible","FilenameClickHandler","FilenameInputFocusHandler","_filenameEditHandler","onGetUploadStatus","onSetName","onEditingStatusChange","isEditing","qqInput","getEditInput","qqFileContainer","hideFilename","hideEditIcon","showFilename","showEditIcon","markFilenameEditable","hideRetry","setStatusText","_classes","retrying","hidePause","FilenameInputFocusInHandler","hideSpinner","resetTotalProgress","reportDirectoryPaths","qqpath","_addToList","addHandler","updateProgress","hideCancel","hideProgress","waitingForResponse","_displayFileSize","completeUpload","_markFileAsSuccessful","fail","showCancel","isRetryPossible","showRetry","_controlFailureTextDisplay","parentRetVal","newResult","showDeleteButton","_maybeUpdateThumbnail","showSpinner","allowPause","retryNumForDisplay","maxAuto","retryNote","_showCancelLink","showAutoRetryNote","autoRetryNote","resetProgress","_onSubmitDeleteSuccess","forceConfirm","_showDeleteConfirm","_sendDeleteRequest","deletingFailedText","hideDeleteButton","deletingStatusText","confirmMessage","deleteRequestArgs","showConfirm","canned","prependData","prependIndex","dontDisplay","hideScaled","prependFiles","disableCancel","_handledProxyGroup","_clearList","addFileToCache","updateThumbnail","thumbnails","generatePreview","fileSizeOnSubmit","loadedSize","sizeForDisplay","_formatProgress","uploadedSize","formatProgress","mode","responseProperty","failureReason","failedUploadTextDisplay","failUpload","enableTooltip","_showTooltip","_setupPastePrompt","namePromptMessage","defaultVal","showPrompt","placeholders","waitUntilResponse","FineUploader","listElement","template","editable","tooManyFilesError","unsupportedBrowser","promptForName","maxCount","notAvailablePath","waitingPath","timeBetweenThumbs","hasDialog","showDialog","confirm","defaultValue","prompt","Templating","templateIdOrEl","containerEl","fileContainerEl","maxThumbs","waitUntilUpdate","thumbnailNotAvailable","waitingForThumbnail","renderFailure","isEditElementsExist","isRetryElementExist","templateDom","showThumbnails","serverScale","fileBatch","createDocumentFragment","isCancelDisabled","generatedThumbnails","thumbnailQueueMonitorRunning","thumbGenerationQueue","thumbnailMaxSize","selectorClasses","alertDialog","dialogCancelButton","confirmDialog","dialogMessage","dialogOkButton","promptDialog","drop","progressBarContainer","totalProgressBarContainer","totalProgressBar","spinner","continueButton","deleteButton","statusText","editFilenameInput","editNameIcon","dropText","dropProcessing","dropProcessingSpinner","thumbnail","previewGeneration","cachedThumbnailNotAvailableImg","cachedWaitingForThumbnailImg","displayWaitingImg","waitingImgPlacement","maybeScalePlaceholderViaCss","show","generateNewPreview","getThumbnail","qqThumbnailId","maybeSetDisplayNotAvailableImg","generateNextQueuedPreview","queuedThumbRequest","processUpdateQueuedPreviewRequest","processNewQueuedPreviewRequest","getCancel","getTemplateEl","getContinue","getDialog","getDelete","getDropProcessing","getEditIcon","getPause","getProgress","getRetry","getSpinner","cssClass","previewing","notAvailableImgPlacement","prependFile","parentEl","beforeEl","optFileOrBlob","relatedThumbnailId","useCachedPreview","showWaitingImg","setProgressBarWidth","percent","bar","progressBarSelector","targetThumbnailId","cachedThumbnailId","targetThumbnail","cachedThumbnail","scriptEl","scriptHtml","fileListNode","tempTemplateEl","fileListEl","defaultButton","dropTextEl","uploaderEl","cloneNode","fileTemplate","notAvailableUrl","waitingUrl","updatedImg","hideTotalProgress","cantRenderEl","prependInfo","hideForever","batch","thumb","fileEl","fileNameEl","waitingImg","currentNode","getFileList","filenameEl","isFileName","icon","isEditIcon","isEditInput","isCancel","allowContinueButton","isPause","isContinueButton","isDeleteButton","isRetry","textEl","dialog","messageEl","inputEl","cancelBtn","okBtn","closeHandler","cancelClickHandler","okClickHandler","close","showModal","UiEventHandler","protectedApi","eventType","srcElement","onHandled","attachTo","getFileIdFromItem","qqFileId","getDisposeSupport","examineEvent","buttonHandlers","buttonType","firstLetterCapButtonType","inheritedInternalApi","handleFilenameEdit","FilenameEditHandler","handleInputFocus","getFilenameSansExtension","filenameSansExt","getOriginalExtension","origName","handleNameUpdate","newFilenameInputEl","origExtension","registerInputBlurHandler","registerInputEnterKeyHandler","keyCode","which","focusInput","focus","escape","selectors","documentElement","_qsa","scrollBy","getElementsByClassName","classNames","TypeError","ret","fun","t","thisp","B64_ALPHABET","bits","fromCharCode","o1","o2","o3","e1","e2","e3","e4","out","proto","__proto__","performance","nowOffset","timing","navigationStart","requestAnimationFrame","webkitRequestAnimationFrame","webkitCancelAnimationFrame","cancelAnimationFrame","mozRequestAnimationFrame","mozCancelAnimationFrame","prepareImageElement","engineSettings","holderFlags","parseURL","domain","prepareDOMElement","flags","instanceOptions","holder","theme","App","settings","themes","gray","stylesheets","firstQuestionMark","basics","holderURL","dimensionData","fluid","querystring","utils","truthy","ratioWidth","parseFloat","ratioHeight","floor","auto","bg","parseColor","fg","autoFg","textmode","font","align","lineWrap","nowrap","outline","vars","cache","themeKeys","_theme","prepSettings","_engineSettings","dimensionsCaption","holderTemplateRe","nodeName","textLines","k","encodeHtmlEntity","holderTemplateMatches","noFontFallback","setup","supportsCanvas","renderer","reRender","DOM","setAttr","domProps","dataAttr","holderData","renderSettings","holderSettings","backgroundColor","resizeUpdate","resizableImages","updateResizableElements","setInitialDimensions","getRenderedImage","sgCanvasRenderer","sceneGraph","svgRenderer","supportsSVG","scene","buildSceneGraph","backgroundImage","noBackgroundSize","backgroundSize","finalizeLine","line","defaults","family","textSize","units","weight","fontweight","noWrap","exactDimensions","lineWrapRatio","sceneMargin","maxLineWidth","SceneGraph","Shape","holderBg","Rect","fill","outlineColor","Color","properties","lighten","lighterThan","toHex","holderTextColor","holderBgColor","lightColor","darkColor","blendAlpha","holderTextGroup","Group","moveTo","tpdata","textPositionData","stagingRenderer","leading","boundingBox","textNode","lineCount","lineKey","offsetX","offsetY","lineIndex","words","word","Text","newline","spaceWidth","stageWidth","stageHeight","bigSide","smallSide","min","images","dimensionCheck","fluidConfig","setInvisible","fluidHeight","fluidWidth","initialDimensions","visibilityCheck","renderableImages","invisibleImages","Holder","run","invisibleId","debounce","debounceTimer","resizeEvent","onDomReady","SVG","constants","SVG_NS","svg_ns","addTheme","addImage","getNodeArray","node","newEl","setResizeUpdate","userOptions","preempted","renderers","bgnodes","stylenodes","objects","svgXMLStylesheet","styleNode","attributes","rel","proxyLink","stylesheetURL","host","pathname","search","bgNode","getComputedStyle","getPropertyValue","dataBackgroundImage","rawURL","holderString","holderStringIndex","fragment","objectAttr","dataSrc","objectHasSrcURL","objectHasDataSrcURL","imageAttr","rendered","imageHasSrc","imageHasDataSrcURL","imageRendered","imageExists","exists","svg","stagingText","stagingTextNode","graph","rootNode","firstTimeSetup","initSVG","visibility","left","htgProps","cssProps","txt","stagingTextBBox","getBBox","newlines","computedNoSpaceLength","getComputedTextLength","diffLength","wordWidths","decodeHtmlEntity","bbox","flag","regex","visibilityCheckStarted","createElementNS","createSVGRect","Turbolinks","win","ready","isReady","defer","completed","w3c","LOAD","READYSTATE","COMPLETE","REMOVEEVENTLISTENER","DOMCONTENTLOADED","FALSE","DETACHEVENT","ONREADYSTATECHANGE","ONLOAD","wait","DOMContentLoaded","docElem","_top","frameElement","doScroll","doScrollCheck","encode","decode","decodeURIComponent","arrayRegex","objectRegex","pairs","valueOf","sceneProperties","merge","nodeCount","SceneNode","z","RootNode","charCode","dec","clientHeight","clientWidth","retval","hexre","rgbre","rgbare","normalizeAlpha","canvasRatio","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","defs","initialize","webkitMatchesSelector","svgStringToDataURI","svgString","base64","serializeSVG","XMLSerializer","serializer","svgCSS","xml","createXML","csspi","createProcessingInstruction","serializeToString","svgText","tag","attrs","DOMParser","parseFromString","NodeList","Node","HTMLCollection","color","original","rgb2hex","g","decimal","hsl2rgb","H","C","abs","X","raw","u","v","rgb","yuv","multiplier","cm","bm","cr","cg","cb","addHash","Ca","Cb","convertShape","shape","templates","textCss","outlinePath","bgWidth","bgHeight","outlineWidth","outlineOffsetWidth","shaven","stylesheetXml","stylesheet","holderId","Number","textGroup","wordTags","wordKey","wordTag","outlineProperties","sceneContent","returnObject","replacer","HTMLString","attributeKey","doesEscape","sugarString","tags","attr","reference","class","subArray","escapeHtml","matchHtmlRegExp","lastIndex","dpr","textBaseline","fillStyle","fillRect","strokeStyle","lineWidth","lineTo","stroke","fillText","isMeteorPackage","Meteor","Package","fileSize2Bytes","thousand","baseUnit","kb","mb","gb","tmpCode","sizeNumber","num","i18n","cn","ui","choseFileButton","dropHere","fileTypes","es","en","buildOptions","sizeLimitStr","getI18n","_vm","_h","$createElement","_c","_self","uploaderClass","_e","staticClass","ref","singleUploadImg","_v","_s","directives","rawName","expression","staticStyle","_m","esExports"],"mappings":"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","file":"v-uploader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vUploader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vUploader\"] = factory();\n\telse\n\t\troot[\"vUploader\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7864e3a89a7862904f43","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vUploader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vUploader\"] = factory();\n\telse\n\t\troot[\"vUploader\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(7)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_fine_uploader__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_fine_uploader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_fine_uploader__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_fine_uploader_fine_uploader_fine_uploader_gallery_min_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_fine_uploader_fine_uploader_fine_uploader_gallery_min_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_fine_uploader_fine_uploader_fine_uploader_gallery_min_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_holderjs__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_holderjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_holderjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__constants__ = __webpack_require__(22);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    name: \"v-uploader\",\n    props: {\n        language: {\n            type: String,\n            default: 'cn'\n        },\n        //show preview box in single upload mode\n        preview: {\n            type: Boolean,\n            default: true\n        },\n        previewImg: String,\n        buttonText: String,\n        buttonIcon: {\n            type: Boolean,\n            default: true\n        },\n        previewWidth: {\n            type: Number,\n            default: 200\n        },\n        previewHeight: {\n            type: Number,\n            default: 150\n        },\n        /**\n         * file upload type\n         * true: multiple file upload\n         * false: single file upload(default)\n         */\n        multiple: {\n            type: Boolean,\n            default: false\n        },\n        //upload file object name\n        uploadFileObjName: {\n            type: String,\n            default: 'uploadFileObj'\n        },\n        //Maximum number of items that can be potentially uploaded in this session.\n        //set 0 to unlimited\n        itemLimit: {\n            type: Number,\n            default: 0\n        },\n        //upload file size limit\n        fileSizeLimit: {\n            type: String,\n            default: '5MB'\n        },\n        // allow to upload file types\n        fileTypeExts: {\n            type: String,\n            default: 'jpeg,jpg,gif,png'\n        },\n        imageMaxHeight: {\n            type: Number,\n            default: 0\n        },\n        imageMaxWidth: {\n            type: Number,\n            default: 0\n        },\n        imageMinHeight: {\n            type: Number,\n            default: 0\n        },\n        imageMinWidth: {\n            type: Number,\n            default: 0\n        },\n        /**\n         * the callback before file upload\n         *\n         * @param id - file id\n         * @param name - file name\n         *\n         * @return boolean - return false to abort file upload\n         */\n        beforeUpload: Function,\n        //file uploader service url\n        uploadFileUrl: {\n            type: String,\n            default: ''\n        },\n        //file delete service url\n        deleteFileUrl: {\n            type: String,\n            default: ''\n        },\n        //set the way to show upload message(upload fail message)\n        showMessage: {\n            type: Function,\n            default: undefined\n        }\n    },\n    data: function data() {\n        return {\n            uploadedFiles: [],\n            deleteIndexs: [],\n\n            options: {},\n            /**\n             * upload success callback\n             * @param id - file id\n             * @param name - file name\n             * @param json - uploaded file detail info\n             */\n            callback: undefined,\n\n            singleUploadImg: '',\n            ui: {},\n            //fileSizeLimit: 0,\n            uploaderClass: {\n                'v-uploader': true,\n                'single-mode': false,\n                'multiple-mode': false\n            }\n        };\n    },\n\n    watch: {\n        previewImg: function previewImg(val) {\n            if (val) this.singleUploadImg = val;\n        }\n    },\n    beforeMount: function beforeMount() {\n        var that = this;\n        if (this.multiple) this.uploaderClass['multiple-mode'] = true;else this.uploaderClass['single-mode'] = true;\n\n        this.ui = __WEBPACK_IMPORTED_MODULE_3__constants__[\"b\" /* getI18n */](this.language);\n        var imgHolder = 'holder.js/' + this.previewWidth + 'x' + this.previewHeight + '?text=' + this.ui.thumbnail + '&size=16';\n        this.singleUploadImg = this.previewImg ? this.previewImg : imgHolder;\n\n        if (!this.multiple) {\n            this.callback = function (data) {\n                if (data && typeof data.success !== 'undefined' && data.success) {\n                    if (that.preview) that.singleUploadImg = data.url;\n                    that.$emit('done', [data]);\n                }\n            };\n        } else {\n            this.callback = function (data) {\n                if (data && typeof data.success !== 'undefined' && data.success) {\n                    that.uploadedFiles.push(data);\n                }\n            };\n        }\n        this.options = __WEBPACK_IMPORTED_MODULE_3__constants__[\"a\" /* buildOptions */].call(this);\n    },\n    mounted: function mounted() {\n        var that = this;\n\n        if (!this.multiple) {\n            if (this.preview && !this.previewImg) __WEBPACK_IMPORTED_MODULE_2_holderjs___default.a.run({ images: this.$refs.simpleImg });\n            this.options.button = this.$refs.upload;\n            //upload error callback\n            //basic mode work only\n            that.options.callbacks.onError = function (id, name, errorReason, xhr) {\n                if (that.showMessage && typeof that.showMessage === 'function') that.showMessage(that, errorReason);\n            };\n            if (this.beforeUpload && typeof this.beforeUpload === 'function') that.options.callbacks.onSubmit = this.beforeUpload;\n            new __WEBPACK_IMPORTED_MODULE_0_fine_uploader___default.a.FineUploaderBasic(that.options);\n        } else {\n            that.options.deleteFile.endpoint = this.deleteFileUrl;\n            that.options.template = this.$refs.uploadArea;\n            that.options.element = this.$refs.multipleUpload;\n            that.options.showMessage = function (message) {\n                if (that.showMessage && typeof that.showMessage === 'function') that.showMessage(that, message);\n            };\n            that.options.callbacks.onDelete = function (id) {\n                that.deleteIndexs.push(id);\n                that.$emit('done', that.uploadedFiles.filter(function (val, index) {\n                    return !that.deleteIndexs.includes(index);\n                }));\n            };\n            that.options.callbacks.onAllComplete = function (succeeded, failed) {\n                that.$emit('done', that.uploadedFiles);\n            };\n            if (this.itemLimit) this.options.validation.itemLimit = this.itemLimit;\n            if (this.beforeUpload && typeof this.beforeUpload === 'function') that.options.callbacks.onSubmit = this.beforeUpload;\n            new __WEBPACK_IMPORTED_MODULE_0_fine_uploader___default.a.FineUploader(that.options);\n        }\n    }\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__ = __webpack_require__(4);\n\n\nvar Plugin = {\n    install: function install(Vue) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (Object.keys(options).length) {\n            if (typeof options.language === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.language.default = options.language;\n            if (typeof options.preview === 'boolean') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.preview.default = options.preview;\n            if (typeof options.buttonText === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.buttonText.default = options.buttonText;\n            if (typeof options.buttonIcon === 'boolean') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.buttonIcon.default = options.buttonIcon;\n            if (typeof options.previewWidth === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.previewWidth.default = options.previewWidth;\n            if (typeof options.previewHeight === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.previewHeight.default = options.previewHeight;\n            if (typeof options.multiple === 'boolean') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.multiple.default = options.multiple;\n            if (typeof options.uploadFileObjName === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.uploadFileObjName.default = options.uploadFileObjName;\n            if (typeof options.itemLimit === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.itemLimit.default = options.itemLimit;\n            if (typeof options.fileSizeLimit === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.fileSizeLimit.default = options.fileSizeLimit;\n            if (typeof options.fileTypeExts === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.fileTypeExts.default = options.fileTypeExts;\n            if (typeof options.imageMaxHeight === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.imageMaxHeight.default = options.imageMaxHeight;\n            if (typeof options.imageMaxWidth === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.imageMaxWidth.default = options.imageMaxWidth;\n            if (typeof options.imageMinHeight === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.imageMinHeight.default = options.imageMinHeight;\n            if (typeof options.imageMinWidth === 'number') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.imageMinWidth.default = options.imageMinWidth;\n\n            if (typeof options.uploadFileUrl === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.uploadFileUrl.default = options.uploadFileUrl;\n            if (typeof options.deleteFileUrl === 'string') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.deleteFileUrl.default = options.deleteFileUrl;\n            if (typeof options.showMessage === 'function') __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].props.showMessage.default = options.showMessage;\n        }\n        Vue.component(__WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */].name, __WEBPACK_IMPORTED_MODULE_0__Uploader_vue__[\"a\" /* default */]);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Plugin);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Uploader_vue__ = __webpack_require__(2);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_eca14c4c_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Uploader_vue__ = __webpack_require__(23);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(5)\n}\nvar normalizeComponent = __webpack_require__(8)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eca14c4c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Uploader_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_eca14c4c_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Uploader_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(6);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(1)(\"d79e3958\", content, true, {});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div.v-uploader[data-v-eca14c4c]{margin-bottom:10px}div.v-uploader.single-mode[data-v-eca14c4c]{display:inline-block}div.v-uploader.multiple-mode[data-v-eca14c4c]{display:block}div.v-uploader .uploader-button[data-v-eca14c4c]{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.2);box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.2);-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out;color:#212121;background:#fff;border-color:#fff;outline:0;width:auto;display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143}div.v-uploader .uploader-button i[data-v-eca14c4c]{font-size:13px}div.v-uploader .uploader-button[data-v-eca14c4c]:active{-webkit-box-shadow:0 10px 20px rgba(0,0,0,.2),0 6px 6px rgba(0,0,0,.23);box-shadow:0 10px 20px rgba(0,0,0,.2),0 6px 6px rgba(0,0,0,.23)}div.v-uploader div.single-upload[data-v-eca14c4c]{display:inline-block;margin-right:5px;text-align:center}div.v-uploader div.single-upload div.image-box[data-v-eca14c4c]{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 1px 8px rgba(0,0,0,.1);-moz-box-shadow:0 1px 8px rgba(0,0,0,.1);box-shadow:0 1px 8px rgba(0,0,0,.1);border:1px solid #ddd;padding:5px;margin-bottom:10px}div.v-uploader div.upload-list[data-v-eca14c4c]{width:100%}div.v-uploader div.upload-list .qq-gallery.qq-uploader[data-v-eca14c4c]{padding:10px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list[data-v-eca14c4c]{height:205px;padding:1px 0 10px 1px;overflow-x:hidden;margin-bottom:10px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list li[data-v-eca14c4c]{margin:0 10px 10px 0;height:180px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list li.qq-upload-success[data-v-eca14c4c]{background-color:#dff0d8}div.v-uploader div.upload-list .qq-gallery .file-upload-finish[data-v-eca14c4c]{cursor:pointer;color:#fff;background:#2196f3;border-color:#2196f3}div.v-uploader div.upload-list .qq-gallery .info-show[data-v-eca14c4c]{float:left;line-height:18px;white-space:nowrap;padding:0 5px;color:#333}div.v-uploader div.upload-list .qq-gallery .info-show span[data-v-eca14c4c]{color:#999;margin-right:10px;font-family:Consolas}@font-face{font-family:v-upload-iconfont;src:url(\\\"data:image/eot;base64,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\\\");src:url(\\\"data:image/eot;base64,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?t=1524818269295#iefix\\\") format(\\\"embedded-opentype\\\"),url(\\\"data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAWkAAsAAAAACBgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAAQwAAAFZW7kiCY21hcAAAAYAAAABmAAABnM+SbChnbHlmAAAB6AAAAbEAAAHYVwg4OmhlYWQAAAOcAAAALwAAADYRdEjPaGhlYQAAA8wAAAAeAAAAJAghA85obXR4AAAD7AAAABAAAAAQEDIAAGxvY2EAAAP8AAAACgAAAAoBYgDabWF4cAAABAgAAAAfAAAAIAETAF1uYW1lAAAEKAAAAUUAAAJtPlT+fXBvc3QAAAVwAAAAMQAAAELmlhu2eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk4WWcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYKp41Mzf8b2CIYW5gaAAKM4LkAOEpDAUAeJzFkLENwCAMBN+YRCjKKCmjDEOZKiPQs6vXILahYQIenbFfLxkBYAPAyqVEgD4QTK+65D7jcD/i0TnpCXoXyVJbmzoTeSJ5x5akHctE61bPOr3eY7L/LgN9ouSO+VI7CD9X5RLnAAB4nCWRu27UQBSG54xj7yVeG48vY89efMOeoMBKOOPdgmS3AAqIi4hUSKFIlYakQkpDsQ0SBQVa3gAhEWqQtskrIPIKCHp6xBrG5OjoP9IvHen/zkEqQn+/K5eKj2y0he6iB+gAIdC2ITHwEGIuxngb3Fh1qWMoPOVxK03Gyh7QRHO8YiJyqrU0EwwYwU5cTPgYcyjFDN+DwhsCBH12SLIBUd5C1+ejV/Vj/B7cMB2Yszv1o9tzp4js9rlOSEDIm7amqm2MN0wDTqnXUTtdrf6gmsy9DG/hEPSAs+ppL+qT49fibJjRDsBiAXY/Mj7OLWbJfsk8mwStG722z3rpTQfOf276tj7MfyBZSiMb95UpshBHDyWnSONEptdcpwk/h0kWlyKXZr4HIpdH0FxrOgPVaQgbu7TE5BotbmSn8Kin/A7X76gwL7ojfEaFcbG5fgGriNYrGkVUypI9wX/Yp+AwXy/L/f1yJSqYiuo0FHoHnjuBddXrOsy60k+OPLmRNWu1/yXkz9Lk22irEjgTVSVIJY4GjMjY/2EWeInk9zLeosBh8Xn3F0a7X68H+gf3elGXAAAAeJxjYGRgYADiuGdCavH8Nl8ZuFkYQOA6J1Msgv7/kMWZ2RzI5WBgAokCAOhECBYAeJxjYGRgYG7438AQw+LJAAQszgyMDKiABQBTJAL5AAAEAAAAA+kAAARJAAAEAAAAAAAAAAB2ANoA7AAAeJxjYGRgYGBhCGRgZQABJiDmAkIGhv9gPgMAERIBcQB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICFkYmRmZGFkZWBsYI3LT8nJbVIN78gNU83nyUlPy+VgQEAXuoHSgAAAA==\\\") format(\\\"woff\\\"),url(\\\"data:image/ttf;base64,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?t=1524818269295\\\") format(\\\"truetype\\\"),url(\\\"data:image/svg;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPCEtLQoyMDEzLTktMzA6IENyZWF0ZWQuCi0tPgo8c3ZnPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgaWNvbmZvbnQKPC9tZXRhZGF0YT4KPGRlZnM+Cgo8Zm9udCBpZD0iaWNvbmZvbnQiIGhvcml6LWFkdi14PSIxMDI0IiA+CiAgPGZvbnQtZmFjZQogICAgZm9udC1mYW1pbHk9Imljb25mb250IgogICAgZm9udC13ZWlnaHQ9IjUwMCIKICAgIGZvbnQtc3RyZXRjaD0ibm9ybWFsIgogICAgdW5pdHMtcGVyLWVtPSIxMDI0IgogICAgYXNjZW50PSI4OTYiCiAgICBkZXNjZW50PSItMTI4IgogIC8+CiAgICA8bWlzc2luZy1nbHlwaCAvPgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0ieCIgdW5pY29kZT0ieCIgaG9yaXotYWR2LXg9IjEwMDEiCmQ9Ik0yODEgNTQzcS0yNyAtMSAtNTMgLTFoLTgzcS0xOCAwIC0zNi41IC02dC0zMi41IC0xOC41dC0yMyAtMzJ0LTkgLTQ1LjV2LTc2aDkxMnY0MXEwIDE2IC0wLjUgMzB0LTAuNSAxOHEwIDEzIC01IDI5dC0xNyAyOS41dC0zMS41IDIyLjV0LTQ5LjUgOWgtMTMzdi05N2gtNDM4djk3ek05NTUgMzEwdi01MnEwIC0yMyAwLjUgLTUydDAuNSAtNTh0LTEwLjUgLTQ3LjV0LTI2IC0zMHQtMzMgLTE2dC0zMS41IC00LjVxLTE0IC0xIC0yOS41IC0wLjUKdC0yOS41IDAuNWgtMzJsLTQ1IDEyOGgtNDM5bC00NCAtMTI4aC0yOWgtMzRxLTIwIDAgLTQ1IDFxLTI1IDAgLTQxIDkuNXQtMjUuNSAyM3QtMTMuNSAyOS41dC00IDMwdjE2N2g5MTF6TTE2MyAyNDdxLTEyIDAgLTIxIC04LjV0LTkgLTIxLjV0OSAtMjEuNXQyMSAtOC41cTEzIDAgMjIgOC41dDkgMjEuNXQtOSAyMS41dC0yMiA4LjV6TTMxNiAxMjNxLTggLTI2IC0xNCAtNDhxLTUgLTE5IC0xMC41IC0zN3QtNy41IC0yNXQtMyAtMTV0MSAtMTQuNQp0OS41IC0xMC41dDIxLjUgLTRoMzdoNjdoODFoODBoNjRoMzZxMjMgMCAzNCAxMnQyIDM4cS01IDEzIC05LjUgMzAuNXQtOS41IDM0LjVxLTUgMTkgLTExIDM5aC0zNjh6TTMzNiA0OTh2MjI4cTAgMTEgMi41IDIzdDEwIDIxLjV0MjAuNSAxNS41dDM0IDZoMTg4cTMxIDAgNTEuNSAtMTQuNXQyMC41IC01Mi41di0yMjdoLTMyN3oiIC8+CiAgICAKCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJmb2xkZXItb3Blbi1vIiB1bmljb2RlPSImIzU5MDExOyIgZD0iTTEwMTcuNzE0Mjg2IDM2NHEwIDIwLTMwLjI4NTcxNSAyMEgzNjUuNzE0Mjg2cS0yMi44NTcxNDMgMC00OC44NTcxNDMtMTIuMjg1NzE0VDI3NiAzNDEuNzE0Mjg2bC0xNjgtMjA3LjQyODU3MnEtMTAuMjg1NzE0LTEzLjcxNDI4Ni0xMC4yODU3MTQtMjIuODU3MTQzIDAtMjAgMzAuMjg1NzE0LTIwaDYyMS43MTQyODZxMjIuODU3MTQzIDAgNDkuMTQyODU3IDEyLjU3MTQyOXQ0MC41NzE0MjggMzAuMjg1NzE0bDE2OCAyMDcuNDI4NTcycTEwLjI4NTcxNCAxMi41NzE0MjkgMTAuMjg1NzE1IDIyLjI4NTcxNHpNMzY1LjcxNDI4NiA0NTcuMTQyODU3aDQzOC44NTcxNDNWNTQ4LjU3MTQyOXEwIDIyLjg1NzE0My0xNiAzOC44NTcxNDJ0LTM4Ljg1NzE0MyAxNkg0MjAuNTcxNDI5cS0yMi44NTcxNDMgMC0zOC44NTcxNDMgMTZ0LTE2IDM4Ljg1NzE0M3YzNi41NzE0MjlxMCAyMi44NTcxNDMtMTYgMzguODU3MTQzdC0zOC44NTcxNDMgMTZIMTI4cS0yMi44NTcxNDMgMC0zOC44NTcxNDMtMTZ0LTE2LTM4Ljg1NzE0M3YtNDg3LjQyODU3MmwxNDYuMjg1NzE0IDE4MHEyNS4xNDI4NTcgMzAuMjg1NzE0IDY2LjI4NTcxNSA1MFQzNjUuNzE0Mjg2IDQ1Ny4xNDI4NTd6IG03MjUuMTQyODU3LTkzLjE0Mjg1N3EwLTM1LjQyODU3MS0yNi4yODU3MTQtNjguNTcxNDI5bC0xNjguNTcxNDI5LTIwNy40Mjg1NzFxLTI0LjU3MTQyOS0zMC4yODU3MTQtNjYuMjg1NzE0LTUwdC04MC0xOS43MTQyODZIMTI4cS01Mi41NzE0MjkgMC05MC4yODU3MTQgMzcuNzE0Mjg2VDAgMTQ2LjI4NTcxNFY2OTQuODU3MTQzcTAgNTIuNTcxNDI5IDM3LjcxNDI4NiA5MC4yODU3MTR0OTAuMjg1NzE0IDM3LjcxNDI4NmgxODIuODU3MTQzcTUyLjU3MTQyOSAwIDkwLjI4NTcxNC0zNy43MTQyODZ0MzcuNzE0Mjg2LTkwLjI4NTcxNHYtMTguMjg1NzE0aDMxMC44NTcxNDNxNTIuNTcxNDI5IDAgOTAuMjg1NzE0LTM3LjcxNDI4NnQzNy43MTQyODYtOTAuMjg1NzE0di05MS40Mjg1NzJoMTA5LjcxNDI4NXEzMC44NTcxNDMgMCA1Ni41NzE0MjktMTR0MzguMjg1NzE0LTQwLjI4NTcxNHE4LjU3MTQyOS0xOC4yODU3MTQgOC41NzE0MjktMzguODU3MTQzeiIgIGhvcml6LWFkdi14PSIxMDk3IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9ImRvbmUiIHVuaWNvZGU9IiYjNTg5NzA7IiBkPSJNMzg0IDIwNC44TDIwNC44IDM4NGwtNTkuNzMzMzMzLTU5LjczMzMzM0wzODQgODUuMzMzMzMzIDg5NiA1OTcuMzMzMzMzbC01OS43MzMzMzMgNTkuNzMzMzM0eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAoKCiAgPC9mb250Pgo8L2RlZnM+PC9zdmc+Cg==?t=1524818269295#v-upload-iconfont\\\") format(\\\"svg\\\")}.v-upload-iconfont[data-v-eca14c4c]{font-family:v-upload-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-uploader-open[data-v-eca14c4c]:before{content:\\\"\\\\E683\\\"}.icon-uploader-done[data-v-eca14c4c]:before{content:\\\"\\\\E65A\\\"}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = __webpack_require__(10);\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (true) {\n            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n                return qq;\n            }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.traditional = qq.traditional || {};\n    qq.traditional.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log;\n        function getIframeContentJson(id, iframe) {\n            var response, doc, innerHtml;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                log(\"converting iframe's innerHTML to JSON\");\n                log(\"innerHTML = \" + innerHtml);\n                if (innerHtml && innerHtml.match(/^<pre/i)) {\n                    innerHtml = doc.body.firstChild.firstChild.nodeValue;\n                }\n                response = handler._parseJsonResponse(innerHtml);\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n                response = {\n                    success: false\n                };\n            }\n            return response;\n        }\n        function createForm(id, iframe) {\n            var params = options.paramsStore.get(id), method = options.method.toLowerCase() === \"get\" ? \"GET\" : \"POST\", endpoint = options.endpointStore.get(id), name = getName(id);\n            params[options.uuidName] = getUuid(id);\n            params[options.filenameParam] = name;\n            return handler._initFormForUpload({\n                method: method,\n                endpoint: endpoint,\n                params: params,\n                paramsInBody: options.paramsInBody,\n                targetName: iframe.name\n            });\n        }\n        this.uploadFile = function(id) {\n            var input = handler.getInput(id), iframe = handler._createIframe(id), promise = new qq.Promise(), form;\n            form = createForm(id, iframe);\n            form.appendChild(input);\n            handler._attachLoadEvent(iframe, function(responseFromMessage) {\n                log(\"iframe loaded\");\n                var response = responseFromMessage ? responseFromMessage : getIframeContentJson(id, iframe);\n                handler._detachLoadEvent(id);\n                if (!options.cors.expected) {\n                    qq(iframe).remove();\n                }\n                if (response.success) {\n                    promise.success(response);\n                } else {\n                    promise.failure(response);\n                }\n            });\n            log(\"Sending upload request for \" + id);\n            form.submit();\n            qq(form).remove();\n            return promise;\n        };\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: options.cors.expected,\n                inputName: options.inputName\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n    };\n    qq.traditional = qq.traditional || {};\n    qq.traditional.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, log = proxy.log, multipart = spec.forceMultipart || spec.paramsInBody, addChunkingSpecificParams = function(id, params, chunkData) {\n            var size = getSize(id), name = getName(id);\n            if (!spec.omitDefaultParams) {\n                params[spec.chunking.paramNames.partIndex] = chunkData.part;\n                params[spec.chunking.paramNames.partByteOffset] = chunkData.start;\n                params[spec.chunking.paramNames.chunkSize] = chunkData.size;\n                params[spec.chunking.paramNames.totalParts] = chunkData.count;\n                params[spec.totalFileSizeName] = size;\n            }\n            if (multipart && !spec.omitDefaultParams) {\n                params[spec.filenameParam] = name;\n            }\n        }, allChunksDoneRequester = new qq.traditional.AllChunksDoneAjaxRequester({\n            cors: spec.cors,\n            endpoint: spec.chunking.success.endpoint,\n            headers: spec.chunking.success.headers,\n            jsonPayload: spec.chunking.success.jsonPayload,\n            log: log,\n            method: spec.chunking.success.method,\n            params: spec.chunking.success.params\n        }), createReadyStateChangedHandler = function(id, xhr) {\n            var promise = new qq.Promise();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    var result = onUploadOrChunkComplete(id, xhr);\n                    if (result.success) {\n                        promise.success(result.response, xhr);\n                    } else {\n                        promise.failure(result.response, xhr);\n                    }\n                }\n            };\n            return promise;\n        }, getChunksCompleteParams = function(id) {\n            var params = spec.paramsStore.get(id), name = getName(id), size = getSize(id);\n            params[spec.uuidName] = getUuid(id);\n            params[spec.filenameParam] = name;\n            params[spec.totalFileSizeName] = size;\n            params[spec.chunking.paramNames.totalParts] = handler._getTotalChunks(id);\n            return params;\n        }, isErrorUploadResponse = function(xhr, response) {\n            return qq.indexOf([ 200, 201, 202, 203, 204 ], xhr.status) < 0 || spec.requireSuccessJson && !response.success || response.reset;\n        }, onUploadOrChunkComplete = function(id, xhr) {\n            var response;\n            log(\"xhr - server response received for \" + id);\n            log(\"responseText = \" + xhr.responseText);\n            response = parseResponse(true, xhr);\n            return {\n                success: !isErrorUploadResponse(xhr, response),\n                response: response\n            };\n        }, parseResponse = function(upload, xhr) {\n            var response = {};\n            try {\n                log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                response = qq.parseJson(xhr.responseText);\n            } catch (error) {\n                upload && spec.requireSuccessJson && log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n            }\n            return response;\n        }, sendChunksCompleteRequest = function(id) {\n            var promise = new qq.Promise();\n            allChunksDoneRequester.complete(id, handler._createXhr(id), getChunksCompleteParams(id), spec.customHeaders.get(id)).then(function(xhr) {\n                promise.success(parseResponse(false, xhr), xhr);\n            }, function(xhr) {\n                promise.failure(parseResponse(false, xhr), xhr);\n            });\n            return promise;\n        }, setParamsAndGetEntityToSend = function(entityToSendParams) {\n            var fileOrBlob = entityToSendParams.fileOrBlob;\n            var id = entityToSendParams.id;\n            var xhr = entityToSendParams.xhr;\n            var xhrOverrides = entityToSendParams.xhrOverrides || {};\n            var customParams = entityToSendParams.customParams || {};\n            var defaultParams = entityToSendParams.params || {};\n            var xhrOverrideParams = xhrOverrides.params || {};\n            var params;\n            var formData = multipart ? new FormData() : null, method = xhrOverrides.method || spec.method, endpoint = xhrOverrides.endpoint || spec.endpointStore.get(id), name = getName(id), size = getSize(id);\n            if (spec.omitDefaultParams) {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n            } else {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n                qq.extend(params, defaultParams);\n                params[spec.uuidName] = getUuid(id);\n                params[spec.filenameParam] = name;\n                if (multipart) {\n                    params[spec.totalFileSizeName] = size;\n                } else if (!spec.paramsInBody) {\n                    params[spec.inputName] = name;\n                }\n            }\n            if (!spec.paramsInBody) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            xhr.open(method, endpoint, true);\n            if (spec.cors.expected && spec.cors.sendCredentials) {\n                xhr.withCredentials = true;\n            }\n            if (multipart) {\n                if (spec.paramsInBody) {\n                    qq.obj2FormData(params, formData);\n                }\n                formData.append(spec.inputName, fileOrBlob);\n                return formData;\n            }\n            return fileOrBlob;\n        }, setUploadHeaders = function(headersOptions) {\n            var headerOverrides = headersOptions.headerOverrides;\n            var id = headersOptions.id;\n            var xhr = headersOptions.xhr;\n            if (headerOverrides) {\n                qq.each(headerOverrides, function(headerName, headerValue) {\n                    xhr.setRequestHeader(headerName, headerValue);\n                });\n            } else {\n                var extraHeaders = spec.customHeaders.get(id), fileOrBlob = handler.getFile(id);\n                xhr.setRequestHeader(\"Accept\", \"application/json\");\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                if (!multipart) {\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n                    xhr.setRequestHeader(\"X-Mime-Type\", fileOrBlob.type);\n                }\n                qq.each(extraHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: function(uploadChunkParams) {\n                var id = uploadChunkParams.id;\n                var chunkIdx = uploadChunkParams.chunkIdx;\n                var overrides = uploadChunkParams.overrides || {};\n                var resuming = uploadChunkParams.resuming;\n                var chunkData = handler._getChunkData(id, chunkIdx), xhr = handler._createXhr(id, chunkIdx), promise, toSend, customParams, params = {};\n                promise = createReadyStateChangedHandler(id, xhr);\n                handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                customParams = spec.paramsStore.get(id);\n                addChunkingSpecificParams(id, params, chunkData);\n                if (resuming) {\n                    params[spec.resume.paramNames.resuming] = true;\n                }\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: chunkData.blob,\n                    id: id,\n                    customParams: customParams,\n                    params: params,\n                    xhr: xhr,\n                    xhrOverrides: overrides\n                });\n                setUploadHeaders({\n                    headerOverrides: overrides.headers,\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var fileOrBlob = handler.getFile(id), promise, xhr, customParams, toSend;\n                xhr = handler._createXhr(id);\n                handler._registerProgressHandler(id);\n                promise = createReadyStateChangedHandler(id, xhr);\n                customParams = spec.paramsStore.get(id);\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: fileOrBlob,\n                    id: id,\n                    customParams: customParams,\n                    xhr: xhr\n                });\n                setUploadHeaders({\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"traditional\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                finalizeChunks: function(id) {\n                    proxy.onFinalizing(id);\n                    if (spec.chunking.success.endpoint) {\n                        return sendChunksCompleteRequest(id);\n                    } else {\n                        return super_.finalizeChunks(id, qq.bind(parseResponse, this, true));\n                    }\n                }\n            };\n        });\n    };\n    qq.traditional.AllChunksDoneAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                allowXdr: false,\n                expected: false,\n                sendCredentials: false\n            },\n            endpoint: null,\n            log: function(str, level) {},\n            method: \"POST\"\n        }, promises = {}, endpointHandler = {\n            get: function(id) {\n                if (qq.isFunction(options.endpoint)) {\n                    return options.endpoint(id);\n                }\n                return options.endpoint;\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            contentType: options.jsonPayload ? \"application/json\" : \"application/x-www-form-urlencoded\",\n            validMethods: [ options.method ],\n            method: options.method,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: options.cors,\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        qq.extend(this, {\n            complete: function(id, xhr, params, headers) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting All Chunks Done request for \" + id);\n                promises[id] = promise;\n                requester.initTransport(id).withParams(options.params(id) || params).withHeaders(options.headers(id) || headers).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.DragAndDrop = function(o) {\n        \"use strict\";\n        var options, HIDE_ZONES_EVENT_NAME = \"qq-hidezones\", HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\", uploadDropZones = [], droppedFiles = [], disposeSupport = new qq.DisposeSupport();\n        options = {\n            dropZoneElements: [],\n            allowMultipleItems: true,\n            classes: {\n                dropActive: null\n            },\n            callbacks: new qq.DragAndDrop.callbacks()\n        };\n        qq.extend(options, o, true);\n        function uploadDroppedFiles(files, uploadDropZone) {\n            var filesAsArray = Array.prototype.slice.call(files);\n            options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n            uploadDropZone.dropDisabled(false);\n            options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n        }\n        function traverseFileTree(entry) {\n            var parseEntryPromise = new qq.Promise();\n            if (entry.isFile) {\n                entry.file(function(file) {\n                    file.qqPath = extractDirectoryPath(entry);\n                    droppedFiles.push(file);\n                    parseEntryPromise.success();\n                }, function(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            } else if (entry.isDirectory) {\n                getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                }, function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            }\n            return parseEntryPromise;\n        }\n        function extractDirectoryPath(entry) {\n            var name = entry.name, fullPath = entry.fullPath, indexOfNameInFullPath = fullPath.lastIndexOf(name);\n            fullPath = fullPath.substr(0, indexOfNameInFullPath);\n            if (fullPath.charAt(0) === \"/\") {\n                fullPath = fullPath.substr(1);\n            }\n            return fullPath;\n        }\n        function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n            var promise = existingPromise || new qq.Promise(), dirReader = reader || entry.createReader();\n            dirReader.readEntries(function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n                if (entries.length) {\n                    setTimeout(function() {\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                } else {\n                    promise.success(newEntries);\n                }\n            }, promise.failure);\n            return promise;\n        }\n        function handleDataTransfer(dataTransfer, uploadDropZone) {\n            var pendingFolderPromises = [], handleDataTransferPromise = new qq.Promise();\n            options.callbacks.processingDroppedFiles();\n            uploadDropZone.dropDisabled(true);\n            if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n                options.callbacks.processingDroppedFilesComplete([]);\n                options.callbacks.dropError(\"tooManyFilesError\", \"\");\n                uploadDropZone.dropDisabled(false);\n                handleDataTransferPromise.failure();\n            } else {\n                droppedFiles = [];\n                if (qq.isFolderDropSupported(dataTransfer)) {\n                    qq.each(dataTransfer.items, function(idx, item) {\n                        var entry = item.webkitGetAsEntry();\n                        if (entry) {\n                            if (entry.isFile) {\n                                droppedFiles.push(item.getAsFile());\n                            } else {\n                                pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                    pendingFolderPromises.pop();\n                                    if (pendingFolderPromises.length === 0) {\n                                        handleDataTransferPromise.success();\n                                    }\n                                }));\n                            }\n                        }\n                    });\n                } else {\n                    droppedFiles = dataTransfer.files;\n                }\n                if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                }\n            }\n            return handleDataTransferPromise;\n        }\n        function setupDropzone(dropArea) {\n            var dropZone = new qq.UploadDropZone({\n                HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n                element: dropArea,\n                onEnter: function(e) {\n                    qq(dropArea).addClass(options.classes.dropActive);\n                    e.stopPropagation();\n                },\n                onLeaveNotDescendants: function(e) {\n                    qq(dropArea).removeClass(options.classes.dropActive);\n                },\n                onDrop: function(e) {\n                    handleDataTransfer(e.dataTransfer, dropZone).then(function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    }, function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    });\n                }\n            });\n            disposeSupport.addDisposer(function() {\n                dropZone.dispose();\n            });\n            qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n            uploadDropZones.push(dropZone);\n            return dropZone;\n        }\n        function isFileDrag(dragEvent) {\n            var fileDrag;\n            qq.each(dragEvent.dataTransfer.types, function(key, val) {\n                if (val === \"Files\") {\n                    fileDrag = true;\n                    return false;\n                }\n            });\n            return fileDrag;\n        }\n        function leavingDocumentOut(e) {\n            if (qq.safari()) {\n                return e.x < 0 || e.y < 0;\n            }\n            return e.x === 0 && e.y === 0;\n        }\n        function setupDragDrop() {\n            var dropZones = options.dropZoneElements, maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n            qq.each(dropZones, function(idx, dropZone) {\n                var uploadDropZone = setupDropzone(dropZone);\n                if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                    disposeSupport.attach(document, \"dragenter\", function(e) {\n                        if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                            qq.each(dropZones, function(idx, dropZone) {\n                                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                                    qq(dropZone).css({\n                                        display: \"block\"\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n            disposeSupport.attach(document, \"dragleave\", function(e) {\n                if (leavingDocumentOut(e)) {\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n                maybeHideDropZones();\n            });\n            disposeSupport.attach(document, \"drop\", function(e) {\n                if (isFileDrag(e)) {\n                    e.preventDefault();\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n        }\n        setupDragDrop();\n        qq.extend(this, {\n            setupExtraDropzone: function(element) {\n                options.dropZoneElements.push(element);\n                setupDropzone(element);\n            },\n            removeDropzone: function(element) {\n                var i, dzs = options.dropZoneElements;\n                for (i in dzs) {\n                    if (dzs[i] === element) {\n                        return dzs.splice(i, 1);\n                    }\n                }\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n                qq.each(uploadDropZones, function(idx, dropZone) {\n                    dropZone.dispose();\n                });\n            }\n        });\n        this._testing = {};\n        this._testing.extractDirectoryPath = extractDirectoryPath;\n    };\n    qq.DragAndDrop.callbacks = function() {\n        \"use strict\";\n        return {\n            processingDroppedFiles: function() {},\n            processingDroppedFilesComplete: function(files, targetEl) {},\n            dropError: function(code, errorSpecifics) {\n                qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n            },\n            dropLog: function(message, level) {\n                qq.log(message, level);\n            }\n        };\n    };\n    qq.UploadDropZone = function(o) {\n        \"use strict\";\n        var disposeSupport = new qq.DisposeSupport(), options, element, preventDrop, dropOutsideDisabled;\n        options = {\n            element: null,\n            onEnter: function(e) {},\n            onLeave: function(e) {},\n            onLeaveNotDescendants: function(e) {},\n            onDrop: function(e) {}\n        };\n        qq.extend(options, o);\n        element = options.element;\n        function dragoverShouldBeCanceled() {\n            return qq.safari() || qq.firefox() && qq.windows();\n        }\n        function disableDropOutside(e) {\n            if (!dropOutsideDisabled) {\n                if (dragoverShouldBeCanceled) {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        e.preventDefault();\n                    });\n                } else {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        if (e.dataTransfer) {\n                            e.dataTransfer.dropEffect = \"none\";\n                            e.preventDefault();\n                        }\n                    });\n                }\n                dropOutsideDisabled = true;\n            }\n        }\n        function isValidFileDrag(e) {\n            if (!qq.supportedFeatures.fileDrop) {\n                return false;\n            }\n            var effectTest, dt = e.dataTransfer, isSafari = qq.safari();\n            effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n            return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n        }\n        function isOrSetDropDisabled(isDisabled) {\n            if (isDisabled !== undefined) {\n                preventDrop = isDisabled;\n            }\n            return preventDrop;\n        }\n        function triggerHidezonesEvent() {\n            var hideZonesEvent;\n            function triggerUsingOldApi() {\n                hideZonesEvent = document.createEvent(\"Event\");\n                hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n            }\n            if (window.CustomEvent) {\n                try {\n                    hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n                } catch (err) {\n                    triggerUsingOldApi();\n                }\n            } else {\n                triggerUsingOldApi();\n            }\n            document.dispatchEvent(hideZonesEvent);\n        }\n        function attachEvents() {\n            disposeSupport.attach(element, \"dragover\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n                if (effect === \"move\" || effect === \"linkMove\") {\n                    e.dataTransfer.dropEffect = \"move\";\n                } else {\n                    e.dataTransfer.dropEffect = \"copy\";\n                }\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            disposeSupport.attach(element, \"dragenter\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    options.onEnter(e);\n                }\n            });\n            disposeSupport.attach(element, \"dragleave\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onLeave(e);\n                var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n                if (qq(this).contains(relatedTarget)) {\n                    return;\n                }\n                options.onLeaveNotDescendants(e);\n            });\n            disposeSupport.attach(element, \"drop\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    options.onDrop(e);\n                    triggerHidezonesEvent();\n                }\n            });\n        }\n        disableDropOutside();\n        attachEvents();\n        qq.extend(this, {\n            dropDisabled: function(isDisabled) {\n                return isOrSetDropDisabled(isDisabled);\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n            },\n            getElement: function() {\n                return element;\n            }\n        });\n        this._testing = {};\n        this._testing.isValidFileDrag = isValidFileDrag;\n    };\n    (function() {\n        \"use strict\";\n        qq.uiPublicApi = {\n            addInitialFiles: function(cannedFileList) {\n                this._parent.prototype.addInitialFiles.apply(this, arguments);\n                this._templating.addCacheToDom();\n            },\n            clearStoredFiles: function() {\n                this._parent.prototype.clearStoredFiles.apply(this, arguments);\n                this._templating.clearFiles();\n            },\n            addExtraDropzone: function(element) {\n                this._dnd && this._dnd.setupExtraDropzone(element);\n            },\n            removeExtraDropzone: function(element) {\n                if (this._dnd) {\n                    return this._dnd.removeDropzone(element);\n                }\n            },\n            getItemByFileId: function(id) {\n                if (!this._templating.isHiddenForever(id)) {\n                    return this._templating.getFileContainer(id);\n                }\n            },\n            reset: function() {\n                this._parent.prototype.reset.apply(this, arguments);\n                this._templating.reset();\n                if (!this._options.button && this._templating.getButton()) {\n                    this._defaultButtonId = this._createUploadButton({\n                        element: this._templating.getButton(),\n                        title: this._options.text.fileInputTitle\n                    }).getButtonId();\n                }\n                if (this._dnd) {\n                    this._dnd.dispose();\n                    this._dnd = this._setupDragAndDrop();\n                }\n                this._totalFilesInBatch = 0;\n                this._filesInBatchAddedToUi = 0;\n                this._setupClickAndEditEventHandlers();\n            },\n            setName: function(id, newName) {\n                var formattedFilename = this._options.formatFileName(newName);\n                this._parent.prototype.setName.apply(this, arguments);\n                this._templating.updateFilename(id, formattedFilename);\n            },\n            pauseUpload: function(id) {\n                var paused = this._parent.prototype.pauseUpload.apply(this, arguments);\n                paused && this._templating.uploadPaused(id);\n                return paused;\n            },\n            continueUpload: function(id) {\n                var continued = this._parent.prototype.continueUpload.apply(this, arguments);\n                continued && this._templating.uploadContinued(id);\n                return continued;\n            },\n            getId: function(fileContainerOrChildEl) {\n                return this._templating.getFileId(fileContainerOrChildEl);\n            },\n            getDropTarget: function(fileId) {\n                var file = this.getFile(fileId);\n                return file.qqDropTarget;\n            }\n        };\n        qq.uiPrivateApi = {\n            _getButton: function(buttonId) {\n                var button = this._parent.prototype._getButton.apply(this, arguments);\n                if (!button) {\n                    if (buttonId === this._defaultButtonId) {\n                        button = this._templating.getButton();\n                    }\n                }\n                return button;\n            },\n            _removeFileItem: function(fileId) {\n                this._templating.removeFile(fileId);\n            },\n            _setupClickAndEditEventHandlers: function() {\n                this._fileButtonsClickHandler = qq.FileButtonsClickHandler && this._bindFileButtonsClickEvent();\n                this._focusinEventSupported = !qq.firefox();\n                if (this._isEditFilenameEnabled()) {\n                    this._filenameClickHandler = this._bindFilenameClickEvent();\n                    this._filenameInputFocusInHandler = this._bindFilenameInputFocusInEvent();\n                    this._filenameInputFocusHandler = this._bindFilenameInputFocusEvent();\n                }\n            },\n            _setupDragAndDrop: function() {\n                var self = this, dropZoneElements = this._options.dragAndDrop.extraDropzones, templating = this._templating, defaultDropZone = templating.getDropZone();\n                defaultDropZone && dropZoneElements.push(defaultDropZone);\n                return new qq.DragAndDrop({\n                    dropZoneElements: dropZoneElements,\n                    allowMultipleItems: this._options.multiple,\n                    classes: {\n                        dropActive: this._options.classes.dropActive\n                    },\n                    callbacks: {\n                        processingDroppedFiles: function() {\n                            templating.showDropProcessing();\n                        },\n                        processingDroppedFilesComplete: function(files, targetEl) {\n                            templating.hideDropProcessing();\n                            qq.each(files, function(idx, file) {\n                                file.qqDropTarget = targetEl;\n                            });\n                            if (files.length) {\n                                self.addFiles(files, null, null);\n                            }\n                        },\n                        dropError: function(code, errorData) {\n                            self._itemError(code, errorData);\n                        },\n                        dropLog: function(message, level) {\n                            self.log(message, level);\n                        }\n                    }\n                });\n            },\n            _bindFileButtonsClickEvent: function() {\n                var self = this;\n                return new qq.FileButtonsClickHandler({\n                    templating: this._templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onDeleteFile: function(fileId) {\n                        self.deleteFile(fileId);\n                    },\n                    onCancel: function(fileId) {\n                        self.cancel(fileId);\n                    },\n                    onRetry: function(fileId) {\n                        self.retry(fileId);\n                    },\n                    onPause: function(fileId) {\n                        self.pauseUpload(fileId);\n                    },\n                    onContinue: function(fileId) {\n                        self.continueUpload(fileId);\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    }\n                });\n            },\n            _isEditFilenameEnabled: function() {\n                return this._templating.isEditFilenamePossible() && !this._options.autoUpload && qq.FilenameClickHandler && qq.FilenameInputFocusHandler && qq.FilenameInputFocusHandler;\n            },\n            _filenameEditHandler: function() {\n                var self = this, templating = this._templating;\n                return {\n                    templating: templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onGetUploadStatus: function(fileId) {\n                        return self.getUploads({\n                            id: fileId\n                        }).status;\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    },\n                    onSetName: function(id, newName) {\n                        self.setName(id, newName);\n                    },\n                    onEditingStatusChange: function(id, isEditing) {\n                        var qqInput = qq(templating.getEditInput(id)), qqFileContainer = qq(templating.getFileContainer(id));\n                        if (isEditing) {\n                            qqInput.addClass(\"qq-editing\");\n                            templating.hideFilename(id);\n                            templating.hideEditIcon(id);\n                        } else {\n                            qqInput.removeClass(\"qq-editing\");\n                            templating.showFilename(id);\n                            templating.showEditIcon(id);\n                        }\n                        qqFileContainer.addClass(\"qq-temp\").removeClass(\"qq-temp\");\n                    }\n                };\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                this._parent.prototype._onUploadStatusChange.apply(this, arguments);\n                if (this._isEditFilenameEnabled()) {\n                    if (this._templating.getFileContainer(id) && newStatus !== qq.status.SUBMITTED) {\n                        this._templating.markFilenameEditable(id);\n                        this._templating.hideEditIcon(id);\n                    }\n                }\n                if (oldStatus === qq.status.UPLOAD_RETRYING && newStatus === qq.status.UPLOADING) {\n                    this._templating.hideRetry(id);\n                    this._templating.setStatusText(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.retrying);\n                } else if (newStatus === qq.status.UPLOAD_FAILED) {\n                    this._templating.hidePause(id);\n                }\n            },\n            _bindFilenameInputFocusInEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusInHandler(spec);\n            },\n            _bindFilenameInputFocusEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusHandler(spec);\n            },\n            _bindFilenameClickEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameClickHandler(spec);\n            },\n            _storeForLater: function(id) {\n                this._parent.prototype._storeForLater.apply(this, arguments);\n                this._templating.hideSpinner(id);\n            },\n            _onAllComplete: function(successful, failed) {\n                this._parent.prototype._onAllComplete.apply(this, arguments);\n                this._templating.resetTotalProgress();\n            },\n            _onSubmit: function(id, name) {\n                var file = this.getFile(id);\n                if (file && file.qqPath && this._options.dragAndDrop.reportDirectoryPaths) {\n                    this._paramsStore.addReadOnly(id, {\n                        qqpath: file.qqPath\n                    });\n                }\n                this._parent.prototype._onSubmit.apply(this, arguments);\n                this._addToList(id, name);\n            },\n            _onSubmitted: function(id) {\n                if (this._isEditFilenameEnabled()) {\n                    this._templating.markFilenameEditable(id);\n                    this._templating.showEditIcon(id);\n                    if (!this._focusinEventSupported) {\n                        this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(id));\n                    }\n                }\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._parent.prototype._onProgress.apply(this, arguments);\n                this._templating.updateProgress(id, loaded, total);\n                if (total === 0 || Math.round(loaded / total * 100) === 100) {\n                    this._templating.hideCancel(id);\n                    this._templating.hidePause(id);\n                    this._templating.hideProgress(id);\n                    this._templating.setStatusText(id, this._options.text.waitingForResponse);\n                    this._displayFileSize(id);\n                } else {\n                    this._displayFileSize(id, loaded, total);\n                }\n            },\n            _onTotalProgress: function(loaded, total) {\n                this._parent.prototype._onTotalProgress.apply(this, arguments);\n                this._templating.updateTotalProgress(loaded, total);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                var parentRetVal = this._parent.prototype._onComplete.apply(this, arguments), templating = this._templating, fileContainer = templating.getFileContainer(id), self = this;\n                function completeUpload(result) {\n                    if (!fileContainer) {\n                        return;\n                    }\n                    templating.setStatusText(id);\n                    qq(fileContainer).removeClass(self._classes.retrying);\n                    templating.hideProgress(id);\n                    if (self.getUploads({\n                        id: id\n                    }).status !== qq.status.UPLOAD_FAILED) {\n                        templating.hideCancel(id);\n                    }\n                    templating.hideSpinner(id);\n                    if (result.success) {\n                        self._markFileAsSuccessful(id);\n                    } else {\n                        qq(fileContainer).addClass(self._classes.fail);\n                        templating.showCancel(id);\n                        if (templating.isRetryPossible() && !self._preventRetries[id]) {\n                            qq(fileContainer).addClass(self._classes.retryable);\n                            templating.showRetry(id);\n                        }\n                        self._controlFailureTextDisplay(id, result);\n                    }\n                }\n                if (parentRetVal instanceof qq.Promise) {\n                    parentRetVal.done(function(newResult) {\n                        completeUpload(newResult);\n                    });\n                } else {\n                    completeUpload(result);\n                }\n                return parentRetVal;\n            },\n            _markFileAsSuccessful: function(id) {\n                var templating = this._templating;\n                if (this._isDeletePossible()) {\n                    templating.showDeleteButton(id);\n                }\n                qq(templating.getFileContainer(id)).addClass(this._classes.success);\n                this._maybeUpdateThumbnail(id);\n            },\n            _onUploadPrep: function(id) {\n                this._parent.prototype._onUploadPrep.apply(this, arguments);\n                this._templating.showSpinner(id);\n            },\n            _onUpload: function(id, name) {\n                var parentRetVal = this._parent.prototype._onUpload.apply(this, arguments);\n                this._templating.showSpinner(id);\n                return parentRetVal;\n            },\n            _onUploadChunk: function(id, chunkData) {\n                this._parent.prototype._onUploadChunk.apply(this, arguments);\n                if (chunkData.partIndex > 0 && this._handler.isResumable(id)) {\n                    this._templating.allowPause(id);\n                }\n            },\n            _onCancel: function(id, name) {\n                this._parent.prototype._onCancel.apply(this, arguments);\n                this._removeFileItem(id);\n                if (this._getNotFinished() === 0) {\n                    this._templating.resetTotalProgress();\n                }\n            },\n            _onBeforeAutoRetry: function(id) {\n                var retryNumForDisplay, maxAuto, retryNote;\n                this._parent.prototype._onBeforeAutoRetry.apply(this, arguments);\n                this._showCancelLink(id);\n                if (this._options.retry.showAutoRetryNote) {\n                    retryNumForDisplay = this._autoRetries[id];\n                    maxAuto = this._options.retry.maxAutoAttempts;\n                    retryNote = this._options.retry.autoRetryNote.replace(/\\{retryNum\\}/g, retryNumForDisplay);\n                    retryNote = retryNote.replace(/\\{maxAuto\\}/g, maxAuto);\n                    this._templating.setStatusText(id, retryNote);\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retrying);\n                }\n            },\n            _onBeforeManualRetry: function(id) {\n                if (this._parent.prototype._onBeforeManualRetry.apply(this, arguments)) {\n                    this._templating.resetProgress(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.fail);\n                    this._templating.setStatusText(id);\n                    this._templating.showSpinner(id);\n                    this._showCancelLink(id);\n                    return true;\n                } else {\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retryable);\n                    this._templating.showRetry(id);\n                    return false;\n                }\n            },\n            _onSubmitDelete: function(id) {\n                var onSuccessCallback = qq.bind(this._onSubmitDeleteSuccess, this);\n                this._parent.prototype._onSubmitDelete.call(this, id, onSuccessCallback);\n            },\n            _onSubmitDeleteSuccess: function(id, uuid, additionalMandatedParams) {\n                if (this._options.deleteFile.forceConfirm) {\n                    this._showDeleteConfirm.apply(this, arguments);\n                } else {\n                    this._sendDeleteRequest.apply(this, arguments);\n                }\n            },\n            _onDeleteComplete: function(id, xhr, isError) {\n                this._parent.prototype._onDeleteComplete.apply(this, arguments);\n                this._templating.hideSpinner(id);\n                if (isError) {\n                    this._templating.setStatusText(id, this._options.deleteFile.deletingFailedText);\n                    this._templating.showDeleteButton(id);\n                } else {\n                    this._removeFileItem(id);\n                }\n            },\n            _sendDeleteRequest: function(id, uuid, additionalMandatedParams) {\n                this._templating.hideDeleteButton(id);\n                this._templating.showSpinner(id);\n                this._templating.setStatusText(id, this._options.deleteFile.deletingStatusText);\n                this._deleteHandler.sendDelete.apply(this, arguments);\n            },\n            _showDeleteConfirm: function(id, uuid, mandatedParams) {\n                var fileName = this.getName(id), confirmMessage = this._options.deleteFile.confirmMessage.replace(/\\{filename\\}/g, fileName), uuid = this.getUuid(id), deleteRequestArgs = arguments, self = this, retVal;\n                retVal = this._options.showConfirm(confirmMessage);\n                if (qq.isGenericPromise(retVal)) {\n                    retVal.then(function() {\n                        self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                    });\n                } else if (retVal !== false) {\n                    self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                }\n            },\n            _addToList: function(id, name, canned) {\n                var prependData, prependIndex = 0, dontDisplay = this._handler.isProxied(id) && this._options.scaling.hideScaled, record;\n                if (this._options.display.prependFiles) {\n                    if (this._totalFilesInBatch > 1 && this._filesInBatchAddedToUi > 0) {\n                        prependIndex = this._filesInBatchAddedToUi - 1;\n                    }\n                    prependData = {\n                        index: prependIndex\n                    };\n                }\n                if (!canned) {\n                    if (this._options.disableCancelForFormUploads && !qq.supportedFeatures.ajaxUploading) {\n                        this._templating.disableCancel();\n                    }\n                    if (!this._options.multiple) {\n                        record = this.getUploads({\n                            id: id\n                        });\n                        this._handledProxyGroup = this._handledProxyGroup || record.proxyGroupId;\n                        if (record.proxyGroupId !== this._handledProxyGroup || !record.proxyGroupId) {\n                            this._handler.cancelAll();\n                            this._clearList();\n                            this._handledProxyGroup = null;\n                        }\n                    }\n                }\n                if (canned) {\n                    this._templating.addFileToCache(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.updateThumbnail(id, this._thumbnailUrls[id], true, this._options.thumbnails.customResizer);\n                } else {\n                    this._templating.addFile(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.generatePreview(id, this.getFile(id), this._options.thumbnails.customResizer);\n                }\n                this._filesInBatchAddedToUi += 1;\n                if (canned || this._options.display.fileSizeOnSubmit && qq.supportedFeatures.ajaxUploading) {\n                    this._displayFileSize(id);\n                }\n            },\n            _clearList: function() {\n                this._templating.clearFiles();\n                this.clearStoredFiles();\n            },\n            _displayFileSize: function(id, loadedSize, totalSize) {\n                var size = this.getSize(id), sizeForDisplay = this._formatSize(size);\n                if (size >= 0) {\n                    if (loadedSize !== undefined && totalSize !== undefined) {\n                        sizeForDisplay = this._formatProgress(loadedSize, totalSize);\n                    }\n                    this._templating.updateSize(id, sizeForDisplay);\n                }\n            },\n            _formatProgress: function(uploadedSize, totalSize) {\n                var message = this._options.text.formatProgress;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                r(\"{percent}\", Math.round(uploadedSize / totalSize * 100));\n                r(\"{total_size}\", this._formatSize(totalSize));\n                return message;\n            },\n            _controlFailureTextDisplay: function(id, response) {\n                var mode, responseProperty, failureReason;\n                mode = this._options.failedUploadTextDisplay.mode;\n                responseProperty = this._options.failedUploadTextDisplay.responseProperty;\n                if (mode === \"custom\") {\n                    failureReason = response[responseProperty];\n                    if (!failureReason) {\n                        failureReason = this._options.text.failUpload;\n                    }\n                    this._templating.setStatusText(id, failureReason);\n                    if (this._options.failedUploadTextDisplay.enableTooltip) {\n                        this._showTooltip(id, failureReason);\n                    }\n                } else if (mode === \"default\") {\n                    this._templating.setStatusText(id, this._options.text.failUpload);\n                } else if (mode !== \"none\") {\n                    this.log(\"failedUploadTextDisplay.mode value of '\" + mode + \"' is not valid\", \"warn\");\n                }\n            },\n            _showTooltip: function(id, text) {\n                this._templating.getFileContainer(id).title = text;\n            },\n            _showCancelLink: function(id) {\n                if (!this._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) {\n                    this._templating.showCancel(id);\n                }\n            },\n            _itemError: function(code, name, item) {\n                var message = this._parent.prototype._itemError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _batchError: function(message) {\n                this._parent.prototype._batchError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _setupPastePrompt: function() {\n                var self = this;\n                this._options.callbacks.onPasteReceived = function() {\n                    var message = self._options.paste.namePromptMessage, defaultVal = self._options.paste.defaultName;\n                    return self._options.showPrompt(message, defaultVal);\n                };\n            },\n            _fileOrBlobRejected: function(id, name) {\n                this._totalFilesInBatch -= 1;\n                this._parent.prototype._fileOrBlobRejected.apply(this, arguments);\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                this._totalFilesInBatch = items.length;\n                this._filesInBatchAddedToUi = 0;\n                this._parent.prototype._prepareItemsForUpload.apply(this, arguments);\n            },\n            _maybeUpdateThumbnail: function(fileId) {\n                var thumbnailUrl = this._thumbnailUrls[fileId], fileStatus = this.getUploads({\n                    id: fileId\n                }).status;\n                if (fileStatus !== qq.status.DELETED && (thumbnailUrl || this._options.thumbnails.placeholders.waitUntilResponse || !qq.supportedFeatures.imagePreviews)) {\n                    this._templating.updateThumbnail(fileId, thumbnailUrl, this._options.thumbnails.customResizer);\n                }\n            },\n            _addCannedFile: function(sessionData) {\n                var id = this._parent.prototype._addCannedFile.apply(this, arguments);\n                this._addToList(id, this.getName(id), true);\n                this._templating.hideSpinner(id);\n                this._templating.hideCancel(id);\n                this._markFileAsSuccessful(id);\n                return id;\n            },\n            _setSize: function(id, newSize) {\n                this._parent.prototype._setSize.apply(this, arguments);\n                this._templating.updateSize(id, this._formatSize(newSize));\n            },\n            _sessionRequestComplete: function() {\n                this._templating.addCacheToDom();\n                this._parent.prototype._sessionRequestComplete.apply(this, arguments);\n            }\n        };\n    })();\n    qq.FineUploader = function(o, namespace) {\n        \"use strict\";\n        var self = this;\n        this._parent = namespace ? qq[namespace].FineUploaderBasic : qq.FineUploaderBasic;\n        this._parent.apply(this, arguments);\n        qq.extend(this._options, {\n            element: null,\n            button: null,\n            listElement: null,\n            dragAndDrop: {\n                extraDropzones: [],\n                reportDirectoryPaths: false\n            },\n            text: {\n                formatProgress: \"{percent}% of {total_size}\",\n                failUpload: \"Upload failed\",\n                waitingForResponse: \"Processing...\",\n                paused: \"Paused\"\n            },\n            template: \"qq-template\",\n            classes: {\n                retrying: \"qq-upload-retrying\",\n                retryable: \"qq-upload-retryable\",\n                success: \"qq-upload-success\",\n                fail: \"qq-upload-fail\",\n                editable: \"qq-editable\",\n                hide: \"qq-hide\",\n                dropActive: \"qq-upload-drop-area-active\"\n            },\n            failedUploadTextDisplay: {\n                mode: \"default\",\n                responseProperty: \"error\",\n                enableTooltip: true\n            },\n            messages: {\n                tooManyFilesError: \"You may only drop one file\",\n                unsupportedBrowser: \"Unrecoverable error - this browser does not permit file uploading of any kind.\"\n            },\n            retry: {\n                showAutoRetryNote: true,\n                autoRetryNote: \"Retrying {retryNum}/{maxAuto}...\"\n            },\n            deleteFile: {\n                forceConfirm: false,\n                confirmMessage: \"Are you sure you want to delete {filename}?\",\n                deletingStatusText: \"Deleting...\",\n                deletingFailedText: \"Delete failed\"\n            },\n            display: {\n                fileSizeOnSubmit: false,\n                prependFiles: false\n            },\n            paste: {\n                promptForName: false,\n                namePromptMessage: \"Please name this image\"\n            },\n            thumbnails: {\n                customResizer: null,\n                maxCount: 0,\n                placeholders: {\n                    waitUntilResponse: false,\n                    notAvailablePath: null,\n                    waitingPath: null\n                },\n                timeBetweenThumbs: 750\n            },\n            scaling: {\n                hideScaled: false\n            },\n            showMessage: function(message) {\n                if (self._templating.hasDialog(\"alert\")) {\n                    return self._templating.showDialog(\"alert\", message);\n                } else {\n                    setTimeout(function() {\n                        window.alert(message);\n                    }, 0);\n                }\n            },\n            showConfirm: function(message) {\n                if (self._templating.hasDialog(\"confirm\")) {\n                    return self._templating.showDialog(\"confirm\", message);\n                } else {\n                    return window.confirm(message);\n                }\n            },\n            showPrompt: function(message, defaultValue) {\n                if (self._templating.hasDialog(\"prompt\")) {\n                    return self._templating.showDialog(\"prompt\", message, defaultValue);\n                } else {\n                    return window.prompt(message, defaultValue);\n                }\n            }\n        }, true);\n        qq.extend(this._options, o, true);\n        this._templating = new qq.Templating({\n            log: qq.bind(this.log, this),\n            templateIdOrEl: this._options.template,\n            containerEl: this._options.element,\n            fileContainerEl: this._options.listElement,\n            button: this._options.button,\n            imageGenerator: this._imageGenerator,\n            classes: {\n                hide: this._options.classes.hide,\n                editable: this._options.classes.editable\n            },\n            limits: {\n                maxThumbs: this._options.thumbnails.maxCount,\n                timeBetweenThumbs: this._options.thumbnails.timeBetweenThumbs\n            },\n            placeholders: {\n                waitUntilUpdate: this._options.thumbnails.placeholders.waitUntilResponse,\n                thumbnailNotAvailable: this._options.thumbnails.placeholders.notAvailablePath,\n                waitingForThumbnail: this._options.thumbnails.placeholders.waitingPath\n            },\n            text: this._options.text\n        });\n        if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari);\n        } else if (!qq.supportedFeatures.uploading || this._options.cors.expected && !qq.supportedFeatures.uploadCors) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowser);\n        } else {\n            this._wrapCallbacks();\n            this._templating.render();\n            this._classes = this._options.classes;\n            if (!this._options.button && this._templating.getButton()) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._templating.getButton(),\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._setupClickAndEditEventHandlers();\n            if (qq.DragAndDrop && qq.supportedFeatures.fileDrop) {\n                this._dnd = this._setupDragAndDrop();\n            }\n            if (this._options.paste.targetElement && this._options.paste.promptForName) {\n                if (qq.PasteSupport) {\n                    this._setupPastePrompt();\n                } else {\n                    this.log(\"Paste support module not found.\", \"error\");\n                }\n            }\n            this._totalFilesInBatch = 0;\n            this._filesInBatchAddedToUi = 0;\n        }\n    };\n    qq.extend(qq.FineUploader.prototype, qq.basePublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.basePrivateApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPrivateApi);\n    qq.Templating = function(spec) {\n        \"use strict\";\n        var FILE_ID_ATTR = \"qq-file-id\", FILE_CLASS_PREFIX = \"qq-file-id-\", THUMBNAIL_MAX_SIZE_ATTR = \"qq-max-size\", THUMBNAIL_SERVER_SCALE_ATTR = \"qq-server-scale\", HIDE_DROPZONE_ATTR = \"qq-hide-dropzone\", DROPZPONE_TEXT_ATTR = \"qq-drop-area-text\", IN_PROGRESS_CLASS = \"qq-in-progress\", HIDDEN_FOREVER_CLASS = \"qq-hidden-forever\", fileBatch = {\n            content: document.createDocumentFragment(),\n            map: {}\n        }, isCancelDisabled = false, generatedThumbnails = 0, thumbnailQueueMonitorRunning = false, thumbGenerationQueue = [], thumbnailMaxSize = -1, options = {\n            log: null,\n            limits: {\n                maxThumbs: 0,\n                timeBetweenThumbs: 750\n            },\n            templateIdOrEl: \"qq-template\",\n            containerEl: null,\n            fileContainerEl: null,\n            button: null,\n            imageGenerator: null,\n            classes: {\n                hide: \"qq-hide\",\n                editable: \"qq-editable\"\n            },\n            placeholders: {\n                waitUntilUpdate: false,\n                thumbnailNotAvailable: null,\n                waitingForThumbnail: null\n            },\n            text: {\n                paused: \"Paused\"\n            }\n        }, selectorClasses = {\n            button: \"qq-upload-button-selector\",\n            alertDialog: \"qq-alert-dialog-selector\",\n            dialogCancelButton: \"qq-cancel-button-selector\",\n            confirmDialog: \"qq-confirm-dialog-selector\",\n            dialogMessage: \"qq-dialog-message-selector\",\n            dialogOkButton: \"qq-ok-button-selector\",\n            promptDialog: \"qq-prompt-dialog-selector\",\n            uploader: \"qq-uploader-selector\",\n            drop: \"qq-upload-drop-area-selector\",\n            list: \"qq-upload-list-selector\",\n            progressBarContainer: \"qq-progress-bar-container-selector\",\n            progressBar: \"qq-progress-bar-selector\",\n            totalProgressBarContainer: \"qq-total-progress-bar-container-selector\",\n            totalProgressBar: \"qq-total-progress-bar-selector\",\n            file: \"qq-upload-file-selector\",\n            spinner: \"qq-upload-spinner-selector\",\n            size: \"qq-upload-size-selector\",\n            cancel: \"qq-upload-cancel-selector\",\n            pause: \"qq-upload-pause-selector\",\n            continueButton: \"qq-upload-continue-selector\",\n            deleteButton: \"qq-upload-delete-selector\",\n            retry: \"qq-upload-retry-selector\",\n            statusText: \"qq-upload-status-text-selector\",\n            editFilenameInput: \"qq-edit-filename-selector\",\n            editNameIcon: \"qq-edit-filename-icon-selector\",\n            dropText: \"qq-upload-drop-area-text-selector\",\n            dropProcessing: \"qq-drop-processing-selector\",\n            dropProcessingSpinner: \"qq-drop-processing-spinner-selector\",\n            thumbnail: \"qq-thumbnail-selector\"\n        }, previewGeneration = {}, cachedThumbnailNotAvailableImg = new qq.Promise(), cachedWaitingForThumbnailImg = new qq.Promise(), log, isEditElementsExist, isRetryElementExist, templateDom, container, fileList, showThumbnails, serverScale, cacheThumbnailPlaceholders = function() {\n            var notAvailableUrl = options.placeholders.thumbnailNotAvailable, waitingUrl = options.placeholders.waitingForThumbnail, spec = {\n                maxSize: thumbnailMaxSize,\n                scale: serverScale\n            };\n            if (showThumbnails) {\n                if (notAvailableUrl) {\n                    options.imageGenerator.generate(notAvailableUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedThumbnailNotAvailableImg.success(updatedImg);\n                    }, function() {\n                        cachedThumbnailNotAvailableImg.failure();\n                        log(\"Problem loading 'not available' placeholder image at \" + notAvailableUrl, \"error\");\n                    });\n                } else {\n                    cachedThumbnailNotAvailableImg.failure();\n                }\n                if (waitingUrl) {\n                    options.imageGenerator.generate(waitingUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedWaitingForThumbnailImg.success(updatedImg);\n                    }, function() {\n                        cachedWaitingForThumbnailImg.failure();\n                        log(\"Problem loading 'waiting for thumbnail' placeholder image at \" + waitingUrl, \"error\");\n                    });\n                } else {\n                    cachedWaitingForThumbnailImg.failure();\n                }\n            }\n        }, displayWaitingImg = function(thumbnail) {\n            var waitingImgPlacement = new qq.Promise();\n            cachedWaitingForThumbnailImg.then(function(img) {\n                maybeScalePlaceholderViaCss(img, thumbnail);\n                if (!thumbnail.src) {\n                    thumbnail.src = img.src;\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        show(thumbnail);\n                        waitingImgPlacement.success();\n                    };\n                } else {\n                    waitingImgPlacement.success();\n                }\n            }, function() {\n                hide(thumbnail);\n                waitingImgPlacement.success();\n            });\n            return waitingImgPlacement;\n        }, generateNewPreview = function(id, blob, spec) {\n            var thumbnail = getThumbnail(id);\n            log(\"Generating new thumbnail for \" + id);\n            blob.qqThumbnailId = id;\n            return options.imageGenerator.generate(blob, thumbnail, spec).then(function() {\n                generatedThumbnails++;\n                show(thumbnail);\n                previewGeneration[id].success();\n            }, function() {\n                previewGeneration[id].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                }\n            });\n        }, generateNextQueuedPreview = function() {\n            if (thumbGenerationQueue.length) {\n                thumbnailQueueMonitorRunning = true;\n                var queuedThumbRequest = thumbGenerationQueue.shift();\n                if (queuedThumbRequest.update) {\n                    processUpdateQueuedPreviewRequest(queuedThumbRequest);\n                } else {\n                    processNewQueuedPreviewRequest(queuedThumbRequest);\n                }\n            } else {\n                thumbnailQueueMonitorRunning = false;\n            }\n        }, getCancel = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.cancel);\n        }, getContinue = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.continueButton);\n        }, getDialog = function(type) {\n            return getTemplateEl(container, selectorClasses[type + \"Dialog\"]);\n        }, getDelete = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.deleteButton);\n        }, getDropProcessing = function() {\n            return getTemplateEl(container, selectorClasses.dropProcessing);\n        }, getEditIcon = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.editNameIcon);\n        }, getFile = function(id) {\n            return fileBatch.map[id] || qq(fileList).getFirstByClass(FILE_CLASS_PREFIX + id);\n        }, getFilename = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.file);\n        }, getPause = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.pause);\n        }, getProgress = function(id) {\n            if (id == null) {\n                return getTemplateEl(container, selectorClasses.totalProgressBarContainer) || getTemplateEl(container, selectorClasses.totalProgressBar);\n            }\n            return getTemplateEl(getFile(id), selectorClasses.progressBarContainer) || getTemplateEl(getFile(id), selectorClasses.progressBar);\n        }, getRetry = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.retry);\n        }, getSize = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.size);\n        }, getSpinner = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.spinner);\n        }, getTemplateEl = function(context, cssClass) {\n            return context && qq(context).getFirstByClass(cssClass);\n        }, getThumbnail = function(id) {\n            return showThumbnails && getTemplateEl(getFile(id), selectorClasses.thumbnail);\n        }, hide = function(el) {\n            el && qq(el).addClass(options.classes.hide);\n        }, maybeScalePlaceholderViaCss = function(placeholder, thumbnail) {\n            var maxWidth = placeholder.style.maxWidth, maxHeight = placeholder.style.maxHeight;\n            if (maxHeight && maxWidth && !thumbnail.style.maxWidth && !thumbnail.style.maxHeight) {\n                qq(thumbnail).css({\n                    maxWidth: maxWidth,\n                    maxHeight: maxHeight\n                });\n            }\n        }, maybeSetDisplayNotAvailableImg = function(id, thumbnail) {\n            var previewing = previewGeneration[id] || new qq.Promise().failure(), notAvailableImgPlacement = new qq.Promise();\n            cachedThumbnailNotAvailableImg.then(function(img) {\n                previewing.then(function() {\n                    notAvailableImgPlacement.success();\n                }, function() {\n                    maybeScalePlaceholderViaCss(img, thumbnail);\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        notAvailableImgPlacement.success();\n                    };\n                    thumbnail.src = img.src;\n                    show(thumbnail);\n                });\n            });\n            return notAvailableImgPlacement;\n        }, parseAndGetTemplate = function() {\n            var scriptEl, scriptHtml, fileListNode, tempTemplateEl, fileListEl, defaultButton, dropArea, thumbnail, dropProcessing, dropTextEl, uploaderEl;\n            log(\"Parsing template\");\n            if (options.templateIdOrEl == null) {\n                throw new Error(\"You MUST specify either a template element or ID!\");\n            }\n            if (qq.isString(options.templateIdOrEl)) {\n                scriptEl = document.getElementById(options.templateIdOrEl);\n                if (scriptEl === null) {\n                    throw new Error(qq.format(\"Cannot find template script at ID '{}'!\", options.templateIdOrEl));\n                }\n                scriptHtml = scriptEl.innerHTML;\n            } else {\n                if (options.templateIdOrEl.innerHTML === undefined) {\n                    throw new Error(\"You have specified an invalid value for the template option!  \" + \"It must be an ID or an Element.\");\n                }\n                scriptHtml = options.templateIdOrEl.innerHTML;\n            }\n            scriptHtml = qq.trimStr(scriptHtml);\n            tempTemplateEl = document.createElement(\"div\");\n            tempTemplateEl.appendChild(qq.toElement(scriptHtml));\n            uploaderEl = qq(tempTemplateEl).getFirstByClass(selectorClasses.uploader);\n            if (options.button) {\n                defaultButton = qq(tempTemplateEl).getFirstByClass(selectorClasses.button);\n                if (defaultButton) {\n                    qq(defaultButton).remove();\n                }\n            }\n            if (!qq.DragAndDrop || !qq.supportedFeatures.fileDrop) {\n                dropProcessing = qq(tempTemplateEl).getFirstByClass(selectorClasses.dropProcessing);\n                if (dropProcessing) {\n                    qq(dropProcessing).remove();\n                }\n            }\n            dropArea = qq(tempTemplateEl).getFirstByClass(selectorClasses.drop);\n            if (dropArea && !qq.DragAndDrop) {\n                log(\"DnD module unavailable.\", \"info\");\n                qq(dropArea).remove();\n            }\n            if (!qq.supportedFeatures.fileDrop) {\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (dropArea && qq(dropArea).hasAttribute(HIDE_DROPZONE_ATTR)) {\n                    qq(dropArea).css({\n                        display: \"none\"\n                    });\n                }\n            } else if (qq(uploaderEl).hasAttribute(DROPZPONE_TEXT_ATTR) && dropArea) {\n                dropTextEl = qq(dropArea).getFirstByClass(selectorClasses.dropText);\n                dropTextEl && qq(dropTextEl).remove();\n            }\n            thumbnail = qq(tempTemplateEl).getFirstByClass(selectorClasses.thumbnail);\n            if (!showThumbnails) {\n                thumbnail && qq(thumbnail).remove();\n            } else if (thumbnail) {\n                thumbnailMaxSize = parseInt(thumbnail.getAttribute(THUMBNAIL_MAX_SIZE_ATTR));\n                thumbnailMaxSize = thumbnailMaxSize > 0 ? thumbnailMaxSize : null;\n                serverScale = qq(thumbnail).hasAttribute(THUMBNAIL_SERVER_SCALE_ATTR);\n            }\n            showThumbnails = showThumbnails && thumbnail;\n            isEditElementsExist = qq(tempTemplateEl).getByClass(selectorClasses.editFilenameInput).length > 0;\n            isRetryElementExist = qq(tempTemplateEl).getByClass(selectorClasses.retry).length > 0;\n            fileListNode = qq(tempTemplateEl).getFirstByClass(selectorClasses.list);\n            if (fileListNode == null) {\n                throw new Error(\"Could not find the file list container in the template!\");\n            }\n            fileListEl = fileListNode.children[0].cloneNode(true);\n            fileListNode.innerHTML = \"\";\n            if (tempTemplateEl.getElementsByTagName(\"DIALOG\").length) {\n                document.createElement(\"dialog\");\n            }\n            log(\"Template parsing complete\");\n            return {\n                template: tempTemplateEl,\n                fileTemplate: fileListEl\n            };\n        }, prependFile = function(el, index, fileList) {\n            var parentEl = fileList, beforeEl = parentEl.firstChild;\n            if (index > 0) {\n                beforeEl = qq(parentEl).children()[index].nextSibling;\n            }\n            parentEl.insertBefore(el, beforeEl);\n        }, processNewQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, optFileOrBlob = queuedThumbRequest.optFileOrBlob, relatedThumbnailId = optFileOrBlob && optFileOrBlob.qqThumbnailId, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                maxSize: thumbnailMaxSize,\n                orient: true,\n                scale: true\n            };\n            if (qq.supportedFeatures.imagePreviews) {\n                if (thumbnail) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        displayWaitingImg(thumbnail).done(function() {\n                            previewGeneration[id] = new qq.Promise();\n                            previewGeneration[id].done(function() {\n                                setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                            });\n                            if (relatedThumbnailId != null) {\n                                useCachedPreview(id, relatedThumbnailId);\n                            } else {\n                                generateNewPreview(id, optFileOrBlob, spec);\n                            }\n                        });\n                    }\n                } else {\n                    generateNextQueuedPreview();\n                }\n            } else if (thumbnail) {\n                displayWaitingImg(thumbnail);\n                generateNextQueuedPreview();\n            }\n        }, processUpdateQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, thumbnailUrl = queuedThumbRequest.thumbnailUrl, showWaitingImg = queuedThumbRequest.showWaitingImg, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                scale: serverScale,\n                maxSize: thumbnailMaxSize\n            };\n            if (thumbnail) {\n                if (thumbnailUrl) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        if (showWaitingImg) {\n                            displayWaitingImg(thumbnail);\n                        }\n                        return options.imageGenerator.generate(thumbnailUrl, thumbnail, spec).then(function() {\n                            show(thumbnail);\n                            generatedThumbnails++;\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        }, function() {\n                            maybeSetDisplayNotAvailableImg(id, thumbnail);\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        });\n                    }\n                } else {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                    generateNextQueuedPreview();\n                }\n            }\n        }, setProgressBarWidth = function(id, percent) {\n            var bar = getProgress(id), progressBarSelector = id == null ? selectorClasses.totalProgressBar : selectorClasses.progressBar;\n            if (bar && !qq(bar).hasClass(progressBarSelector)) {\n                bar = qq(bar).getFirstByClass(progressBarSelector);\n            }\n            if (bar) {\n                qq(bar).css({\n                    width: percent + \"%\"\n                });\n                bar.setAttribute(\"aria-valuenow\", percent);\n            }\n        }, show = function(el) {\n            el && qq(el).removeClass(options.classes.hide);\n        }, useCachedPreview = function(targetThumbnailId, cachedThumbnailId) {\n            var targetThumbnail = getThumbnail(targetThumbnailId), cachedThumbnail = getThumbnail(cachedThumbnailId);\n            log(qq.format(\"ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.\", targetThumbnailId, cachedThumbnailId, cachedThumbnailId));\n            previewGeneration[cachedThumbnailId].then(function() {\n                generatedThumbnails++;\n                previewGeneration[targetThumbnailId].success();\n                log(qq.format(\"Now using previously generated thumbnail created for ID {} on ID {}.\", cachedThumbnailId, targetThumbnailId));\n                targetThumbnail.src = cachedThumbnail.src;\n                show(targetThumbnail);\n            }, function() {\n                previewGeneration[targetThumbnailId].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(targetThumbnailId, targetThumbnail);\n                }\n            });\n        };\n        qq.extend(options, spec);\n        log = options.log;\n        if (!qq.supportedFeatures.imagePreviews) {\n            options.limits.timeBetweenThumbs = 0;\n            options.limits.maxThumbs = 0;\n        }\n        container = options.containerEl;\n        showThumbnails = options.imageGenerator !== undefined;\n        templateDom = parseAndGetTemplate();\n        cacheThumbnailPlaceholders();\n        qq.extend(this, {\n            render: function() {\n                log(\"Rendering template in DOM.\");\n                generatedThumbnails = 0;\n                container.appendChild(templateDom.template.cloneNode(true));\n                hide(getDropProcessing());\n                this.hideTotalProgress();\n                fileList = options.fileContainerEl || getTemplateEl(container, selectorClasses.list);\n                log(\"Template rendering complete\");\n            },\n            renderFailure: function(message) {\n                var cantRenderEl = qq.toElement(message);\n                container.innerHTML = \"\";\n                container.appendChild(cantRenderEl);\n            },\n            reset: function() {\n                container.innerHTML = \"\";\n                this.render();\n            },\n            clearFiles: function() {\n                fileList.innerHTML = \"\";\n            },\n            disableCancel: function() {\n                isCancelDisabled = true;\n            },\n            addFile: function(id, name, prependInfo, hideForever, batch) {\n                var fileEl = templateDom.fileTemplate.cloneNode(true), fileNameEl = getTemplateEl(fileEl, selectorClasses.file), uploaderEl = getTemplateEl(container, selectorClasses.uploader), fileContainer = batch ? fileBatch.content : fileList, thumb;\n                if (batch) {\n                    fileBatch.map[id] = fileEl;\n                }\n                qq(fileEl).addClass(FILE_CLASS_PREFIX + id);\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (fileNameEl) {\n                    qq(fileNameEl).setText(name);\n                    fileNameEl.setAttribute(\"title\", name);\n                }\n                fileEl.setAttribute(FILE_ID_ATTR, id);\n                if (prependInfo) {\n                    prependFile(fileEl, prependInfo.index, fileContainer);\n                } else {\n                    fileContainer.appendChild(fileEl);\n                }\n                if (hideForever) {\n                    fileEl.style.display = \"none\";\n                    qq(fileEl).addClass(HIDDEN_FOREVER_CLASS);\n                } else {\n                    hide(getProgress(id));\n                    hide(getSize(id));\n                    hide(getDelete(id));\n                    hide(getRetry(id));\n                    hide(getPause(id));\n                    hide(getContinue(id));\n                    if (isCancelDisabled) {\n                        this.hideCancel(id);\n                    }\n                    thumb = getThumbnail(id);\n                    if (thumb && !thumb.src) {\n                        cachedWaitingForThumbnailImg.then(function(waitingImg) {\n                            thumb.src = waitingImg.src;\n                            if (waitingImg.style.maxHeight && waitingImg.style.maxWidth) {\n                                qq(thumb).css({\n                                    maxHeight: waitingImg.style.maxHeight,\n                                    maxWidth: waitingImg.style.maxWidth\n                                });\n                            }\n                            show(thumb);\n                        });\n                    }\n                }\n            },\n            addFileToCache: function(id, name, prependInfo, hideForever) {\n                this.addFile(id, name, prependInfo, hideForever, true);\n            },\n            addCacheToDom: function() {\n                fileList.appendChild(fileBatch.content);\n                fileBatch.content = document.createDocumentFragment();\n                fileBatch.map = {};\n            },\n            removeFile: function(id) {\n                qq(getFile(id)).remove();\n            },\n            getFileId: function(el) {\n                var currentNode = el;\n                if (currentNode) {\n                    while (currentNode.getAttribute(FILE_ID_ATTR) == null) {\n                        currentNode = currentNode.parentNode;\n                    }\n                    return parseInt(currentNode.getAttribute(FILE_ID_ATTR));\n                }\n            },\n            getFileList: function() {\n                return fileList;\n            },\n            markFilenameEditable: function(id) {\n                var filename = getFilename(id);\n                filename && qq(filename).addClass(options.classes.editable);\n            },\n            updateFilename: function(id, name) {\n                var filenameEl = getFilename(id);\n                if (filenameEl) {\n                    qq(filenameEl).setText(name);\n                    filenameEl.setAttribute(\"title\", name);\n                }\n            },\n            hideFilename: function(id) {\n                hide(getFilename(id));\n            },\n            showFilename: function(id) {\n                show(getFilename(id));\n            },\n            isFileName: function(el) {\n                return qq(el).hasClass(selectorClasses.file);\n            },\n            getButton: function() {\n                return options.button || getTemplateEl(container, selectorClasses.button);\n            },\n            hideDropProcessing: function() {\n                hide(getDropProcessing());\n            },\n            showDropProcessing: function() {\n                show(getDropProcessing());\n            },\n            getDropZone: function() {\n                return getTemplateEl(container, selectorClasses.drop);\n            },\n            isEditFilenamePossible: function() {\n                return isEditElementsExist;\n            },\n            hideRetry: function(id) {\n                hide(getRetry(id));\n            },\n            isRetryPossible: function() {\n                return isRetryElementExist;\n            },\n            showRetry: function(id) {\n                show(getRetry(id));\n            },\n            getFileContainer: function(id) {\n                return getFile(id);\n            },\n            showEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).addClass(options.classes.editable);\n            },\n            isHiddenForever: function(id) {\n                return qq(getFile(id)).hasClass(HIDDEN_FOREVER_CLASS);\n            },\n            hideEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).removeClass(options.classes.editable);\n            },\n            isEditIcon: function(el) {\n                return qq(el).hasClass(selectorClasses.editNameIcon, true);\n            },\n            getEditInput: function(id) {\n                return getTemplateEl(getFile(id), selectorClasses.editFilenameInput);\n            },\n            isEditInput: function(el) {\n                return qq(el).hasClass(selectorClasses.editFilenameInput, true);\n            },\n            updateProgress: function(id, loaded, total) {\n                var bar = getProgress(id), percent;\n                if (bar && total > 0) {\n                    percent = Math.round(loaded / total * 100);\n                    if (percent === 100) {\n                        hide(bar);\n                    } else {\n                        show(bar);\n                    }\n                    setProgressBarWidth(id, percent);\n                }\n            },\n            updateTotalProgress: function(loaded, total) {\n                this.updateProgress(null, loaded, total);\n            },\n            hideProgress: function(id) {\n                var bar = getProgress(id);\n                bar && hide(bar);\n            },\n            hideTotalProgress: function() {\n                this.hideProgress();\n            },\n            resetProgress: function(id) {\n                setProgressBarWidth(id, 0);\n                this.hideTotalProgress(id);\n            },\n            resetTotalProgress: function() {\n                this.resetProgress();\n            },\n            showCancel: function(id) {\n                if (!isCancelDisabled) {\n                    var cancel = getCancel(id);\n                    cancel && qq(cancel).removeClass(options.classes.hide);\n                }\n            },\n            hideCancel: function(id) {\n                hide(getCancel(id));\n            },\n            isCancel: function(el) {\n                return qq(el).hasClass(selectorClasses.cancel, true);\n            },\n            allowPause: function(id) {\n                show(getPause(id));\n                hide(getContinue(id));\n            },\n            uploadPaused: function(id) {\n                this.setStatusText(id, options.text.paused);\n                this.allowContinueButton(id);\n                hide(getSpinner(id));\n            },\n            hidePause: function(id) {\n                hide(getPause(id));\n            },\n            isPause: function(el) {\n                return qq(el).hasClass(selectorClasses.pause, true);\n            },\n            isContinueButton: function(el) {\n                return qq(el).hasClass(selectorClasses.continueButton, true);\n            },\n            allowContinueButton: function(id) {\n                show(getContinue(id));\n                hide(getPause(id));\n            },\n            uploadContinued: function(id) {\n                this.setStatusText(id, \"\");\n                this.allowPause(id);\n                show(getSpinner(id));\n            },\n            showDeleteButton: function(id) {\n                show(getDelete(id));\n            },\n            hideDeleteButton: function(id) {\n                hide(getDelete(id));\n            },\n            isDeleteButton: function(el) {\n                return qq(el).hasClass(selectorClasses.deleteButton, true);\n            },\n            isRetry: function(el) {\n                return qq(el).hasClass(selectorClasses.retry, true);\n            },\n            updateSize: function(id, text) {\n                var size = getSize(id);\n                if (size) {\n                    show(size);\n                    qq(size).setText(text);\n                }\n            },\n            setStatusText: function(id, text) {\n                var textEl = getTemplateEl(getFile(id), selectorClasses.statusText);\n                if (textEl) {\n                    if (text == null) {\n                        qq(textEl).clearText();\n                    } else {\n                        qq(textEl).setText(text);\n                    }\n                }\n            },\n            hideSpinner: function(id) {\n                qq(getFile(id)).removeClass(IN_PROGRESS_CLASS);\n                hide(getSpinner(id));\n            },\n            showSpinner: function(id) {\n                qq(getFile(id)).addClass(IN_PROGRESS_CLASS);\n                show(getSpinner(id));\n            },\n            generatePreview: function(id, optFileOrBlob, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        id: id,\n                        customResizeFunction: customResizeFunction,\n                        optFileOrBlob: optFileOrBlob\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            updateThumbnail: function(id, thumbnailUrl, showWaitingImg, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        customResizeFunction: customResizeFunction,\n                        update: true,\n                        id: id,\n                        thumbnailUrl: thumbnailUrl,\n                        showWaitingImg: showWaitingImg\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            hasDialog: function(type) {\n                return qq.supportedFeatures.dialogElement && !!getDialog(type);\n            },\n            showDialog: function(type, message, defaultValue) {\n                var dialog = getDialog(type), messageEl = getTemplateEl(dialog, selectorClasses.dialogMessage), inputEl = dialog.getElementsByTagName(\"INPUT\")[0], cancelBtn = getTemplateEl(dialog, selectorClasses.dialogCancelButton), okBtn = getTemplateEl(dialog, selectorClasses.dialogOkButton), promise = new qq.Promise(), closeHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    okBtn && okBtn.removeEventListener(\"click\", okClickHandler);\n                    promise.failure();\n                }, cancelClickHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    dialog.close();\n                }, okClickHandler = function() {\n                    dialog.removeEventListener(\"close\", closeHandler);\n                    okBtn.removeEventListener(\"click\", okClickHandler);\n                    dialog.close();\n                    promise.success(inputEl && inputEl.value);\n                };\n                dialog.addEventListener(\"close\", closeHandler);\n                cancelBtn.addEventListener(\"click\", cancelClickHandler);\n                okBtn && okBtn.addEventListener(\"click\", okClickHandler);\n                if (inputEl) {\n                    inputEl.value = defaultValue;\n                }\n                messageEl.textContent = message;\n                dialog.showModal();\n                return promise;\n            }\n        });\n    };\n    qq.UiEventHandler = function(s, protectedApi) {\n        \"use strict\";\n        var disposer = new qq.DisposeSupport(), spec = {\n            eventType: \"click\",\n            attachTo: null,\n            onHandled: function(target, event) {}\n        };\n        qq.extend(this, {\n            addHandler: function(element) {\n                addHandler(element);\n            },\n            dispose: function() {\n                disposer.dispose();\n            }\n        });\n        function addHandler(element) {\n            disposer.attach(element, spec.eventType, function(event) {\n                event = event || window.event;\n                var target = event.target || event.srcElement;\n                spec.onHandled(target, event);\n            });\n        }\n        qq.extend(protectedApi, {\n            getFileIdFromItem: function(item) {\n                return item.qqFileId;\n            },\n            getDisposeSupport: function() {\n                return disposer;\n            }\n        });\n        qq.extend(spec, s);\n        if (spec.attachTo) {\n            addHandler(spec.attachTo);\n        }\n    };\n    qq.FileButtonsClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onDeleteFile: function(fileId) {},\n            onCancel: function(fileId) {},\n            onRetry: function(fileId) {},\n            onPause: function(fileId) {},\n            onContinue: function(fileId) {},\n            onGetName: function(fileId) {}\n        }, buttonHandlers = {\n            cancel: function(id) {\n                spec.onCancel(id);\n            },\n            retry: function(id) {\n                spec.onRetry(id);\n            },\n            deleteButton: function(id) {\n                spec.onDeleteFile(id);\n            },\n            pause: function(id) {\n                spec.onPause(id);\n            },\n            continueButton: function(id) {\n                spec.onContinue(id);\n            }\n        };\n        function examineEvent(target, event) {\n            qq.each(buttonHandlers, function(buttonType, handler) {\n                var firstLetterCapButtonType = buttonType.charAt(0).toUpperCase() + buttonType.slice(1), fileId;\n                if (spec.templating[\"is\" + firstLetterCapButtonType](target)) {\n                    fileId = spec.templating.getFileId(target);\n                    qq.preventDefault(event);\n                    spec.log(qq.format(\"Detected valid file button click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    handler(fileId);\n                    return false;\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            classes: {\n                file: \"qq-upload-file\",\n                editNameIcon: \"qq-edit-filename-icon\"\n            },\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {}\n        };\n        qq.extend(spec, s);\n        function examineEvent(target, event) {\n            if (spec.templating.isFileName(target) || spec.templating.isEditIcon(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    qq.preventDefault(event);\n                    inheritedInternalApi.handleFilenameEdit(fileId, target, true);\n                }\n            }\n        }\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusInHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            onGetUploadStatus: function(fileId) {},\n            log: function(message, lvl) {}\n        };\n        if (!inheritedInternalApi) {\n            inheritedInternalApi = {};\n        }\n        function handleInputFocus(target, event) {\n            if (spec.templating.isEditInput(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename input focus event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    inheritedInternalApi.handleFilenameEdit(fileId, target);\n                }\n            }\n        }\n        spec.eventType = \"focusin\";\n        spec.onHandled = handleInputFocus;\n        qq.extend(spec, s);\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusHandler = function(spec) {\n        \"use strict\";\n        spec.eventType = \"focus\";\n        spec.attachTo = null;\n        qq.extend(this, new qq.FilenameInputFocusInHandler(spec, {}));\n    };\n    qq.FilenameEditHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {},\n            onSetName: function(fileId, newName) {},\n            onEditingStatusChange: function(fileId, isEditing) {}\n        };\n        function getFilenameSansExtension(fileId) {\n            var filenameSansExt = spec.onGetName(fileId), extIdx = filenameSansExt.lastIndexOf(\".\");\n            if (extIdx > 0) {\n                filenameSansExt = filenameSansExt.substr(0, extIdx);\n            }\n            return filenameSansExt;\n        }\n        function getOriginalExtension(fileId) {\n            var origName = spec.onGetName(fileId);\n            return qq.getExtension(origName);\n        }\n        function handleNameUpdate(newFilenameInputEl, fileId) {\n            var newName = newFilenameInputEl.value, origExtension;\n            if (newName !== undefined && qq.trimStr(newName).length > 0) {\n                origExtension = getOriginalExtension(fileId);\n                if (origExtension !== undefined) {\n                    newName = newName + \".\" + origExtension;\n                }\n                spec.onSetName(fileId, newName);\n            }\n            spec.onEditingStatusChange(fileId, false);\n        }\n        function registerInputBlurHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"blur\", function() {\n                handleNameUpdate(inputEl, fileId);\n            });\n        }\n        function registerInputEnterKeyHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"keyup\", function(event) {\n                var code = event.keyCode || event.which;\n                if (code === 13) {\n                    handleNameUpdate(inputEl, fileId);\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n        qq.extend(inheritedInternalApi, {\n            handleFilenameEdit: function(id, target, focusInput) {\n                var newFilenameInputEl = spec.templating.getEditInput(id);\n                spec.onEditingStatusChange(id, true);\n                newFilenameInputEl.value = getFilenameSansExtension(id);\n                if (focusInput) {\n                    newFilenameInputEl.focus();\n                }\n                registerInputBlurHandler(newFilenameInputEl, id);\n                registerInputEnterKeyHandler(newFilenameInputEl, id);\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=fine-uploader.js.map\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(12);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(1)(\"44ff462e\", content, true, {});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar escape = __webpack_require__(13);\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".qq-gallery .qq-btn{float:right;border:none;padding:0;margin:0;box-shadow:none}.qq-gallery .qq-upload-button{display:inline;width:105px;padding:7px 10px;float:left;text-align:center;background:#00abc7;color:#fff;border-radius:2px;border:1px solid #37b7cc;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.37),inset 1px 0 1px hsla(0,0%,100%,.07),0 1px 0 rgba(0,0,0,.36),inset 0 -2px 12px rgba(0,0,0,.08)}.qq-gallery .qq-upload-button-hover{background:#33b6cc}.qq-gallery .qq-upload-button-focus{outline:1px dotted #000}.qq-gallery.qq-uploader{position:relative;min-height:200px;max-height:490px;overflow-y:hidden;width:inherit;border-radius:6px;border:1px dashed #ccc;background-color:#fafafa;padding:20px}.qq-gallery.qq-uploader:before{content:attr(qq-drop-area-text) \\\" \\\";position:absolute;font-size:200%;left:0;width:100%;text-align:center;top:45%;opacity:.25}.qq-gallery .qq-upload-drop-area,.qq-upload-extra-drop-area{position:absolute;top:0;left:0;width:100%;height:100%;min-height:30px;z-index:2;background:#f9f9f9;border-radius:4px;text-align:center}.qq-gallery .qq-upload-drop-area span{display:block;position:absolute;top:50%;width:100%;margin-top:-8px;font-size:16px}.qq-gallery .qq-upload-extra-drop-area{position:relative;margin-top:50px;font-size:16px;padding-top:30px;height:20px;min-height:40px}.qq-gallery .qq-upload-drop-area-active{background:#fdfdfd;border-radius:4px}.qq-gallery .qq-upload-list{margin:0;padding:10px 0 0;list-style:none;max-height:450px;overflow-y:auto;clear:both;box-shadow:none}.qq-gallery .qq-upload-list li{display:inline-block;position:relative;max-width:120px;margin:0 25px 25px 0;padding:0;line-height:16px;font-size:13px;color:#424242;background-color:#fff;border-radius:2px;box-shadow:0 1px 1px 0 rgba(0,0,0,.22);vertical-align:top;height:186px}.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-failed-text,.qq-gallery .qq-upload-pause,.qq-gallery .qq-upload-retry,.qq-gallery .qq-upload-size,.qq-gallery .qq-upload-spinner{display:inline}.qq-gallery .qq-upload-continue:hover,.qq-gallery .qq-upload-delete:hover,.qq-gallery .qq-upload-pause:hover,.qq-gallery .qq-upload-retry:hover{background-color:transparent}.qq-gallery .qq-upload-cancel,.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-pause{cursor:pointer}.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-pause{border:none;background:0 0;color:#00a0ba;font-size:12px;padding:0}.qq-gallery .qq-upload-status-text{color:#333;font-size:12px;padding-left:3px;padding-top:2px;width:inherit;display:none;width:108px}.qq-gallery .qq-upload-fail .qq-upload-status-text{text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;display:block}.qq-gallery .qq-upload-retrying .qq-upload-status-text{display:inline-block}.qq-gallery .qq-upload-retrying .qq-progress-bar-container{display:none}.qq-gallery .qq-upload-cancel{background-color:#525252;color:#f7f7f7;font-weight:700;font-family:Arial,Helvetica,sans-serif;border-radius:12px;border:none;height:22px;width:22px;padding:4px;position:absolute;right:-5px;top:-6px;margin:0;line-height:17px}.qq-gallery .qq-upload-cancel:hover{background-color:#525252}.qq-gallery .qq-upload-retry{cursor:pointer;position:absolute;top:30px;left:50%;margin-left:-31px;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.37),inset 1px 0 1px hsla(0,0%,100%,.07),0 4px 4px rgba(0,0,0,.5),inset 0 -2px 12px rgba(0,0,0,.08);padding:3px 4px;border:1px solid #d2ddc7;border-radius:2px;color:inherit;background-color:#ebf6e0;z-index:1}.qq-gallery .qq-upload-retry:hover{background-color:#f7ffec}.qq-gallery .qq-file-info{padding:10px 6px 4px;margin-top:-3px;border-radius:0 0 2px 2px;text-align:left;overflow:hidden}.qq-gallery .qq-file-info .qq-file-name{position:relative}.qq-gallery .qq-upload-file{display:block;margin-right:0;margin-bottom:3px;width:auto;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden}.qq-gallery .qq-upload-spinner{display:inline-block;background:url(\" + escape(__webpack_require__(14)) + \");position:absolute;left:50%;margin-left:-7px;top:53px;width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-drop-processing{display:block}.qq-gallery .qq-drop-processing-spinner{display:inline-block;background:url(\" + escape(__webpack_require__(15)) + \");width:24px;height:24px;vertical-align:text-bottom}.qq-gallery .qq-upload-failed-text{display:none;font-style:italic;font-weight:700}.qq-gallery .qq-upload-failed-icon{display:none;width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-upload-fail .qq-upload-failed-text,.qq-gallery .qq-upload-retrying .qq-upload-failed-text{display:inline}.qq-gallery .qq-upload-list li.qq-upload-success{background-color:#f2f7ed}.qq-gallery .qq-upload-list li.qq-upload-fail{background-color:#f5eded;box-shadow:0 0 1px 0 red;border:0}.qq-gallery .qq-progress-bar{display:block;background:#00abc7;width:0;height:15px;border-radius:6px;margin-bottom:3px}.qq-gallery .qq-total-progress-bar{height:25px;border-radius:9px}.qq-gallery .qq-total-progress-bar-container{margin-left:9px;display:inline;float:right;width:500px}.qq-gallery .qq-upload-size{float:left;font-size:11px;color:#929292;margin-bottom:3px;margin-right:0;display:inline-block}.qq-gallery INPUT.qq-edit-filename{position:absolute;opacity:0;z-index:-1}.qq-gallery .qq-upload-file.qq-editable{cursor:pointer;margin-right:20px}.qq-gallery .qq-edit-filename-icon.qq-editable{display:inline-block;cursor:pointer;position:absolute;right:0;top:0}.qq-gallery INPUT.qq-edit-filename.qq-editing{position:static;height:28px;width:90px;width:-moz-available;padding:0 8px;margin-bottom:3px;border:1px solid #ccc;border-radius:2px;font-size:13px;opacity:1}.qq-gallery .qq-edit-filename-icon{display:none;background:url(\" + escape(__webpack_require__(16)) + \");width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-delete-icon{background:url(\" + escape(__webpack_require__(17)) + \")}.qq-gallery .qq-delete-icon,.qq-gallery .qq-retry-icon{width:15px;height:15px;vertical-align:sub;display:inline-block}.qq-gallery .qq-retry-icon{background:url(\" + escape(__webpack_require__(18)) + \");float:none}.qq-gallery .qq-continue-icon{background:url(\" + escape(__webpack_require__(19)) + \")}.qq-gallery .qq-continue-icon,.qq-gallery .qq-pause-icon{width:15px;height:15px;vertical-align:sub;display:inline-block}.qq-gallery .qq-pause-icon{background:url(\" + escape(__webpack_require__(20)) + \")}.qq-gallery .qq-hide{display:none}.qq-gallery .qq-in-progress .qq-thumbnail-wrapper{opacity:.5}.qq-gallery .qq-thumbnail-wrapper{overflow:hidden;position:relative;height:120px;width:120px}.qq-gallery .qq-thumbnail-selector{border-radius:2px 2px 0 0;bottom:0;top:0;margin:auto;display:block}:root *>.qq-gallery .qq-thumbnail-selector{position:relative;top:50%;transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%)}.qq-gallery.qq-uploader DIALOG{display:none}.qq-gallery.qq-uploader DIALOG[open]{display:block}.qq-gallery.qq-uploader DIALOG .qq-dialog-buttons{text-align:center;padding-top:10px}.qq-gallery.qq-uploader DIALOG .qq-dialog-buttons BUTTON{margin-left:5px;margin-right:5px}.qq-gallery.qq-uploader DIALOG .qq-dialog-message-selector{padding-bottom:10px}.qq-gallery .qq-uploader DIALOG::backdrop{background-color:rgba(0,0,0,.7)}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nmodule.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,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\"\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,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\"\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,R0lGODlhDwAPALMPAHNzc7+/v2ZmZuXl5aWlpU1NTYCAgMzMzJmZmbKysllZWUBAQPLy8tnZ2TMzM////yH5BAEAAA8ALAAAAAAPAA8AAARD8MlJm0g0z+Ic1lITNEv3ZaSXAlpqNgCDll0XtHStyFXe7RpA7cejBBgKXXFy8CAdQA3CxDAsKYLaDSRZAAgDrpgbAQA7\"\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,R0lGODlhDwAPALMMAE1NTY2NjdnZ2b+/v/Ly8llZWaWlpXNzc5mZmczMzGZmZjMzM////wAAAAAAAAAAACH5BAEAAAwALAAAAAAPAA8AAARMkMlpEJoYqa2WL9zFHF5pesCUrGybYAEnbwHWAWiu2EvSMQtFIsjzLYBC4qRjRA53y94v+CxOk1AJ81qNDjoEqlJ7MmUZAot6/WJEAAA7\"\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,R0lGODlhDwAPALMOAGZmZZWVlNvb26CgoFpaWcTEw4mJiefn505OTX19fdDQz/Pz83FxcUJCQf///wAAACH5BAEAAA4ALAAAAAAPAA8AAARa0Mmp6jxTLtN6N0aQCUiDJEPiAdNSJgvlYc7QJJmTMLwiEQ1aLrNosIYSQGOhaDCQEkbD1yBAHVIh9GCSCHgMXEYlchQ7hZYKEUt6GAOpSZAJhEoeQ7tFseQiADs=\"\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,R0lGODlhDwAPAMQQAOfn55WVlImJibi4t6ysrMTEw9vb22ZmZX19faCgoFpaWfPz805OTdDQz3FxcUJCQf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABAALAAAAAAPAA8AAAVaICSORtMsIjCOhPK8jzMw6+K8h4C4bzMiD4VvxAuIGg+GalRwOI0QwYOwqo4OD5S1+tpab0uvSJrwFkaApMFKeEAhgeRgtEi8ziNp0Ml4zasDWDAIa14LJlYhADs=\"\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/gif;base64,R0lGODlhDwAPALMIAOXl5dnZ2b+/v0BAQGZmZpmZmczMzDMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAPAA8AAAQ7EMlJ6xznCBTyAFV2FIghGmFGmhlKieuZjqX8qnU7x/pNswfXBJYL7opCCRGYRCxtE4J0E5ASQJbsJAIAOw==\"\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n\nHolder - client side image placeholders\nVersion 2.9.7+5g5ho\n© 2020 Ivan Malopinsky - https://imsky.co\n\nSite:     http://holderjs.com\nIssues:   https://github.com/imsky/holder/issues\nLicense:  MIT\n\n*/\n(function (window) {\n  if (!window.document) return;\n  var document = window.document;\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n    if (!document.querySelectorAll) {\n      document.querySelectorAll = function (selectors) {\n        var style = document.createElement('style'), elements = [], element;\n        document.documentElement.firstChild.appendChild(style);\n        document._qsa = [];\n\n        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';\n        window.scrollBy(0, 0);\n        style.parentNode.removeChild(style);\n\n        while (document._qsa.length) {\n          element = document._qsa.shift();\n          element.style.removeAttribute('x-qsa');\n          elements.push(element);\n        }\n        document._qsa = null;\n        return elements;\n      };\n    }\n\n    if (!document.querySelector) {\n      document.querySelector = function (selectors) {\n        var elements = document.querySelectorAll(selectors);\n        return (elements.length) ? elements[0] : null;\n      };\n    }\n\n    if (!document.getElementsByClassName) {\n      document.getElementsByClassName = function (classNames) {\n        classNames = String(classNames).replace(/^|\\s+/g, '.');\n        return document.querySelectorAll(classNames);\n      };\n    }\n\n  //https://github.com/inexorabletash/polyfill\n  // ES5 15.2.3.14 Object.keys ( O )\n  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      if (o !== Object(o)) { throw TypeError('Object.keys called on non-object'); }\n      var ret = [], p;\n      for (p in o) {\n        if (Object.prototype.hasOwnProperty.call(o, p)) {\n          ret.push(p);\n        }\n      }\n      return ret;\n    };\n  }\n\n  // ES5 15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )\n  // From https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (fun /*, thisp */) {\n      if (this === void 0 || this === null) { throw TypeError(); }\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\") { throw TypeError(); }\n\n      var thisp = arguments[1], i;\n      for (i = 0; i < len; i++) {\n        if (i in t) {\n          fun.call(thisp, t[i], i, t);\n        }\n      }\n    };\n  }\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n  (function (global) {\n    var B64_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    global.atob = global.atob || function (input) {\n      input = String(input);\n      var position = 0,\n          output = [],\n          buffer = 0, bits = 0, n;\n\n      input = input.replace(/\\s/g, '');\n      if ((input.length % 4) === 0) { input = input.replace(/=+$/, ''); }\n      if ((input.length % 4) === 1) { throw Error('InvalidCharacterError'); }\n      if (/[^+/0-9A-Za-z]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        n = B64_ALPHABET.indexOf(input.charAt(position));\n        buffer = (buffer << 6) | n;\n        bits += 6;\n\n        if (bits === 24) {\n          output.push(String.fromCharCode((buffer >> 16) & 0xFF));\n          output.push(String.fromCharCode((buffer >>  8) & 0xFF));\n          output.push(String.fromCharCode(buffer & 0xFF));\n          bits = 0;\n          buffer = 0;\n        }\n        position += 1;\n      }\n\n      if (bits === 12) {\n        buffer = buffer >> 4;\n        output.push(String.fromCharCode(buffer & 0xFF));\n      } else if (bits === 18) {\n        buffer = buffer >> 2;\n        output.push(String.fromCharCode((buffer >> 8) & 0xFF));\n        output.push(String.fromCharCode(buffer & 0xFF));\n      }\n\n      return output.join('');\n    };\n\n    global.btoa = global.btoa || function (input) {\n      input = String(input);\n      var position = 0,\n          out = [],\n          o1, o2, o3,\n          e1, e2, e3, e4;\n\n      if (/[^\\x00-\\xFF]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        o1 = input.charCodeAt(position++);\n        o2 = input.charCodeAt(position++);\n        o3 = input.charCodeAt(position++);\n\n        // 111111 112222 222233 333333\n        e1 = o1 >> 2;\n        e2 = ((o1 & 0x3) << 4) | (o2 >> 4);\n        e3 = ((o2 & 0xf) << 2) | (o3 >> 6);\n        e4 = o3 & 0x3f;\n\n        if (position === input.length + 2) {\n          e3 = 64; e4 = 64;\n        }\n        else if (position === input.length + 1) {\n          e4 = 64;\n        }\n\n        out.push(B64_ALPHABET.charAt(e1),\n                 B64_ALPHABET.charAt(e2),\n                 B64_ALPHABET.charAt(e3),\n                 B64_ALPHABET.charAt(e4));\n      }\n\n      return out.join('');\n    };\n  }(window));\n\n  //https://gist.github.com/jimeh/332357\n  if (!Object.prototype.hasOwnProperty){\n      /*jshint -W001, -W103 */\n      Object.prototype.hasOwnProperty = function(prop) {\n      var proto = this.__proto__ || this.constructor.prototype;\n      return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);\n    };\n      /*jshint +W001, +W103 */\n  }\n\n  // @license http://opensource.org/licenses/MIT\n  // copyright Paul Irish 2015\n\n\n  // Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill\n  //   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js\n  // as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values\n\n  // if you want values similar to what you'd get with real perf.now, place this towards the head of the page\n  // but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed\n\n\n  (function(){\n\n    if ('performance' in window === false) {\n        window.performance = {};\n    }\n    \n    Date.now = (Date.now || function () {  // thanks IE8\n      return new Date().getTime();\n    });\n\n    if ('now' in window.performance === false){\n      \n      var nowOffset = Date.now();\n      \n      if (performance.timing && performance.timing.navigationStart){\n        nowOffset = performance.timing.navigationStart;\n      }\n\n      window.performance.now = function now(){\n        return Date.now() - nowOffset;\n      };\n    }\n\n  })();\n\n  //requestAnimationFrame polyfill for older Firefox/Chrome versions\n  if (!window.requestAnimationFrame) {\n    if (window.webkitRequestAnimationFrame && window.webkitCancelAnimationFrame) {\n    //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-webkit.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return webkitRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.webkitCancelAnimationFrame;\n    }(window));\n    } else if (window.mozRequestAnimationFrame && window.mozCancelAnimationFrame) {\n      //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-moz.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return mozRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.mozCancelAnimationFrame;\n    }(window));\n    } else {\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return global.setTimeout(callback, 1000 / 60);\n      };\n\n      global.cancelAnimationFrame = global.clearTimeout;\n    })(window);\n    }\n  }\n})(this);\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Holder\"] = factory();\n\telse\n\t\troot[\"Holder\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2020 Ivan Malopinsky - https://imsky.co\n\t*/\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2020 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\t//Libraries and functions\n\tvar onDomReady = __webpack_require__(2);\n\tvar querystring = __webpack_require__(3);\n\n\tvar SceneGraph = __webpack_require__(6);\n\tvar utils = __webpack_require__(7);\n\tvar SVG = __webpack_require__(8);\n\tvar DOM = __webpack_require__(9);\n\tvar Color = __webpack_require__(10);\n\tvar constants = __webpack_require__(11);\n\n\tvar svgRenderer = __webpack_require__(12);\n\tvar sgCanvasRenderer = __webpack_require__(15);\n\n\tvar extend = utils.extend;\n\tvar dimensionCheck = utils.dimensionCheck;\n\n\t//Constants and definitions\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar Holder = {\n\t    version: constants.version,\n\n\t    /**\n\t     * Adds a theme to default settings\n\t     *\n\t     * @param {string} name Theme name\n\t     * @param {Object} theme Theme object, with foreground, background, size, font, and fontweight properties.\n\t     */\n\t    addTheme: function(name, theme) {\n\t        name != null && theme != null && (App.settings.themes[name] = theme);\n\t        delete App.vars.cache.themeKeys;\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Appends a placeholder to an element\n\t     *\n\t     * @param {string} src Placeholder URL string\n\t     * @param el A selector or a reference to a DOM node\n\t     */\n\t    addImage: function(src, el) {\n\t        //todo: use jquery fallback if available for all QSA references\n\t        var nodes = DOM.getNodeArray(el);\n\t        nodes.forEach(function (node) {\n\t            var img = DOM.newEl('img');\n\t            var domProps = {};\n\t            domProps[App.setup.dataAttr] = src;\n\t            DOM.setAttr(img, domProps);\n\t            node.appendChild(img);\n\t        });\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Sets whether or not an image is updated on resize.\n\t     * If an image is set to be updated, it is immediately rendered.\n\t     *\n\t     * @param {Object} el Image DOM element\n\t     * @param {Boolean} value Resizable update flag value\n\t     */\n\t    setResizeUpdate: function(el, value) {\n\t        if (el.holderData) {\n\t            el.holderData.resizeUpdate = !!value;\n\t            if (el.holderData.resizeUpdate) {\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    },\n\n\t    /**\n\t     * Runs Holder with options. By default runs Holder on all images with \"holder.js\" in their source attributes.\n\t     *\n\t     * @param {Object} userOptions Options object, can contain domain, themes, images, and bgnodes properties\n\t     */\n\t    run: function(userOptions) {\n\t        //todo: split processing into separate queues\n\t        userOptions = userOptions || {};\n\t        var engineSettings = {};\n\t        var options = extend(App.settings, userOptions);\n\n\t        App.vars.preempted = true;\n\t        App.vars.dataAttr = options.dataAttr || App.setup.dataAttr;\n\n\t        engineSettings.renderer = options.renderer ? options.renderer : App.setup.renderer;\n\t        if (App.setup.renderers.join(',').indexOf(engineSettings.renderer) === -1) {\n\t            engineSettings.renderer = App.setup.supportsSVG ? 'svg' : (App.setup.supportsCanvas ? 'canvas' : 'html');\n\t        }\n\n\t        var images = DOM.getNodeArray(options.images);\n\t        var bgnodes = DOM.getNodeArray(options.bgnodes);\n\t        var stylenodes = DOM.getNodeArray(options.stylenodes);\n\t        var objects = DOM.getNodeArray(options.objects);\n\n\t        engineSettings.stylesheets = [];\n\t        engineSettings.svgXMLStylesheet = true;\n\t        engineSettings.noFontFallback = !!options.noFontFallback;\n\t        engineSettings.noBackgroundSize = !!options.noBackgroundSize;\n\n\t        stylenodes.forEach(function (styleNode) {\n\t            if (styleNode.attributes.rel && styleNode.attributes.href && styleNode.attributes.rel.value == 'stylesheet') {\n\t                var href = styleNode.attributes.href.value;\n\t                //todo: write isomorphic relative-to-absolute URL function\n\t                var proxyLink = DOM.newEl('a');\n\t                proxyLink.href = href;\n\t                var stylesheetURL = proxyLink.protocol + '//' + proxyLink.host + proxyLink.pathname + proxyLink.search;\n\t                engineSettings.stylesheets.push(stylesheetURL);\n\t            }\n\t        });\n\n\t        bgnodes.forEach(function (bgNode) {\n\t            //Skip processing background nodes if getComputedStyle is unavailable, since only modern browsers would be able to use canvas or SVG to render to background\n\t            if (!global.getComputedStyle) return;\n\t            var backgroundImage = global.getComputedStyle(bgNode, null).getPropertyValue('background-image');\n\t            var dataBackgroundImage = bgNode.getAttribute('data-background-src');\n\t            var rawURL = dataBackgroundImage || backgroundImage;\n\n\t            var holderURL = null;\n\t            var holderString = options.domain + '/';\n\t            var holderStringIndex = rawURL.indexOf(holderString);\n\n\t            if (holderStringIndex === 0) {\n\t                holderURL = rawURL;\n\t            } else if (holderStringIndex === 1 && rawURL[0] === '?') {\n\t                holderURL = rawURL.slice(1);\n\t            } else {\n\t                var fragment = rawURL.substr(holderStringIndex).match(/([^\\\"]*)\"?\\)/);\n\t                if (fragment !== null) {\n\t                    holderURL = fragment[1];\n\t                } else if (rawURL.indexOf('url(') === 0) {\n\t                    throw 'Holder: unable to parse background URL: ' + rawURL;\n\t                }\n\t            }\n\n\t            if (holderURL) {\n\t                var holderFlags = parseURL(holderURL, options);\n\t                if (holderFlags) {\n\t                    prepareDOMElement({\n\t                        mode: 'background',\n\t                        el: bgNode,\n\t                        flags: holderFlags,\n\t                        engineSettings: engineSettings\n\t                    });\n\t                }\n\t            }\n\t        });\n\n\t        objects.forEach(function (object) {\n\t            var objectAttr = {};\n\n\t            try {\n\t                objectAttr.data = object.getAttribute('data');\n\t                objectAttr.dataSrc = object.getAttribute(App.vars.dataAttr);\n\t            } catch (e) {}\n\n\t            var objectHasSrcURL = objectAttr.data != null && objectAttr.data.indexOf(options.domain) === 0;\n\t            var objectHasDataSrcURL = objectAttr.dataSrc != null && objectAttr.dataSrc.indexOf(options.domain) === 0;\n\n\t            if (objectHasSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.data, object);\n\t            } else if (objectHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.dataSrc, object);\n\t            }\n\t        });\n\n\t        images.forEach(function (image) {\n\t            var imageAttr = {};\n\n\t            try {\n\t                imageAttr.src = image.getAttribute('src');\n\t                imageAttr.dataSrc = image.getAttribute(App.vars.dataAttr);\n\t                imageAttr.rendered = image.getAttribute('data-holder-rendered');\n\t            } catch (e) {}\n\n\t            var imageHasSrc = imageAttr.src != null;\n\t            var imageHasDataSrcURL = imageAttr.dataSrc != null && imageAttr.dataSrc.indexOf(options.domain) === 0;\n\t            var imageRendered = imageAttr.rendered != null && imageAttr.rendered == 'true';\n\n\t            if (imageHasSrc) {\n\t                if (imageAttr.src.indexOf(options.domain) === 0) {\n\t                    prepareImageElement(options, engineSettings, imageAttr.src, image);\n\t                } else if (imageHasDataSrcURL) {\n\t                    //Image has a valid data-src and an invalid src\n\t                    if (imageRendered) {\n\t                        //If the placeholder has already been render, re-render it\n\t                        prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t                    } else {\n\t                        //If the placeholder has not been rendered, check if the image exists and render a fallback if it doesn't\n\t                        (function(src, options, engineSettings, dataSrc, image) {\n\t                            utils.imageExists(src, function(exists) {\n\t                                if (!exists) {\n\t                                    prepareImageElement(options, engineSettings, dataSrc, image);\n\t                                }\n\t                            });\n\t                        })(imageAttr.src, options, engineSettings, imageAttr.dataSrc, image);\n\t                    }\n\t                }\n\t            } else if (imageHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t            }\n\t        });\n\n\t        return this;\n\t    }\n\t};\n\n\tvar App = {\n\t    settings: {\n\t        domain: 'holder.js',\n\t        images: 'img',\n\t        objects: 'object',\n\t        bgnodes: 'body .holderjs',\n\t        stylenodes: 'head link.holderjs',\n\t        themes: {\n\t            'gray': {\n\t                bg: '#EEEEEE',\n\t                fg: '#AAAAAA'\n\t            },\n\t            'social': {\n\t                bg: '#3a5a97',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'industrial': {\n\t                bg: '#434A52',\n\t                fg: '#C2F200'\n\t            },\n\t            'sky': {\n\t                bg: '#0D8FDB',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'vine': {\n\t                bg: '#39DBAC',\n\t                fg: '#1E292C'\n\t            },\n\t            'lava': {\n\t                bg: '#F8591A',\n\t                fg: '#1C2846'\n\t            }\n\t        }\n\t    },\n\t    defaults: {\n\t        size: 10,\n\t        units: 'pt',\n\t        scale: 1 / 16\n\t    }\n\t};\n\n\t/**\n\t * Processes provided source attribute and sets up the appropriate rendering workflow\n\t *\n\t * @private\n\t * @param options Instance options from Holder.run\n\t * @param renderSettings Instance configuration\n\t * @param src Image URL\n\t * @param el Image DOM element\n\t */\n\tfunction prepareImageElement(options, engineSettings, src, el) {\n\t    var holderFlags = parseURL(src.substr(src.lastIndexOf(options.domain)), options);\n\t    if (holderFlags) {\n\t        prepareDOMElement({\n\t            mode: null,\n\t            el: el,\n\t            flags: holderFlags,\n\t            engineSettings: engineSettings\n\t        });\n\t    }\n\t}\n\n\t/**\n\t * Processes a Holder URL and extracts configuration from query string\n\t *\n\t * @private\n\t * @param url URL\n\t * @param instanceOptions Instance options from Holder.run\n\t */\n\tfunction parseURL(url, instanceOptions) {\n\t    var holder = {\n\t        theme: extend(App.settings.themes.gray, null),\n\t        stylesheets: instanceOptions.stylesheets,\n\t        instanceOptions: instanceOptions\n\t    };\n\n\t    var firstQuestionMark = url.indexOf('?');\n\t    var parts = [url];\n\n\t    if (firstQuestionMark !== -1) {\n\t        parts = [url.slice(0, firstQuestionMark), url.slice(firstQuestionMark + 1)];\n\t    }\n\n\t    var basics = parts[0].split('/');\n\n\t    holder.holderURL = url;\n\n\t    var dimensions = basics[1];\n\t    var dimensionData = dimensions.match(/([\\d]+p?)x([\\d]+p?)/);\n\n\t    if (!dimensionData) return false;\n\n\t    holder.fluid = dimensions.indexOf('p') !== -1;\n\n\t    holder.dimensions = {\n\t        width: dimensionData[1].replace('p', '%'),\n\t        height: dimensionData[2].replace('p', '%')\n\t    };\n\n\t    if (parts.length === 2) {\n\t        var options = querystring.parse(parts[1]);\n\n\t        // Dimensions\n\n\t        if (utils.truthy(options.ratio)) {\n\t            holder.fluid = true;\n\t            var ratioWidth = parseFloat(holder.dimensions.width.replace('%', ''));\n\t            var ratioHeight = parseFloat(holder.dimensions.height.replace('%', ''));\n\n\t            ratioHeight = Math.floor(100 * (ratioHeight / ratioWidth));\n\t            ratioWidth = 100;\n\n\t            holder.dimensions.width = ratioWidth + '%';\n\t            holder.dimensions.height = ratioHeight + '%';\n\t        }\n\n\t        holder.auto = utils.truthy(options.auto);\n\n\t        // Colors\n\n\t        if (options.bg) {\n\t            holder.theme.bg = utils.parseColor(options.bg);\n\t        }\n\n\t        if (options.fg) {\n\t            holder.theme.fg = utils.parseColor(options.fg);\n\t        }\n\n\t        //todo: add automatic foreground to themes without foreground\n\t        if (options.bg && !options.fg) {\n\t            holder.autoFg = true;\n\t        }\n\n\t        if (options.theme && holder.instanceOptions.themes.hasOwnProperty(options.theme)) {\n\t            holder.theme = extend(holder.instanceOptions.themes[options.theme], null);\n\t        }\n\n\t        // Text\n\n\t        if (options.text) {\n\t            holder.text = options.text;\n\t        }\n\n\t        if (options.textmode) {\n\t            holder.textmode = options.textmode;\n\t        }\n\n\t        if (options.size && parseFloat(options.size)) {\n\t            holder.size = parseFloat(options.size);\n\t        }\n\n\t        if (options.font) {\n\t            holder.font = options.font;\n\t        }\n\n\t        if (options.align) {\n\t            holder.align = options.align;\n\t        }\n\n\t        if (options.lineWrap) {\n\t            holder.lineWrap = options.lineWrap;\n\t        }\n\n\t        holder.nowrap = utils.truthy(options.nowrap);\n\n\t        // Miscellaneous\n\n\t        holder.outline = utils.truthy(options.outline);\n\n\t        if (utils.truthy(options.random)) {\n\t            App.vars.cache.themeKeys = App.vars.cache.themeKeys || Object.keys(holder.instanceOptions.themes);\n\t            var _theme = App.vars.cache.themeKeys[0 | Math.random() * App.vars.cache.themeKeys.length];\n\t            holder.theme = extend(holder.instanceOptions.themes[_theme], null);\n\t        }\n\t    }\n\n\t    return holder;\n\t}\n\n\t/**\n\t * Modifies the DOM to fit placeholders and sets up resizable image callbacks (for fluid and automatically sized placeholders)\n\t *\n\t * @private\n\t * @param settings DOM prep settings\n\t */\n\tfunction prepareDOMElement(prepSettings) {\n\t    var mode = prepSettings.mode;\n\t    var el = prepSettings.el;\n\t    var flags = prepSettings.flags;\n\t    var _engineSettings = prepSettings.engineSettings;\n\t    var dimensions = flags.dimensions,\n\t        theme = flags.theme;\n\t    var dimensionsCaption = dimensions.width + 'x' + dimensions.height;\n\t    mode = mode == null ? (flags.fluid ? 'fluid' : 'image') : mode;\n\t    var holderTemplateRe = /holder_([a-z]+)/g;\n\t    var dimensionsInText = false;\n\n\t    if (flags.text != null) {\n\t        theme.text = flags.text;\n\n\t        //<object> SVG embedding doesn't parse Unicode properly\n\t        if (el.nodeName.toLowerCase() === 'object') {\n\t            var textLines = theme.text.split('\\\\n');\n\t            for (var k = 0; k < textLines.length; k++) {\n\t                textLines[k] = utils.encodeHtmlEntity(textLines[k]);\n\t            }\n\t            theme.text = textLines.join('\\\\n');\n\t        }\n\t    }\n\n\t    if (theme.text) {\n\t        var holderTemplateMatches = theme.text.match(holderTemplateRe);\n\n\t        if (holderTemplateMatches !== null) {\n\t            //todo: optimize template replacement\n\t            holderTemplateMatches.forEach(function (match) {\n\t                if (match === 'holder_dimensions') {\n\t                    theme.text = theme.text.replace(match, dimensionsCaption);\n\t                }\n\t            });\n\t        }\n\t    }\n\n\t    var holderURL = flags.holderURL;\n\t    var engineSettings = extend(_engineSettings, null);\n\n\t    if (flags.font) {\n\t        /*\n\t        If external fonts are used in a <img> placeholder rendered with SVG, Holder falls back to canvas.\n\n\t        This is done because Firefox and Chrome disallow embedded SVGs from referencing external assets.\n\t        The workaround is either to change the placeholder tag from <img> to <object> or to use the canvas renderer.\n\t        */\n\t        theme.font = flags.font;\n\t        if (!engineSettings.noFontFallback && el.nodeName.toLowerCase() === 'img' && App.setup.supportsCanvas && engineSettings.renderer === 'svg') {\n\t            engineSettings = extend(engineSettings, {\n\t                renderer: 'canvas'\n\t            });\n\t        }\n\t    }\n\n\t    //Chrome and Opera require a quick 10ms re-render if web fonts are used with canvas\n\t    if (flags.font && engineSettings.renderer == 'canvas') {\n\t        engineSettings.reRender = true;\n\t    }\n\n\t    if (mode == 'background') {\n\t        if (el.getAttribute('data-background-src') == null) {\n\t            DOM.setAttr(el, {\n\t                'data-background-src': holderURL\n\t            });\n\t        }\n\t    } else {\n\t        var domProps = {};\n\t        domProps[App.vars.dataAttr] = holderURL;\n\t        DOM.setAttr(el, domProps);\n\t    }\n\n\t    flags.theme = theme;\n\n\t    //todo consider using all renderSettings in holderData\n\t    el.holderData = {\n\t        flags: flags,\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image' || mode == 'fluid') {\n\t        DOM.setAttr(el, {\n\t            'alt': theme.text ? (dimensionsInText ? theme.text : theme.text + ' [' + dimensionsCaption + ']') : dimensionsCaption\n\t        });\n\t    }\n\n\t    var renderSettings = {\n\t        mode: mode,\n\t        el: el,\n\t        holderSettings: {\n\t            dimensions: dimensions,\n\t            theme: theme,\n\t            flags: flags\n\t        },\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image') {\n\t        if (!flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            render(renderSettings);\n\n\t            if (flags.textmode == 'exact') {\n\t                el.holderData.resizeUpdate = true;\n\t                App.vars.resizableImages.push(el);\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    } else if (mode == 'background' && engineSettings.renderer != 'html') {\n\t        render(renderSettings);\n\t    } else if (mode == 'fluid') {\n\t        el.holderData.resizeUpdate = true;\n\n\t        if (dimensions.height.slice(-1) == '%') {\n\t            el.style.height = dimensions.height;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\t        if (dimensions.width.slice(-1) == '%') {\n\t            el.style.width = dimensions.width;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t        }\n\t        if (el.style.display == 'inline' || el.style.display === '' || el.style.display == 'none') {\n\t            el.style.display = 'block';\n\t        }\n\n\t        setInitialDimensions(el);\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            App.vars.resizableImages.push(el);\n\t            updateResizableElements(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Core function that takes output from renderers and sets it as the source or background-image of the target element\n\t *\n\t * @private\n\t * @param renderSettings Renderer settings\n\t */\n\tfunction render(renderSettings) {\n\t    var image = null;\n\t    var mode = renderSettings.mode;\n\t    var el = renderSettings.el;\n\t    var holderSettings = renderSettings.holderSettings;\n\t    var engineSettings = renderSettings.engineSettings;\n\n\t    switch (engineSettings.renderer) {\n\t        case 'svg':\n\t            if (!App.setup.supportsSVG) return;\n\t            break;\n\t        case 'canvas':\n\t            if (!App.setup.supportsCanvas) return;\n\t            break;\n\t        default:\n\t            return;\n\t    }\n\n\t    //todo: move generation of scene up to flag generation to reduce extra object creation\n\t    var scene = {\n\t        width: holderSettings.dimensions.width,\n\t        height: holderSettings.dimensions.height,\n\t        theme: holderSettings.theme,\n\t        flags: holderSettings.flags\n\t    };\n\n\t    var sceneGraph = buildSceneGraph(scene);\n\n\t    function getRenderedImage() {\n\t        var image = null;\n\t        switch (engineSettings.renderer) {\n\t            case 'canvas':\n\t                image = sgCanvasRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            case 'svg':\n\t                image = svgRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            default:\n\t                throw 'Holder: invalid renderer: ' + engineSettings.renderer;\n\t        }\n\n\t        return image;\n\t    }\n\n\t    image = getRenderedImage();\n\n\t    if (image == null) {\n\t        throw 'Holder: couldn\\'t render placeholder';\n\t    }\n\n\t    //todo: add <object> canvas rendering\n\t    if (mode == 'background') {\n\t        el.style.backgroundImage = 'url(' + image + ')';\n\n\t        if (!engineSettings.noBackgroundSize) {\n\t            el.style.backgroundSize = scene.width + 'px ' + scene.height + 'px';\n\t        }\n\t    } else {\n\t        if (el.nodeName.toLowerCase() === 'img') {\n\t            DOM.setAttr(el, {\n\t                'src': image\n\t            });\n\t        } else if (el.nodeName.toLowerCase() === 'object') {\n\t            DOM.setAttr(el, {\n\t                'data': image,\n\t                'type': 'image/svg+xml'\n\t            });\n\t        }\n\t        if (engineSettings.reRender) {\n\t            global.setTimeout(function () {\n\t                var image = getRenderedImage();\n\t                if (image == null) {\n\t                    throw 'Holder: couldn\\'t render placeholder';\n\t                }\n\t                //todo: refactor this code into a function\n\t                if (el.nodeName.toLowerCase() === 'img') {\n\t                    DOM.setAttr(el, {\n\t                        'src': image\n\t                    });\n\t                } else if (el.nodeName.toLowerCase() === 'object') {\n\t                    DOM.setAttr(el, {\n\t                        'data': image,\n\t                        'type': 'image/svg+xml'\n\t                    });\n\t                }\n\t            }, 150);\n\t        }\n\t    }\n\t    //todo: account for re-rendering\n\t    DOM.setAttr(el, {\n\t        'data-holder-rendered': true\n\t    });\n\t}\n\n\t/**\n\t * Core function that takes a Holder scene description and builds a scene graph\n\t *\n\t * @private\n\t * @param scene Holder scene object\n\t */\n\t//todo: make this function reusable\n\t//todo: merge app defaults and setup properties into the scene argument\n\tfunction buildSceneGraph(scene) {\n\t    var fontSize = App.defaults.size;\n\t    if (parseFloat(scene.theme.size)) {\n\t        fontSize = scene.theme.size;\n\t    } else if (parseFloat(scene.flags.size)) {\n\t        fontSize = scene.flags.size;\n\t    }\n\n\t    scene.font = {\n\t        family: scene.theme.font ? scene.theme.font : 'Arial, Helvetica, Open Sans, sans-serif',\n\t        size: textSize(scene.width, scene.height, fontSize, App.defaults.scale),\n\t        units: scene.theme.units ? scene.theme.units : App.defaults.units,\n\t        weight: scene.theme.fontweight ? scene.theme.fontweight : 'bold'\n\t    };\n\n\t    scene.text = scene.theme.text || Math.floor(scene.width) + 'x' + Math.floor(scene.height);\n\n\t    scene.noWrap = scene.theme.nowrap || scene.flags.nowrap;\n\n\t    scene.align = scene.theme.align || scene.flags.align || 'center';\n\n\t    switch (scene.flags.textmode) {\n\t        case 'literal':\n\t            scene.text = scene.flags.dimensions.width + 'x' + scene.flags.dimensions.height;\n\t            break;\n\t        case 'exact':\n\t            if (!scene.flags.exactDimensions) break;\n\t            scene.text = Math.floor(scene.flags.exactDimensions.width) + 'x' + Math.floor(scene.flags.exactDimensions.height);\n\t            break;\n\t    }\n\n\t    var lineWrap = scene.flags.lineWrap || App.setup.lineWrapRatio;\n\t    var sceneMargin = scene.width * lineWrap;\n\t    var maxLineWidth = sceneMargin;\n\n\t    var sceneGraph = new SceneGraph({\n\t        width: scene.width,\n\t        height: scene.height\n\t    });\n\n\t    var Shape = sceneGraph.Shape;\n\n\t    var holderBg = new Shape.Rect('holderBg', {\n\t        fill: scene.theme.bg\n\t    });\n\n\t    holderBg.resize(scene.width, scene.height);\n\t    sceneGraph.root.add(holderBg);\n\n\t    if (scene.flags.outline) {\n\t        var outlineColor = new Color(holderBg.properties.fill);\n\t        outlineColor = outlineColor.lighten(outlineColor.lighterThan('7f7f7f') ? -0.1 : 0.1);\n\t        holderBg.properties.outline = {\n\t            fill: outlineColor.toHex(true),\n\t            width: 2\n\t        };\n\t    }\n\n\t    var holderTextColor = scene.theme.fg;\n\n\t    if (scene.flags.autoFg) {\n\t        var holderBgColor = new Color(holderBg.properties.fill);\n\t        var lightColor = new Color('fff');\n\t        var darkColor = new Color('000', {\n\t            'alpha': 0.285714\n\t        });\n\n\t        holderTextColor = holderBgColor.blendAlpha(holderBgColor.lighterThan('7f7f7f') ? darkColor : lightColor).toHex(true);\n\t    }\n\n\t    var holderTextGroup = new Shape.Group('holderTextGroup', {\n\t        text: scene.text,\n\t        align: scene.align,\n\t        font: scene.font,\n\t        fill: holderTextColor\n\t    });\n\n\t    holderTextGroup.moveTo(null, null, 1);\n\t    sceneGraph.root.add(holderTextGroup);\n\n\t    var tpdata = holderTextGroup.textPositionData = stagingRenderer(sceneGraph);\n\t    if (!tpdata) {\n\t        throw 'Holder: staging fallback not supported yet.';\n\t    }\n\t    holderTextGroup.properties.leading = tpdata.boundingBox.height;\n\n\t    var textNode = null;\n\t    var line = null;\n\n\t    function finalizeLine(parent, line, width, height) {\n\t        line.width = width;\n\t        line.height = height;\n\t        parent.width = Math.max(parent.width, line.width);\n\t        parent.height += line.height;\n\t    }\n\n\t    if (tpdata.lineCount > 1) {\n\t        var offsetX = 0;\n\t        var offsetY = 0;\n\t        var lineIndex = 0;\n\t        var lineKey;\n\t        line = new Shape.Group('line' + lineIndex);\n\n\t        //Double margin so that left/right-aligned next is not flush with edge of image\n\t        if (scene.align === 'left' || scene.align === 'right') {\n\t            maxLineWidth = scene.width * (1 - (1 - lineWrap) * 2);\n\t        }\n\n\t        for (var i = 0; i < tpdata.words.length; i++) {\n\t            var word = tpdata.words[i];\n\t            textNode = new Shape.Text(word.text);\n\t            var newline = word.text == '\\\\n';\n\t            if (!scene.noWrap && (offsetX + word.width >= maxLineWidth || newline === true)) {\n\t                finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t                holderTextGroup.add(line);\n\t                offsetX = 0;\n\t                offsetY += holderTextGroup.properties.leading;\n\t                lineIndex += 1;\n\t                line = new Shape.Group('line' + lineIndex);\n\t                line.y = offsetY;\n\t            }\n\t            if (newline === true) {\n\t                continue;\n\t            }\n\t            textNode.moveTo(offsetX, 0);\n\t            offsetX += tpdata.spaceWidth + word.width;\n\t            line.add(textNode);\n\t        }\n\n\t        finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo(scene.width - line.width, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo((holderTextGroup.width - line.width) / 2, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo((scene.width - holderTextGroup.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - holderTextGroup.height) / 2, null);\n\n\t        //If the text exceeds vertical space, move it down so the first line is visible\n\t        if ((scene.height - holderTextGroup.height) / 2 < 0) {\n\t            holderTextGroup.moveTo(null, 0, null);\n\t        }\n\t    } else {\n\t        textNode = new Shape.Text(scene.text);\n\t        line = new Shape.Group('line0');\n\t        line.add(textNode);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            holderTextGroup.moveTo((scene.width - tpdata.boundingBox.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - tpdata.boundingBox.height) / 2, null);\n\t    }\n\n\t    //todo: renderlist\n\t    return sceneGraph;\n\t}\n\n\t/**\n\t * Adaptive text sizing function\n\t *\n\t * @private\n\t * @param width Parent width\n\t * @param height Parent height\n\t * @param fontSize Requested text size\n\t * @param scale Proportional scale of text\n\t */\n\tfunction textSize(width, height, fontSize, scale) {\n\t    var stageWidth = parseInt(width, 10);\n\t    var stageHeight = parseInt(height, 10);\n\n\t    var bigSide = Math.max(stageWidth, stageHeight);\n\t    var smallSide = Math.min(stageWidth, stageHeight);\n\n\t    var newHeight = 0.8 * Math.min(smallSide, bigSide * scale);\n\t    return Math.round(Math.max(fontSize, newHeight));\n\t}\n\n\t/**\n\t * Iterates over resizable (fluid or auto) placeholders and renders them\n\t *\n\t * @private\n\t * @param element Optional element selector, specified only if a specific element needs to be re-rendered\n\t */\n\tfunction updateResizableElements(element) {\n\t    var images;\n\t    if (element == null || element.nodeType == null) {\n\t        images = App.vars.resizableImages;\n\t    } else {\n\t        images = [element];\n\t    }\n\t    for (var i = 0, l = images.length; i < l; i++) {\n\t        var el = images[i];\n\t        if (el.holderData) {\n\t            var flags = el.holderData.flags;\n\t            var dimensions = dimensionCheck(el);\n\t            if (dimensions) {\n\t                if (!el.holderData.resizeUpdate) {\n\t                    continue;\n\t                }\n\n\t                if (flags.fluid && flags.auto) {\n\t                    var fluidConfig = el.holderData.fluidConfig;\n\t                    switch (fluidConfig.mode) {\n\t                        case 'width':\n\t                            dimensions.height = dimensions.width / fluidConfig.ratio;\n\t                            break;\n\t                        case 'height':\n\t                            dimensions.width = dimensions.height * fluidConfig.ratio;\n\t                            break;\n\t                    }\n\t                }\n\n\t                var settings = {\n\t                    mode: 'image',\n\t                    holderSettings: {\n\t                        dimensions: dimensions,\n\t                        theme: flags.theme,\n\t                        flags: flags\n\t                    },\n\t                    el: el,\n\t                    engineSettings: el.holderData.engineSettings\n\t                };\n\n\t                if (flags.textmode == 'exact') {\n\t                    flags.exactDimensions = dimensions;\n\t                    settings.holderSettings.dimensions = flags.dimensions;\n\t                }\n\n\t                render(settings);\n\t            } else {\n\t                setInvisible(el);\n\t            }\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Sets up aspect ratio metadata for fluid placeholders, in order to preserve proportions when resizing\n\t *\n\t * @private\n\t * @param el Image DOM element\n\t */\n\tfunction setInitialDimensions(el) {\n\t    if (el.holderData) {\n\t        var dimensions = dimensionCheck(el);\n\t        if (dimensions) {\n\t            var flags = el.holderData.flags;\n\n\t            var fluidConfig = {\n\t                fluidHeight: flags.dimensions.height.slice(-1) == '%',\n\t                fluidWidth: flags.dimensions.width.slice(-1) == '%',\n\t                mode: null,\n\t                initialDimensions: dimensions\n\t            };\n\n\t            if (fluidConfig.fluidWidth && !fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'width';\n\t                fluidConfig.ratio = fluidConfig.initialDimensions.width / parseFloat(flags.dimensions.height);\n\t            } else if (!fluidConfig.fluidWidth && fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'height';\n\t                fluidConfig.ratio = parseFloat(flags.dimensions.width) / fluidConfig.initialDimensions.height;\n\t            }\n\n\t            el.holderData.fluidConfig = fluidConfig;\n\t        } else {\n\t            setInvisible(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Iterates through all current invisible images, and if they're visible, renders them and removes them from further checks. Runs every animation frame.\n\t *\n\t * @private\n\t */\n\tfunction visibilityCheck() {\n\t    var renderableImages = [];\n\t    var keys = Object.keys(App.vars.invisibleImages);\n\t    var el;\n\n\t    keys.forEach(function (key) {\n\t        el = App.vars.invisibleImages[key];\n\t        if (dimensionCheck(el) && el.nodeName.toLowerCase() == 'img') {\n\t            renderableImages.push(el);\n\t            delete App.vars.invisibleImages[key];\n\t        }\n\t    });\n\n\t    if (renderableImages.length) {\n\t        Holder.run({\n\t            images: renderableImages\n\t        });\n\t    }\n\n\t    // Done to prevent 100% CPU usage via aggressive calling of requestAnimationFrame\n\t    setTimeout(function () {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t    }, 10);\n\t}\n\n\t/**\n\t * Starts checking for invisible placeholders if not doing so yet. Does nothing otherwise.\n\t *\n\t * @private\n\t */\n\tfunction startVisibilityCheck() {\n\t    if (!App.vars.visibilityCheckStarted) {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t        App.vars.visibilityCheckStarted = true;\n\t    }\n\t}\n\n\t/**\n\t * Sets a unique ID for an image detected to be invisible and adds it to the map of invisible images checked by visibilityCheck\n\t *\n\t * @private\n\t * @param el Invisible DOM element\n\t */\n\tfunction setInvisible(el) {\n\t    if (!el.holderData.invisibleId) {\n\t        App.vars.invisibleId += 1;\n\t        App.vars.invisibleImages['i' + App.vars.invisibleId] = el;\n\t        el.holderData.invisibleId = App.vars.invisibleId;\n\t    }\n\t}\n\n\t//todo: see if possible to convert stagingRenderer to use HTML only\n\tvar stagingRenderer = (function() {\n\t    var svg = null,\n\t        stagingText = null,\n\t        stagingTextNode = null;\n\t    return function(graph) {\n\t        var rootNode = graph.root;\n\t        if (App.setup.supportsSVG) {\n\t            var firstTimeSetup = false;\n\t            var tnode = function(text) {\n\t                return document.createTextNode(text);\n\t            };\n\t            if (svg == null || svg.parentNode !== document.body) {\n\t                firstTimeSetup = true;\n\t            }\n\n\t            svg = SVG.initSVG(svg, rootNode.properties.width, rootNode.properties.height);\n\t            //Show staging element before staging\n\t            svg.style.display = 'block';\n\n\t            if (firstTimeSetup) {\n\t                stagingText = DOM.newEl('text', SVG_NS);\n\t                stagingTextNode = tnode(null);\n\t                DOM.setAttr(stagingText, {\n\t                    x: 0\n\t                });\n\t                stagingText.appendChild(stagingTextNode);\n\t                svg.appendChild(stagingText);\n\t                document.body.appendChild(svg);\n\t                svg.style.visibility = 'hidden';\n\t                svg.style.position = 'absolute';\n\t                svg.style.top = '-100%';\n\t                svg.style.left = '-100%';\n\t                //todo: workaround for zero-dimension <svg> tag in Opera 12\n\t                //svg.setAttribute('width', 0);\n\t                //svg.setAttribute('height', 0);\n\t            }\n\n\t            var holderTextGroup = rootNode.children.holderTextGroup;\n\t            var htgProps = holderTextGroup.properties;\n\t            DOM.setAttr(stagingText, {\n\t                'y': htgProps.font.size,\n\t                'style': utils.cssProps({\n\t                    'font-weight': htgProps.font.weight,\n\t                    'font-size': htgProps.font.size + htgProps.font.units,\n\t                    'font-family': htgProps.font.family\n\t                })\n\t            });\n\n\t            //Unescape HTML entities to get approximately the right width\n\t            var txt = DOM.newEl('textarea');\n\t            txt.innerHTML = htgProps.text;\n\t            stagingTextNode.nodeValue = txt.value;\n\n\t            //Get bounding box for the whole string (total width and height)\n\t            var stagingTextBBox = stagingText.getBBox();\n\n\t            //Get line count and split the string into words\n\t            var lineCount = Math.ceil(stagingTextBBox.width / rootNode.properties.width);\n\t            var words = htgProps.text.split(' ');\n\t            var newlines = htgProps.text.match(/\\\\n/g);\n\t            lineCount += newlines == null ? 0 : newlines.length;\n\n\t            //Get bounding box for the string with spaces removed\n\t            stagingTextNode.nodeValue = htgProps.text.replace(/[ ]+/g, '');\n\t            var computedNoSpaceLength = stagingText.getComputedTextLength();\n\n\t            //Compute average space width\n\t            var diffLength = stagingTextBBox.width - computedNoSpaceLength;\n\t            var spaceWidth = Math.round(diffLength / Math.max(1, words.length - 1));\n\n\t            //Get widths for every word with space only if there is more than one line\n\t            var wordWidths = [];\n\t            if (lineCount > 1) {\n\t                stagingTextNode.nodeValue = '';\n\t                for (var i = 0; i < words.length; i++) {\n\t                    if (words[i].length === 0) continue;\n\t                    stagingTextNode.nodeValue = utils.decodeHtmlEntity(words[i]);\n\t                    var bbox = stagingText.getBBox();\n\t                    wordWidths.push({\n\t                        text: words[i],\n\t                        width: bbox.width\n\t                    });\n\t                }\n\t            }\n\n\t            //Hide staging element after staging\n\t            svg.style.display = 'none';\n\n\t            return {\n\t                spaceWidth: spaceWidth,\n\t                lineCount: lineCount,\n\t                boundingBox: stagingTextBBox,\n\t                words: wordWidths\n\t            };\n\t        } else {\n\t            //todo: canvas fallback for measuring text on android 2.3\n\t            return false;\n\t        }\n\t    };\n\t})();\n\n\t//Helpers\n\n\t/**\n\t * Prevents a function from being called too often, waits until a timer elapses to call it again\n\t *\n\t * @param fn Function to call\n\t */\n\tfunction debounce(fn) {\n\t    if (!App.vars.debounceTimer) fn.call(this);\n\t    if (App.vars.debounceTimer) global.clearTimeout(App.vars.debounceTimer);\n\t    App.vars.debounceTimer = global.setTimeout(function() {\n\t        App.vars.debounceTimer = null;\n\t        fn.call(this);\n\t    }, App.setup.debounce);\n\t}\n\n\t/**\n\t * Holder-specific resize/orientation change callback, debounced to prevent excessive execution\n\t */\n\tfunction resizeEvent() {\n\t    debounce(function() {\n\t        updateResizableElements(null);\n\t    });\n\t}\n\n\t//Set up flags\n\n\tfor (var flag in App.flags) {\n\t    if (!App.flags.hasOwnProperty(flag)) continue;\n\t    App.flags[flag].match = function(val) {\n\t        return val.match(this.regex);\n\t    };\n\t}\n\n\t//Properties set once on setup\n\n\tApp.setup = {\n\t    renderer: 'html',\n\t    debounce: 100,\n\t    ratio: 1,\n\t    supportsCanvas: false,\n\t    supportsSVG: false,\n\t    lineWrapRatio: 0.9,\n\t    dataAttr: 'data-src',\n\t    renderers: ['html', 'canvas', 'svg']\n\t};\n\n\t//Properties modified during runtime\n\n\tApp.vars = {\n\t    preempted: false,\n\t    resizableImages: [],\n\t    invisibleImages: {},\n\t    invisibleId: 0,\n\t    visibilityCheckStarted: false,\n\t    debounceTimer: null,\n\t    cache: {}\n\t};\n\n\t//Pre-flight\n\n\t(function() {\n\t    var canvas = DOM.newEl('canvas');\n\n\t    if (canvas.getContext) {\n\t        if (canvas.toDataURL('image/png').indexOf('data:image/png') != -1) {\n\t            App.setup.renderer = 'canvas';\n\t            App.setup.supportsCanvas = true;\n\t        }\n\t    }\n\n\t    if (!!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect) {\n\t        App.setup.renderer = 'svg';\n\t        App.setup.supportsSVG = true;\n\t    }\n\t})();\n\n\t//Starts checking for invisible placeholders\n\tstartVisibilityCheck();\n\n\tif (onDomReady) {\n\t    onDomReady(function() {\n\t        if (!App.vars.preempted) {\n\t            Holder.run();\n\t        }\n\t        if (global.addEventListener) {\n\t            global.addEventListener('resize', resizeEvent, false);\n\t            global.addEventListener('orientationchange', resizeEvent, false);\n\t        } else {\n\t            global.attachEvent('onresize', resizeEvent);\n\t        }\n\n\t        if (typeof global.Turbolinks == 'object') {\n\t            global.document.addEventListener('page:change', function() {\n\t                Holder.run();\n\t            });\n\t        }\n\t    });\n\t}\n\n\tmodule.exports = Holder;\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license\n\t *\n\t * Specially modified to work with Holder.js\n\t */\n\n\tfunction _onDomReady(win) {\n\t    //Lazy loading fix for Firefox < 3.6\n\t    //http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n\t    if (document.readyState == null && document.addEventListener) {\n\t        document.addEventListener(\"DOMContentLoaded\", function DOMContentLoaded() {\n\t            document.removeEventListener(\"DOMContentLoaded\", DOMContentLoaded, false);\n\t            document.readyState = \"complete\";\n\t        }, false);\n\t        document.readyState = \"loading\";\n\t    }\n\t    \n\t    var doc = win.document,\n\t        docElem = doc.documentElement,\n\t    \n\t        LOAD = \"load\",\n\t        FALSE = false,\n\t        ONLOAD = \"on\"+LOAD,\n\t        COMPLETE = \"complete\",\n\t        READYSTATE = \"readyState\",\n\t        ATTACHEVENT = \"attachEvent\",\n\t        DETACHEVENT = \"detachEvent\",\n\t        ADDEVENTLISTENER = \"addEventListener\",\n\t        DOMCONTENTLOADED = \"DOMContentLoaded\",\n\t        ONREADYSTATECHANGE = \"onreadystatechange\",\n\t        REMOVEEVENTLISTENER = \"removeEventListener\",\n\t    \n\t        // W3C Event model\n\t        w3c = ADDEVENTLISTENER in doc,\n\t        _top = FALSE,\n\t    \n\t        // isReady: Is the DOM ready to be used? Set to true once it occurs.\n\t        isReady = FALSE,\n\t    \n\t        // Callbacks pending execution until DOM is ready\n\t        callbacks = [];\n\t    \n\t    // Handle when the DOM is ready\n\t    function ready( fn ) {\n\t        if ( !isReady ) {\n\t    \n\t            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t            if ( !doc.body ) {\n\t                return defer( ready );\n\t            }\n\t    \n\t            // Remember that the DOM is ready\n\t            isReady = true;\n\t    \n\t            // Execute all callbacks\n\t            while ( fn = callbacks.shift() ) {\n\t                defer( fn );\n\t            }\n\t        }\n\t    }\n\t    \n\t    // The ready event handler\n\t    function completed( event ) {\n\t        // readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t        if ( w3c || event.type === LOAD || doc[READYSTATE] === COMPLETE ) {\n\t            detach();\n\t            ready();\n\t        }\n\t    }\n\t    \n\t    // Clean-up method for dom ready events\n\t    function detach() {\n\t        if ( w3c ) {\n\t            doc[REMOVEEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t            win[REMOVEEVENTLISTENER]( LOAD, completed, FALSE );\n\t        } else {\n\t            doc[DETACHEVENT]( ONREADYSTATECHANGE, completed );\n\t            win[DETACHEVENT]( ONLOAD, completed );\n\t        }\n\t    }\n\t    \n\t    // Defers a function, scheduling it to run after the current call stack has cleared.\n\t    function defer( fn, wait ) {\n\t        // Allow 0 to be passed\n\t        setTimeout( fn, +wait >= 0 ? wait : 1 );\n\t    }\n\t    \n\t    // Attach the listeners:\n\t    \n\t    // Catch cases where onDomReady is called after the browser event has already occurred.\n\t    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t    if ( doc[READYSTATE] === COMPLETE ) {\n\t        // Handle it asynchronously to allow scripts the opportunity to delay ready\n\t        defer( ready );\n\t    \n\t    // Standards-based browsers support DOMContentLoaded\n\t    } else if ( w3c ) {\n\t        // Use the handy event callback\n\t        doc[ADDEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ADDEVENTLISTENER]( LOAD, completed, FALSE );\n\t    \n\t    // If IE event model is used\n\t    } else {\n\t        // Ensure firing before onload, maybe late but safe also for iframes\n\t        doc[ATTACHEVENT]( ONREADYSTATECHANGE, completed );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ATTACHEVENT]( ONLOAD, completed );\n\t    \n\t        // If IE and not a frame\n\t        // continually check to see if the document is ready\n\t        try {\n\t            _top = win.frameElement == null && docElem;\n\t        } catch(e) {}\n\t    \n\t        if ( _top && _top.doScroll ) {\n\t            (function doScrollCheck() {\n\t                if ( !isReady ) {\n\t                    try {\n\t                        // Use the trick by Diego Perini\n\t                        // http://javascript.nwbox.com/IEContentLoaded/\n\t                        _top.doScroll(\"left\");\n\t                    } catch(e) {\n\t                        return defer( doScrollCheck, 50 );\n\t                    }\n\t    \n\t                    // detach all dom ready events\n\t                    detach();\n\t    \n\t                    // and execute any waiting functions\n\t                    ready();\n\t                }\n\t            })();\n\t        }\n\t    }\n\t    \n\t    function onDomReady( fn ) {\n\t        // If DOM is ready, execute the function (async), otherwise wait\n\t        isReady ? defer( fn ) : callbacks.push( fn );\n\t    }\n\t    \n\t    // Add version\n\t    onDomReady.version = \"1.4.0\";\n\t    // Add method to check if DOM is ready\n\t    onDomReady.isReady = function(){\n\t        return isReady;\n\t    };\n\n\t    return onDomReady;\n\t}\n\n\tmodule.exports = typeof window !== \"undefined\" && _onDomReady(window);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t//Modified version of component/querystring\n\t//Changes: updated dependencies, dot notation parsing, JSHint fixes\n\t//Fork at https://github.com/imsky/querystring\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar encode = encodeURIComponent;\n\tvar decode = decodeURIComponent;\n\tvar trim = __webpack_require__(4);\n\tvar type = __webpack_require__(5);\n\n\tvar arrayRegex = /(\\w+)\\[(\\d+)\\]/;\n\tvar objectRegex = /\\w+\\.\\w+/;\n\n\t/**\n\t * Parse the given query `str`.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\n\texports.parse = function(str){\n\t  if ('string' !== typeof str) return {};\n\n\t  str = trim(str);\n\t  if ('' === str) return {};\n\t  if ('?' === str.charAt(0)) str = str.slice(1);\n\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    var parts = pairs[i].split('=');\n\t    var key = decode(parts[0]);\n\t    var m, ctx, prop;\n\n\t    if (m = arrayRegex.exec(key)) {\n\t      obj[m[1]] = obj[m[1]] || [];\n\t      obj[m[1]][m[2]] = decode(parts[1]);\n\t      continue;\n\t    }\n\n\t    if (m = objectRegex.test(key)) {\n\t      m = key.split('.');\n\t      ctx = obj;\n\t      \n\t      while (m.length) {\n\t        prop = m.shift();\n\n\t        if (!prop.length) continue;\n\n\t        if (!ctx[prop]) {\n\t          ctx[prop] = {};\n\t        } else if (ctx[prop] && typeof ctx[prop] !== 'object') {\n\t          break;\n\t        }\n\n\t        if (!m.length) {\n\t          ctx[prop] = decode(parts[1]);\n\t        }\n\n\t        ctx = ctx[prop];\n\t      }\n\n\t      continue;\n\t    }\n\n\t    obj[parts[0]] = null == parts[1] ? '' : decode(parts[1]);\n\t  }\n\n\t  return obj;\n\t};\n\n\t/**\n\t * Stringify the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api public\n\t */\n\n\texports.stringify = function(obj){\n\t  if (!obj) return '';\n\t  var pairs = [];\n\n\t  for (var key in obj) {\n\t    var value = obj[key];\n\n\t    if ('array' == type(value)) {\n\t      for (var i = 0; i < value.length; ++i) {\n\t        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n\t      }\n\t      continue;\n\t    }\n\n\t    pairs.push(encode(key) + '=' + encode(obj[key]));\n\t  }\n\n\t  return pairs.join('&');\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * toString ref.\n\t */\n\n\tvar toString = Object.prototype.toString;\n\n\t/**\n\t * Return the type of `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {String}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val){\n\t  switch (toString.call(val)) {\n\t    case '[object Date]': return 'date';\n\t    case '[object RegExp]': return 'regexp';\n\t    case '[object Arguments]': return 'arguments';\n\t    case '[object Array]': return 'array';\n\t    case '[object Error]': return 'error';\n\t  }\n\n\t  if (val === null) return 'null';\n\t  if (val === undefined) return 'undefined';\n\t  if (val !== val) return 'nan';\n\t  if (val && val.nodeType === 1) return 'element';\n\n\t  val = val.valueOf\n\t    ? val.valueOf()\n\t    : Object.prototype.valueOf.apply(val)\n\n\t  return typeof val;\n\t};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tvar SceneGraph = function(sceneProperties) {\n\t    var nodeCount = 1;\n\n\t    //todo: move merge to helpers section\n\t    function merge(parent, child) {\n\t        for (var prop in child) {\n\t            parent[prop] = child[prop];\n\t        }\n\t        return parent;\n\t    }\n\n\t    var SceneNode = function(name) {\n\t        nodeCount++;\n\t        this.parent = null;\n\t        this.children = {};\n\t        this.id = nodeCount;\n\t        this.name = 'n' + nodeCount;\n\t        if (typeof name !== 'undefined') {\n\t            this.name = name;\n\t        }\n\t        this.x = this.y = this.z = 0;\n\t        this.width = this.height = 0;\n\t    };\n\n\t    SceneNode.prototype.resize = function(width, height) {\n\t        if (width != null) {\n\t            this.width = width;\n\t        }\n\t        if (height != null) {\n\t            this.height = height;\n\t        }\n\t    };\n\n\t    SceneNode.prototype.moveTo = function(x, y, z) {\n\t        this.x = x != null ? x : this.x;\n\t        this.y = y != null ? y : this.y;\n\t        this.z = z != null ? z : this.z;\n\t    };\n\n\t    SceneNode.prototype.add = function(child) {\n\t        var name = child.name;\n\t        if (typeof this.children[name] === 'undefined') {\n\t            this.children[name] = child;\n\t            child.parent = this;\n\t        } else {\n\t            throw 'SceneGraph: child already exists: ' + name;\n\t        }\n\t    };\n\n\t    var RootNode = function() {\n\t        SceneNode.call(this, 'root');\n\t        this.properties = sceneProperties;\n\t    };\n\n\t    RootNode.prototype = new SceneNode();\n\n\t    var Shape = function(name, props) {\n\t        SceneNode.call(this, name);\n\t        this.properties = {\n\t            'fill': '#000000'\n\t        };\n\t        if (typeof props !== 'undefined') {\n\t            merge(this.properties, props);\n\t        } else if (typeof name !== 'undefined' && typeof name !== 'string') {\n\t            throw 'SceneGraph: invalid node name';\n\t        }\n\t    };\n\n\t    Shape.prototype = new SceneNode();\n\n\t    var Group = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'group';\n\t    };\n\n\t    Group.prototype = new Shape();\n\n\t    var Rect = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'rect';\n\t    };\n\n\t    Rect.prototype = new Shape();\n\n\t    var Text = function(text) {\n\t        Shape.call(this);\n\t        this.type = 'text';\n\t        this.properties.text = text;\n\t    };\n\n\t    Text.prototype = new Shape();\n\n\t    var root = new RootNode();\n\n\t    this.Shape = {\n\t        'Rect': Rect,\n\t        'Text': Text,\n\t        'Group': Group\n\t    };\n\n\t    this.root = root;\n\t    return this;\n\t};\n\n\tmodule.exports = SceneGraph;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Shallow object clone and merge\n\t *\n\t * @param a Object A\n\t * @param b Object B\n\t * @returns {Object} New object with all of A's properties, and all of B's properties, overwriting A's properties\n\t */\n\texports.extend = function(a, b) {\n\t    var c = {};\n\t    for (var x in a) {\n\t        if (a.hasOwnProperty(x)) {\n\t            c[x] = a[x];\n\t        }\n\t    }\n\t    if (b != null) {\n\t        for (var y in b) {\n\t            if (b.hasOwnProperty(y)) {\n\t                c[y] = b[y];\n\t            }\n\t        }\n\t    }\n\t    return c;\n\t};\n\n\t/**\n\t * Takes a k/v list of CSS properties and returns a rule\n\t *\n\t * @param props CSS properties object\n\t */\n\texports.cssProps = function(props) {\n\t    var ret = [];\n\t    for (var p in props) {\n\t        if (props.hasOwnProperty(p)) {\n\t            ret.push(p + ':' + props[p]);\n\t        }\n\t    }\n\t    return ret.join(';');\n\t};\n\n\t/**\n\t * Encodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.encodeHtmlEntity = function(str) {\n\t    var buf = [];\n\t    var charCode = 0;\n\t    for (var i = str.length - 1; i >= 0; i--) {\n\t        charCode = str.charCodeAt(i);\n\t        if (charCode > 128) {\n\t            buf.unshift(['&#', charCode, ';'].join(''));\n\t        } else {\n\t            buf.unshift(str[i]);\n\t        }\n\t    }\n\t    return buf.join('');\n\t};\n\n\t/**\n\t * Checks if an image exists\n\t *\n\t * @param src URL of image\n\t * @param callback Callback to call once image status has been found\n\t */\n\texports.imageExists = function(src, callback) {\n\t    var image = new Image();\n\t    image.onerror = function() {\n\t        callback.call(this, false);\n\t    };\n\t    image.onload = function() {\n\t        callback.call(this, true);\n\t    };\n\t    image.src = src;\n\t};\n\n\t/**\n\t * Decodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.decodeHtmlEntity = function(str) {\n\t    return str.replace(/&#(\\d+);/g, function(match, dec) {\n\t        return String.fromCharCode(dec);\n\t    });\n\t};\n\n\n\t/**\n\t * Returns an element's dimensions if it's visible, `false` otherwise.\n\t *\n\t * @param el DOM element\n\t */\n\texports.dimensionCheck = function(el) {\n\t    var dimensions = {\n\t        height: el.clientHeight,\n\t        width: el.clientWidth\n\t    };\n\n\t    if (dimensions.height && dimensions.width) {\n\t        return dimensions;\n\t    } else {\n\t        return false;\n\t    }\n\t};\n\n\n\t/**\n\t * Returns true if value is truthy or if it is \"semantically truthy\"\n\t * @param val\n\t */\n\texports.truthy = function(val) {\n\t    if (typeof val === 'string') {\n\t        return val === 'true' || val === 'yes' || val === '1' || val === 'on' || val === '✓';\n\t    }\n\t    return !!val;\n\t};\n\n\t/**\n\t * Parses input into a well-formed CSS color\n\t * @param val\n\t */\n\texports.parseColor = function(val) {\n\t    var hexre = /(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i;\n\t    var rgbre = /^rgb\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\t    var rgbare = /^rgba\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(0*\\.\\d{1,}|1)\\)$/;\n\n\t    var match = val.match(hexre);\n\t    var retval;\n\n\t    if (match !== null) {\n\t        retval = match[1] || match[2];\n\t        if (retval[0] !== '#') {\n\t            return '#' + retval;\n\t        } else {\n\t            return retval;\n\t        }\n\t    }\n\n\t    match = val.match(rgbre);\n\n\t    if (match !== null) {\n\t        retval = 'rgb(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    match = val.match(rgbare);\n\n\t    if (match !== null) {\n\t        const normalizeAlpha = function (a) { return '0.' + a.split('.')[1]; };\n\t        const fixedMatch = match.slice(1).map(function (e, i) {\n\t            return (i === 3) ? normalizeAlpha(e) : e;\n\t        });\n\t        retval = 'rgba(' + fixedMatch.join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    return null;\n\t};\n\n\t/**\n\t * Provides the correct scaling ratio for canvas drawing operations on HiDPI screens (e.g. Retina displays)\n\t */\n\texports.canvasRatio = function () {\n\t    var devicePixelRatio = 1;\n\t    var backingStoreRatio = 1;\n\n\t    if (global.document) {\n\t        var canvas = global.document.createElement('canvas');\n\t        if (canvas.getContext) {\n\t            var ctx = canvas.getContext('2d');\n\t            devicePixelRatio = global.devicePixelRatio || 1;\n\t            backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t        }\n\t    }\n\n\t    return devicePixelRatio / backingStoreRatio;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var DOM = __webpack_require__(9);\n\n\tvar SVG_NS = 'http://www.w3.org/2000/svg';\n\tvar NODE_TYPE_COMMENT = 8;\n\n\t/**\n\t * Generic SVG element creation function\n\t *\n\t * @param svg SVG context, set to null if new\n\t * @param width Document width\n\t * @param height Document height\n\t */\n\texports.initSVG = function(svg, width, height) {\n\t    var defs, style, initialize = false;\n\n\t    if (svg && svg.querySelector) {\n\t        style = svg.querySelector('style');\n\t        if (style === null) {\n\t            initialize = true;\n\t        }\n\t    } else {\n\t        svg = DOM.newEl('svg', SVG_NS);\n\t        initialize = true;\n\t    }\n\n\t    if (initialize) {\n\t        defs = DOM.newEl('defs', SVG_NS);\n\t        style = DOM.newEl('style', SVG_NS);\n\t        DOM.setAttr(style, {\n\t            'type': 'text/css'\n\t        });\n\t        defs.appendChild(style);\n\t        svg.appendChild(defs);\n\t    }\n\n\t    //IE throws an exception if this is set and Chrome requires it to be set\n\t    if (svg.webkitMatchesSelector) {\n\t        svg.setAttribute('xmlns', SVG_NS);\n\t    }\n\n\t    //Remove comment nodes\n\t    for (var i = 0; i < svg.childNodes.length; i++) {\n\t        if (svg.childNodes[i].nodeType === NODE_TYPE_COMMENT) {\n\t            svg.removeChild(svg.childNodes[i]);\n\t        }\n\t    }\n\n\t    //Remove CSS\n\t    while (style.childNodes.length) {\n\t        style.removeChild(style.childNodes[0]);\n\t    }\n\n\t    DOM.setAttr(svg, {\n\t        'width': width,\n\t        'height': height,\n\t        'viewBox': '0 0 ' + width + ' ' + height,\n\t        'preserveAspectRatio': 'none'\n\t    });\n\n\t    return svg;\n\t};\n\n\t/**\n\t * Converts serialized SVG to a string suitable for data URI use\n\t * @param svgString Serialized SVG string\n\t * @param [base64] Use base64 encoding for data URI\n\t */\n\texports.svgStringToDataURI = function() {\n\t    var rawPrefix = 'data:image/svg+xml;charset=UTF-8,';\n\t    var base64Prefix = 'data:image/svg+xml;charset=UTF-8;base64,';\n\n\t    return function(svgString, base64) {\n\t        if (base64) {\n\t            return base64Prefix + btoa(global.unescape(encodeURIComponent(svgString)));\n\t        } else {\n\t            return rawPrefix + encodeURIComponent(svgString);\n\t        }\n\t    };\n\t}();\n\n\t/**\n\t * Returns serialized SVG with XML processing instructions\n\t *\n\t * @param svg SVG context\n\t * @param stylesheets CSS stylesheets to include\n\t */\n\texports.serializeSVG = function(svg, engineSettings) {\n\t    if (!global.XMLSerializer) return;\n\t    var serializer = new XMLSerializer();\n\t    var svgCSS = '';\n\t    var stylesheets = engineSettings.stylesheets;\n\n\t    //External stylesheets: Processing Instruction method\n\t    if (engineSettings.svgXMLStylesheet) {\n\t        var xml = DOM.createXML();\n\t        //Add <?xml-stylesheet ?> directives\n\t        for (var i = stylesheets.length - 1; i >= 0; i--) {\n\t            var csspi = xml.createProcessingInstruction('xml-stylesheet', 'href=\"' + stylesheets[i] + '\" rel=\"stylesheet\"');\n\t            xml.insertBefore(csspi, xml.firstChild);\n\t        }\n\n\t        xml.removeChild(xml.documentElement);\n\t        svgCSS = serializer.serializeToString(xml);\n\t    }\n\n\t    var svgText = serializer.serializeToString(svg);\n\t    svgText = svgText.replace(/\\&amp;(\\#[0-9]{2,}\\;)/g, '&$1');\n\t    return svgCSS + svgText;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Generic new DOM element function\n\t *\n\t * @param tag Tag to create\n\t * @param namespace Optional namespace value\n\t */\n\texports.newEl = function(tag, namespace) {\n\t    if (!global.document) return;\n\n\t    if (namespace == null) {\n\t        return global.document.createElement(tag);\n\t    } else {\n\t        return global.document.createElementNS(namespace, tag);\n\t    }\n\t};\n\n\t/**\n\t * Generic setAttribute function\n\t *\n\t * @param el Reference to DOM element\n\t * @param attrs Object with attribute keys and values\n\t */\n\texports.setAttr = function (el, attrs) {\n\t    for (var a in attrs) {\n\t        el.setAttribute(a, attrs[a]);\n\t    }\n\t};\n\n\t/**\n\t * Creates a XML document\n\t * @private\n\t */\n\texports.createXML = function() {\n\t    if (!global.DOMParser) return;\n\t    return new DOMParser().parseFromString('<xml />', 'application/xml');\n\t};\n\n\t/**\n\t * Converts a value into an array of DOM nodes\n\t *\n\t * @param val A string, a NodeList, a Node, or an HTMLCollection\n\t */\n\texports.getNodeArray = function(val) {\n\t    var retval = null;\n\t    if (typeof(val) == 'string') {\n\t        retval = document.querySelectorAll(val);\n\t    } else if (global.NodeList && val instanceof global.NodeList) {\n\t        retval = val;\n\t    } else if (global.Node && val instanceof global.Node) {\n\t        retval = [val];\n\t    } else if (global.HTMLCollection && val instanceof global.HTMLCollection) {\n\t        retval = val;\n\t    } else if (val instanceof Array) {\n\t        retval = val;\n\t    } else if (val === null) {\n\t        retval = [];\n\t    }\n\n\t    retval = Array.prototype.slice.call(retval);\n\n\t    return retval;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tvar Color = function(color, options) {\n\t    //todo: support rgba, hsla, and rrggbbaa notation\n\t    //todo: use CIELAB internally\n\t    //todo: add clamp function (with sign)\n\t    if (typeof color !== 'string') return;\n\n\t    this.original = color;\n\n\t    if (color.charAt(0) === '#') {\n\t        color = color.slice(1);\n\t    }\n\n\t    if (/[^a-f0-9]+/i.test(color)) return;\n\n\t    if (color.length === 3) {\n\t        color = color.replace(/./g, '$&$&');\n\t    }\n\n\t    if (color.length !== 6) return;\n\n\t    this.alpha = 1;\n\n\t    if (options && options.alpha) {\n\t        this.alpha = options.alpha;\n\t    }\n\n\t    this.set(parseInt(color, 16));\n\t};\n\n\t//todo: jsdocs\n\tColor.rgb2hex = function(r, g, b) {\n\t    function format (decimal) {\n\t        var hex = (decimal | 0).toString(16);\n\t        if (decimal < 16) {\n\t            hex = '0' + hex;\n\t        }\n\t        return hex;\n\t    }\n\n\t    return [r, g, b].map(format).join('');\n\t};\n\n\t//todo: jsdocs\n\tColor.hsl2rgb = function (h, s, l) {\n\t    var H = h / 60;\n\t    var C = (1 - Math.abs(2 * l - 1)) * s;\n\t    var X = C * (1 - Math.abs(parseInt(H) % 2 - 1));\n\t    var m = l - (C / 2);\n\n\t    var r = 0, g = 0, b = 0;\n\n\t    if (H >= 0 && H < 1) {\n\t        r = C;\n\t        g = X;\n\t    } else if (H >= 1 && H < 2) {\n\t        r = X;\n\t        g = C;\n\t    } else if (H >= 2 && H < 3) {\n\t        g = C;\n\t        b = X;\n\t    } else if (H >= 3 && H < 4) {\n\t        g = X;\n\t        b = C;\n\t    } else if (H >= 4 && H < 5) {\n\t        r = X;\n\t        b = C;\n\t    } else if (H >= 5 && H < 6) {\n\t        r = C;\n\t        b = X;\n\t    }\n\n\t    r += m;\n\t    g += m;\n\t    b += m;\n\n\t    r = parseInt(r * 255);\n\t    g = parseInt(g * 255);\n\t    b = parseInt(b * 255);\n\n\t    return [r, g, b];\n\t};\n\n\t/**\n\t * Sets the color from a raw RGB888 integer\n\t * @param raw RGB888 representation of color\n\t */\n\t//todo: refactor into a static method\n\t//todo: factor out individual color spaces\n\t//todo: add HSL, CIELAB, and CIELUV\n\tColor.prototype.set = function (val) {\n\t    this.raw = val;\n\n\t    var r = (this.raw & 0xFF0000) >> 16;\n\t    var g = (this.raw & 0x00FF00) >> 8;\n\t    var b = (this.raw & 0x0000FF);\n\n\t    // BT.709\n\t    var y = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n\t    var u = -0.09991 * r - 0.33609 * g + 0.436 * b;\n\t    var v = 0.615 * r - 0.55861 * g - 0.05639 * b;\n\n\t    this.rgb = {\n\t        r: r,\n\t        g: g,\n\t        b: b\n\t    };\n\n\t    this.yuv = {\n\t        y: y,\n\t        u: u,\n\t        v: v\n\t    };\n\n\t    return this;\n\t};\n\n\t/**\n\t * Lighten or darken a color\n\t * @param multiplier Amount to lighten or darken (-1 to 1)\n\t */\n\tColor.prototype.lighten = function(multiplier) {\n\t    var cm = Math.min(1, Math.max(0, Math.abs(multiplier))) * (multiplier < 0 ? -1 : 1);\n\t    var bm = (255 * cm) | 0;\n\t    var cr = Math.min(255, Math.max(0, this.rgb.r + bm));\n\t    var cg = Math.min(255, Math.max(0, this.rgb.g + bm));\n\t    var cb = Math.min(255, Math.max(0, this.rgb.b + bm));\n\t    var hex = Color.rgb2hex(cr, cg, cb);\n\t    return new Color(hex);\n\t};\n\n\t/**\n\t * Output color in hex format\n\t * @param addHash Add a hash character to the beginning of the output\n\t */\n\tColor.prototype.toHex = function(addHash) {\n\t    return (addHash ? '#' : '') + this.raw.toString(16);\n\t};\n\n\t/**\n\t * Returns whether or not current color is lighter than another color\n\t * @param color Color to compare against\n\t */\n\tColor.prototype.lighterThan = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    return this.yuv.y > color.yuv.y;\n\t};\n\n\t/**\n\t * Returns the result of mixing current color with another color\n\t * @param color Color to mix with\n\t * @param multiplier How much to mix with the other color\n\t */\n\t/*\n\tColor.prototype.mix = function (color, multiplier) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var r = this.rgb.r;\n\t    var g = this.rgb.g;\n\t    var b = this.rgb.b;\n\t    var a = this.alpha;\n\n\t    var m = typeof multiplier !== 'undefined' ? multiplier : 0.5;\n\n\t    //todo: write a lerp function\n\t    r = r + m * (color.rgb.r - r);\n\t    g = g + m * (color.rgb.g - g);\n\t    b = b + m * (color.rgb.b - b);\n\t    a = a + m * (color.alpha - a);\n\n\t    return new Color(Color.rgbToHex(r, g, b), {\n\t        'alpha': a\n\t    });\n\t};\n\t*/\n\n\t/**\n\t * Returns the result of blending another color on top of current color with alpha\n\t * @param color Color to blend on top of current color, i.e. \"Ca\"\n\t */\n\t//todo: see if .blendAlpha can be merged into .mix\n\tColor.prototype.blendAlpha = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var Ca = color;\n\t    var Cb = this;\n\n\t    //todo: write alpha blending function\n\t    var r = Ca.alpha * Ca.rgb.r + (1 - Ca.alpha) * Cb.rgb.r;\n\t    var g = Ca.alpha * Ca.rgb.g + (1 - Ca.alpha) * Cb.rgb.g;\n\t    var b = Ca.alpha * Ca.rgb.b + (1 - Ca.alpha) * Cb.rgb.b;\n\n\t    return new Color(Color.rgb2hex(r, g, b));\n\t};\n\n\tmodule.exports = Color;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\n\t  'version': '2.9.7',\n\t  'svg_ns': 'http://www.w3.org/2000/svg'\n\t};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar shaven = __webpack_require__(13);\n\n\tvar SVG = __webpack_require__(8);\n\tvar constants = __webpack_require__(11);\n\tvar utils = __webpack_require__(7);\n\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar templates = {\n\t  'element': function (options) {\n\t    var tag = options.tag;\n\t    var content = options.content || '';\n\t    delete options.tag;\n\t    delete options.content;\n\t    return  [tag, content, options];\n\t  }\n\t};\n\n\t//todo: deprecate tag arg, infer tag from shape object\n\tfunction convertShape (shape, tag) {\n\t  return templates.element({\n\t    'tag': tag,\n\t    'width': shape.width,\n\t    'height': shape.height,\n\t    'fill': shape.properties.fill\n\t  });\n\t}\n\n\tfunction textCss (properties) {\n\t  return utils.cssProps({\n\t    'fill': properties.fill,\n\t    'font-weight': properties.font.weight,\n\t    'font-family': properties.font.family + ', monospace',\n\t    'font-size': properties.font.size + properties.font.units\n\t  });\n\t}\n\n\tfunction outlinePath (bgWidth, bgHeight, outlineWidth) {\n\t  var outlineOffsetWidth = outlineWidth / 2;\n\n\t  return [\n\t    'M', outlineOffsetWidth, outlineOffsetWidth,\n\t    'H', bgWidth - outlineOffsetWidth,\n\t    'V', bgHeight - outlineOffsetWidth,\n\t    'H', outlineOffsetWidth,\n\t    'V', 0,\n\t    'M', 0, outlineOffsetWidth,\n\t    'L', bgWidth, bgHeight - outlineOffsetWidth,\n\t    'M', 0, bgHeight - outlineOffsetWidth,\n\t    'L', bgWidth, outlineOffsetWidth\n\t  ].join(' ');\n\t}\n\n\tmodule.exports = function (sceneGraph, renderSettings) {\n\t  var engineSettings = renderSettings.engineSettings;\n\t  var stylesheets = engineSettings.stylesheets;\n\t  var stylesheetXml = stylesheets.map(function (stylesheet) {\n\t    return '<?xml-stylesheet rel=\"stylesheet\" href=\"' + stylesheet + '\"?>';\n\t  }).join('\\n');\n\n\t  var holderId = 'holder_' + Number(new Date()).toString(16);\n\n\t  var root = sceneGraph.root;\n\t  var textGroup = root.children.holderTextGroup;\n\n\t  var css = '#' + holderId + ' text { ' + textCss(textGroup.properties) + ' } ';\n\n\t  // push text down to be equally vertically aligned with canvas renderer\n\t  textGroup.y += textGroup.textPositionData.boundingBox.height * 0.8;\n\n\t  var wordTags = [];\n\n\t  Object.keys(textGroup.children).forEach(function (lineKey) {\n\t    var line = textGroup.children[lineKey];\n\n\t    Object.keys(line.children).forEach(function (wordKey) {\n\t      var word = line.children[wordKey];\n\t      var x = textGroup.x + line.x + word.x;\n\t      var y = textGroup.y + line.y + word.y;\n\t      var wordTag = templates.element({\n\t        'tag': 'text',\n\t        'content': word.properties.text,\n\t        'x': x,\n\t        'y': y\n\t      });\n\n\t      wordTags.push(wordTag);\n\t    });\n\t  });\n\n\t  var text = templates.element({\n\t    'tag': 'g',\n\t    'content': wordTags\n\t  });\n\n\t  var outline = null;\n\n\t  if (root.children.holderBg.properties.outline) {\n\t    var outlineProperties = root.children.holderBg.properties.outline;\n\t    outline = templates.element({\n\t      'tag': 'path',\n\t      'd': outlinePath(root.children.holderBg.width, root.children.holderBg.height, outlineProperties.width),\n\t      'stroke-width': outlineProperties.width,\n\t      'stroke': outlineProperties.fill,\n\t      'fill': 'none'\n\t    });\n\t  }\n\n\t  var bg = convertShape(root.children.holderBg, 'rect');\n\n\t  var sceneContent = [];\n\n\t  sceneContent.push(bg);\n\t  if (outlineProperties) {\n\t    sceneContent.push(outline);\n\t  }\n\t  sceneContent.push(text);\n\n\t  var scene = templates.element({\n\t    'tag': 'g',\n\t    'id': holderId,\n\t    'content': sceneContent\n\t  });\n\n\t  var style = templates.element({\n\t    'tag': 'style',\n\t    //todo: figure out how to add CDATA directive\n\t    'content': css,\n\t    'type': 'text/css'\n\t  });\n\n\t  var defs = templates.element({\n\t    'tag': 'defs',\n\t    'content': style\n\t  });\n\n\t  var svg = templates.element({\n\t    'tag': 'svg',\n\t    'content': [defs, scene],\n\t    'width': root.properties.width,\n\t    'height': root.properties.height,\n\t    'xmlns': SVG_NS,\n\t    'viewBox': [0, 0, root.properties.width, root.properties.height].join(' '),\n\t    'preserveAspectRatio': 'none'\n\t  });\n\n\t  var output = shaven(svg);\n\n\t  if (/\\&amp;(x)?#[0-9A-Fa-f]/.test(output[0])) {\n\t    output[0] = output[0].replace(/&amp;#/gm, '&#');\n\t  }\n\t  \n\t  output = stylesheetXml + output[0];\n\n\t  var svgString = SVG.svgStringToDataURI(output, renderSettings.mode === 'background');\n\t  return svgString;\n\t};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar escape = __webpack_require__(14)\n\n\t// TODO: remove namespace\n\n\tmodule.exports = function shaven (array, namespace, returnObject) {\n\n\t\t'use strict'\n\n\t\tvar i = 1\n\t\tvar doesEscape = true\n\t\tvar HTMLString\n\t\tvar attributeKey\n\t\tvar callback\n\t\tvar key\n\n\n\t\treturnObject = returnObject || {}\n\n\n\t\tfunction createElement (sugarString) {\n\n\t\t\tvar tags = sugarString.match(/^[\\w-]+/)\n\t\t\tvar element = {\n\t\t\t\ttag: tags ? tags[0] : 'div',\n\t\t\t\tattr: {},\n\t\t\t\tchildren: []\n\t\t\t}\n\t\t\tvar id = sugarString.match(/#([\\w-]+)/)\n\t\t\tvar reference = sugarString.match(/\\$([\\w-]+)/)\n\t\t\tvar classNames = sugarString.match(/\\.[\\w-]+/g)\n\n\n\t\t\t// Assign id if is set\n\t\t\tif (id) {\n\t\t\t\telement.attr.id = id[1]\n\n\t\t\t\t// Add element to the return object\n\t\t\t\treturnObject[id[1]] = element\n\t\t\t}\n\n\t\t\tif (reference)\n\t\t\t\treturnObject[reference[1]] = element\n\n\t\t\tif (classNames)\n\t\t\t\telement.attr.class = classNames.join(' ').replace(/\\./g, '')\n\n\t\t\tif (sugarString.match(/&$/g))\n\t\t\t\tdoesEscape = false\n\n\t\t\treturn element\n\t\t}\n\n\t\tfunction replacer (key, value) {\n\n\t\t\tif (value === null || value === false || value === undefined)\n\t\t\t\treturn\n\n\t\t\tif (typeof value !== 'string' && typeof value !== 'object')\n\t\t\t\treturn String(value)\n\n\t\t\treturn value\n\t\t}\n\n\t\tfunction escapeAttribute (string) {\n\t\t\treturn (string || string === 0) ?\n\t\t\t\tString(string)\n\t\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t\t.replace(/\"/g, '&quot;') :\n\t\t\t\t''\n\t\t}\n\n\t\tfunction escapeHTML (string) {\n\t\t\treturn String(string)\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/\"/g, '&quot;')\n\t\t\t\t.replace(/'/g, '&apos;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t}\n\n\n\t\tif (typeof array[0] === 'string')\n\t\t\tarray[0] = createElement(array[0])\n\n\t\telse if (Array.isArray(array[0]))\n\t\t\ti = 0\n\n\t\telse\n\t\t\tthrow new Error(\n\t\t\t\t'First element of array must be a string, ' +\n\t\t\t\t'or an array and not ' + JSON.stringify(array[0])\n\t\t\t)\n\n\n\t\tfor (; i < array.length; i++) {\n\n\t\t\t// Don't render element if value is false or null\n\t\t\tif (array[i] === false || array[i] === null) {\n\t\t\t\tarray[0] = false\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// Continue with next array value if current value is undefined or true\n\t\t\telse if (array[i] === undefined || array[i] === true) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'string') {\n\t\t\t\tif (doesEscape)\n\t\t\t\t\tarray[i] = escapeHTML(array[i])\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'number') {\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (Array.isArray(array[i])) {\n\n\t\t\t\tif (Array.isArray(array[i][0])) {\n\t\t\t\t\tarray[i].reverse().forEach(function (subArray) {\n\t\t\t\t\t\tarray.splice(i + 1, 0, subArray)\n\t\t\t\t\t})\n\n\t\t\t\t\tif (i !== 0)\n\t\t\t\t\t\tcontinue\n\t\t\t\t\ti++\n\t\t\t\t}\n\n\t\t\t\tshaven(array[i], namespace, returnObject)\n\n\t\t\t\tif (array[i][0])\n\t\t\t\t\tarray[0].children.push(array[i][0])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'function')\n\t\t\t\tcallback = array[i]\n\n\n\t\t\telse if (typeof array[i] === 'object') {\n\t\t\t\tfor (attributeKey in array[i])\n\t\t\t\t\tif (array[i].hasOwnProperty(attributeKey))\n\t\t\t\t\t\tif (array[i][attributeKey] !== null &&\n\t\t\t\t\t\t\tarray[i][attributeKey] !== false)\n\t\t\t\t\t\t\tif (attributeKey === 'style' &&\n\t\t\t\t\t\t\t\ttypeof array[i][attributeKey] === 'object')\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = JSON\n\t\t\t\t\t\t\t\t\t.stringify(array[i][attributeKey], replacer)\n\t\t\t\t\t\t\t\t\t.slice(2, -2)\n\t\t\t\t\t\t\t\t\t.replace(/\",\"/g, ';')\n\t\t\t\t\t\t\t\t\t.replace(/\":\"/g, ':')\n\t\t\t\t\t\t\t\t\t.replace(/\\\\\"/g, '\\'')\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = array[i][attributeKey]\n\t\t\t}\n\n\t\t\telse\n\t\t\t\tthrow new TypeError('\"' + array[i] + '\" is not allowed as a value.')\n\t\t}\n\n\n\t\tif (array[0] !== false) {\n\n\t\t\tHTMLString = '<' + array[0].tag\n\n\t\t\tfor (key in array[0].attr)\n\t\t\t\tif (array[0].attr.hasOwnProperty(key))\n\t\t\t\t\tHTMLString += ' ' + key + '=\"' +\n\t\t\t\t\t\tescapeAttribute(array[0].attr[key]) + '\"'\n\n\t\t\tHTMLString += '>'\n\n\t\t\tarray[0].children.forEach(function (child) {\n\t\t\t\tHTMLString += child\n\t\t\t})\n\n\t\t\tHTMLString += '</' + array[0].tag + '>'\n\n\t\t\tarray[0] = HTMLString\n\t\t}\n\n\t\t// Return root element on index 0\n\t\treturnObject[0] = array[0]\n\n\t\tif (callback)\n\t\t\tcallback(array[0])\n\n\t\t// returns object containing all elements with an id and the root element\n\t\treturn returnObject\n\t}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * escape-html\n\t * Copyright(c) 2012-2013 TJ Holowaychuk\n\t * Copyright(c) 2015 Andreas Lubbe\n\t * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n\t * MIT Licensed\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Module variables.\n\t * @private\n\t */\n\n\tvar matchHtmlRegExp = /[\"'&<>]/;\n\n\t/**\n\t * Module exports.\n\t * @public\n\t */\n\n\tmodule.exports = escapeHtml;\n\n\t/**\n\t * Escape special characters in the given string of html.\n\t *\n\t * @param  {string} string The string to escape for inserting into HTML\n\t * @return {string}\n\t * @public\n\t */\n\n\tfunction escapeHtml(string) {\n\t  var str = '' + string;\n\t  var match = matchHtmlRegExp.exec(str);\n\n\t  if (!match) {\n\t    return str;\n\t  }\n\n\t  var escape;\n\t  var html = '';\n\t  var index = 0;\n\t  var lastIndex = 0;\n\n\t  for (index = match.index; index < str.length; index++) {\n\t    switch (str.charCodeAt(index)) {\n\t      case 34: // \"\n\t        escape = '&quot;';\n\t        break;\n\t      case 38: // &\n\t        escape = '&amp;';\n\t        break;\n\t      case 39: // '\n\t        escape = '&#39;';\n\t        break;\n\t      case 60: // <\n\t        escape = '&lt;';\n\t        break;\n\t      case 62: // >\n\t        escape = '&gt;';\n\t        break;\n\t      default:\n\t        continue;\n\t    }\n\n\t    if (lastIndex !== index) {\n\t      html += str.substring(lastIndex, index);\n\t    }\n\n\t    lastIndex = index + 1;\n\t    html += escape;\n\t  }\n\n\t  return lastIndex !== index\n\t    ? html + str.substring(lastIndex, index)\n\t    : html;\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar DOM = __webpack_require__(9);\n\tvar utils = __webpack_require__(7);\n\n\tmodule.exports = (function() {\n\t    var canvas = DOM.newEl('canvas');\n\t    var ctx = null;\n\n\t    return function(sceneGraph) {\n\t        if (ctx == null) {\n\t            ctx = canvas.getContext('2d');\n\t        }\n\n\t        var dpr = utils.canvasRatio();\n\t        var root = sceneGraph.root;\n\t        canvas.width = dpr * root.properties.width;\n\t        canvas.height = dpr * root.properties.height ;\n\t        ctx.textBaseline = 'middle';\n\n\t        var bg = root.children.holderBg;\n\t        var bgWidth = dpr * bg.width;\n\t        var bgHeight = dpr * bg.height;\n\t        //todo: parametrize outline width (e.g. in scene object)\n\t        var outlineWidth = 2;\n\t        var outlineOffsetWidth = outlineWidth / 2;\n\n\t        ctx.fillStyle = bg.properties.fill;\n\t        ctx.fillRect(0, 0, bgWidth, bgHeight);\n\n\t        if (bg.properties.outline) {\n\t            //todo: abstract this into a method\n\t            ctx.strokeStyle = bg.properties.outline.fill;\n\t            ctx.lineWidth = bg.properties.outline.width;\n\t            ctx.moveTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // TL, TR, BR, BL\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // Diagonals\n\t            ctx.moveTo(0, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.moveTo(0, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, outlineOffsetWidth);\n\t            ctx.stroke();\n\t        }\n\n\t        var textGroup = root.children.holderTextGroup;\n\t        ctx.font = textGroup.properties.font.weight + ' ' + (dpr * textGroup.properties.font.size) + textGroup.properties.font.units + ' ' + textGroup.properties.font.family + ', monospace';\n\t        ctx.fillStyle = textGroup.properties.fill;\n\n\t        for (var lineKey in textGroup.children) {\n\t            var line = textGroup.children[lineKey];\n\t            for (var wordKey in line.children) {\n\t                var word = line.children[wordKey];\n\t                var x = dpr * (textGroup.x + line.x + word.x);\n\t                var y = dpr * (textGroup.y + line.y + word.y + (textGroup.properties.leading / 2));\n\n\t                ctx.fillText(word.properties.text, x, y);\n\t            }\n\t        }\n\n\t        return canvas.toDataURL('image/png');\n\t    };\n\t})();\n\n/***/ })\n/******/ ])\n});\n;\n(function(ctx, isMeteorPackage) {\n    if (isMeteorPackage) {\n        Holder = ctx.Holder;\n    }\n})(this, typeof Meteor !== 'undefined' && typeof Package !== 'undefined');\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return buildOptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getI18n; });\n/**\n * 文件容量转换具体的bytes数值\n * @param fileSize 参数类型（String），例：2MB，230KB，1TB等\n * @param thousand 参数类型（boolean），是否以1000为计算单位，否则以默认的1024为计算单位\n */\nvar fileSize2Bytes = function fileSize2Bytes(fileSize, thousand) {\n  if (!fileSize) return null;\n  var baseUnit = thousand ? 1000 : 1024;\n  var kb = baseUnit,\n      mb = kb * baseUnit,\n      gb = mb * baseUnit;\n  var tmpCode = fileSize.substring(fileSize.length - 2).toUpperCase();\n  var sizeNumber = fileSize.substring(0, fileSize.length - 2);\n  var num = Number.parseInt(sizeNumber);\n  var result = 0;\n  switch (tmpCode) {\n    case \"KB\":\n      result = num * kb;\n      break;\n    case \"MB\":\n      result = num * mb;\n      break;\n    case \"GB\":\n      result = num * gb;\n      break;\n  }\n  return result;\n};\n\nvar i18n = {\n  cn: {\n    messages: {\n      typeError: \"{file} 文件格式不正确。有效格式： {extensions}\",\n      sizeError: \"{file} 文件容量超过限制, 文件最大容量为： {sizeLimit}\",\n      minSizeError: \"{file} 文件容量低于限制, 上传的文件最小容量为： {minSizeLimit}.\",\n      emptyError: \"{file} 文件为空，请选择其他文件进行上传。\",\n      noFilesError: \"未选择任何文件进行上传\",\n      tooManyItemsError: \"太多文件 ({netItems}) 需要被上传，上传文件数量限制为： {itemLimit}个\",\n      maxHeightImageError: \"图片高度超过限制\",\n      maxWidthImageError: \"图片宽度超过限制\",\n      minHeightImageError: \"图片高度不足\",\n      minWidthImageError: \"图片宽度不足\",\n      retryFailTooManyItems: \"重试失败 - 您已达到文件数量上限。\",\n      onLeave: \"文件正在上传，若离开该页面，正在上传的文件将被取消\"\n    },\n    text: {\n      failUpload: \"上传失败\",\n      fileInputTitle: \"选择文件进行上传\"\n    },\n    ui: {\n      thumbnail: \"图片预览\",\n      choseFileButton: \"选择文件\",\n      dropHere: \"将文件拖到这里进行上传……\",\n      done: \"完成\",\n      fileTypes: \"文件类型\",\n      fileSizeLimit: \"文件容量限制\"\n    }\n  },\n  es: {\n    messages: {\n      typeError: \"{file} El formato del archivo es incorrecto. Formato válido: {extensions}\",\n      sizeError: \"{file} El tamaño del archivo excede el límite máximo permitido: {sizeLimit}\",\n      minSizeError: \"{file} El tamaño del archivo es inferior al límite mínimo permitido: {minSizeLimit}.\",\n      emptyError: \"{file} El archivo está vacío, elija otro archivo para cargar.\",\n      noFilesError: \"No hay archivos seleccionados para cargar\",\n      tooManyItemsError: \"({netItems}) archivos. Demasiados para cargar. permitido： {itemLimit}个\",\n      maxHeightImageError: \"La altura de la imagen excede el límite.\",\n      maxWidthImageError: \"El ancho de la imagen excede el límite.\",\n      minHeightImageError: \"La altura de la imagen es insuficiente.\",\n      minWidthImageError: \"Ancho de imagen insuficiente.\",\n      retryFailTooManyItems: \"Vuelva a intentarlo: ha alcanzado el número máximo de archivos.\",\n      onLeave: \"Archivos cargando. Si sale de esta página se cancelarán todas las cargas.\"\n    },\n    text: {\n      failUpload: \"Error al subir.\",\n      fileInputTitle: \"Seleccionar archivo.\"\n    },\n    ui: {\n      thumbnail: \"Miniatura\",\n      choseFileButton: \"Seleccionar archivo..\",\n      dropHere: \"Arrastra los archivos aquí para subir.\",\n      done: \"Completado\",\n      fileTypes: \"Tipo de archivo\",\n      fileSizeLimit: \"Límite de tamaño de archivo\"\n    }\n  },\n  en: {\n    ui: {\n      thumbnail: \"thumbnail\",\n      choseFileButton: \"select file\",\n      dropHere: \"drop files here\",\n      done: \"done\",\n      fileTypes: \"file extensions\",\n      fileSizeLimit: \"file size limit\"\n    }\n  }\n};\n\nvar buildOptions = function buildOptions() {\n  var _this = this;\n\n  var p = {\n    multiple: this.multiple,\n    request: {\n      endpoint: this.uploadFileUrl,\n      inputName: this.uploadFileObjName,\n      //server side validate file info\n      params: {\n        fileSizeLimit: this.fileSizeLimit,\n        fileTypeExts: this.fileTypeExts\n      }\n    },\n    deleteFile: {\n      enabled: true,\n      method: \"POST\" //,\n      //'endpoint' : $webroot + 'upload/deleteUploadFile'\n    },\n    debug: true,\n    validation: {\n      allowedExtensions: this.fileTypeExts.split(\",\"),\n      sizeLimit: fileSize2Bytes(this.fileSizeLimit, true),\n      sizeLimitStr: this.fileSizeLimit,\n      image: {\n        maxHeight: this.imageMaxHeight,\n        maxWidth: this.imageMaxWidth,\n        minHeight: this.imageMinHeight,\n        minWidth: this.imageMinWidth\n      }\n    },\n    callbacks: {\n      //the callback when file upload finish\n      onComplete: function onComplete(id, name, json, xhr) {},\n      //the callback before delete file, return false can stop it.\n      onSubmitDelete: function onSubmitDelete(id) {}\n    }\n  };\n  if (this.language && this.language === \"cn\") {\n    p.messages = i18n.cn.messages;\n    p.text = i18n.cn.text;\n  }\n  if (this.callback && typeof this.callback === \"function\") {\n    p.callbacks.onComplete = function (id, name, json, xhr) {\n      if (json) _this.callback(json);\n    };\n  }\n  return p;\n};\n\nvar getI18n = function getI18n(language) {\n  switch (language) {\n    case \"en\":\n      return i18n.en.ui;\n    case \"es\":\n      return i18n.es.ui;\n    default:\n      return i18n.cn.ui;\n  }\n};\n\n\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.uploaderClass]},[(!_vm.multiple)?_c('div',{staticClass:\"single-upload\"},[(_vm.preview)?_c('div',{staticClass:\"image-box\"},[_c('img',{ref:\"simpleImg\",attrs:{\"src\":_vm.singleUploadImg,\"alt\":\"\",\"width\":_vm.previewWidth,\"height\":_vm.previewHeight}})]):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"upload\",staticClass:\"btn singleFileUpload uploader-button\"},[(_vm.buttonIcon)?_c('i',{staticClass:\"v-upload-iconfont icon-uploader-open\"}):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.buttonText?_vm.buttonText:_vm.ui.choseFileButton))])])]):_vm._e(),_vm._v(\" \"),(_vm.multiple)?_c('div',{ref:\"multipleUpload\",staticClass:\"upload-list\"}):_vm._e(),_vm._v(\" \"),(_vm.multiple)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"uploadArea\"},[_c('div',{staticClass:\"qq-uploader-selector qq-uploader qq-gallery\",staticStyle:{\"height\":\"100%\"},attrs:{\"qq-drop-area-text\":_vm.ui.dropHere}},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"qq-upload-button-selector qq-upload-button uploader-button\"},[_c('div',[(_vm.buttonIcon)?_c('i',{staticClass:\"v-upload-iconfont icon-uploader-open\"}):_vm._e(),_vm._v(\"\\n                    \"+_vm._s(_vm.buttonText?_vm.buttonText:_vm.ui.choseFileButton)+\"\\n                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"info-show\"},[_c('div',[_vm._v(\"\\n                    \"+_vm._s(_vm.ui.fileSizeLimit)+\"：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.fileSizeLimit)}}),_c('br'),_vm._v(\"\\n                    \"+_vm._s(_vm.ui.fileTypes)+\"：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.fileTypeExts)}})])]),_vm._v(\" \"),_vm._m(2)])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"qq-upload-list-selector qq-upload-list\",attrs:{\"role\":\"region\",\"aria-live\":\"polite\",\"aria-relevant\":\"additions removals\"}},[_c('li',[_c('span',{staticClass:\"qq-upload-status-text-selector qq-upload-status-text\",attrs:{\"role\":\"status\"}}),_vm._v(\" \"),_c('div',{staticClass:\"qq-progress-bar-container-selector qq-progress-bar-container\"},[_c('div',{staticClass:\"qq-progress-bar-selector qq-progress-bar\",attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"0\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"qq-upload-spinner-selector qq-upload-spinner\"}),_vm._v(\" \"),_c('div',{staticClass:\"qq-thumbnail-wrapper\"},[_c('img',{staticClass:\"qq-thumbnail-selector\",attrs:{\"qq-max-size\":\"120\",\"qq-server-scale\":\"\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-upload-cancel-selector qq-upload-cancel\",attrs:{\"type\":\"button\"}},[_vm._v(\"X\")]),_vm._v(\" \"),_c('button',{staticClass:\"qq-upload-retry-selector qq-upload-retry\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-retry-icon\",attrs:{\"aria-label\":\"Retry\"}}),_vm._v(\" Retry\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"qq-file-info\"},[_c('div',{staticClass:\"qq-file-name\"},[_c('span',{staticClass:\"qq-upload-file-selector qq-upload-file\"}),_vm._v(\" \"),_c('span',{staticClass:\"qq-edit-filename-icon-selector qq-edit-filename-icon\",attrs:{\"aria-label\":\"Edit filename\"}})]),_vm._v(\" \"),_c('input',{staticClass:\"qq-edit-filename-selector qq-edit-filename\",attrs:{\"tabindex\":\"0\",\"type\":\"text\"}}),_vm._v(\" \"),_c('span',{staticClass:\"qq-upload-size-selector qq-upload-size\"}),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-delete-selector qq-upload-delete\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-delete-icon\",attrs:{\"aria-label\":\"Delete\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-pause-selector qq-upload-pause\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-pause-icon\",attrs:{\"aria-label\":\"Pause\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-continue-selector qq-upload-continue\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-continue-icon\",attrs:{\"aria-label\":\"Continue\"}})])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qq-upload-drop-area-selector qq-upload-drop-area\",attrs:{\"qq-hide-dropzone\":\"\"}},[_c('span',{staticClass:\"qq-upload-drop-area-text-selector\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qq-total-progress-bar-container-selector qq-total-progress-bar-container\"},[_c('div',{staticClass:\"qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar\",attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"0\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// v-uploader.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 0\n// module chunks = 0","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = require('./listToStyles')\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/addStylesClient.js\n// module id = 1\n// module chunks = 0","<template>\n    <div :class=\"[uploaderClass]\">\n        <!-- single upload file mode -->\n        <div class=\"single-upload\" v-if=\"!multiple\">\n            <div class=\"image-box\" v-if=\"preview\">\n                <img :src=\"singleUploadImg\" alt=\"\" ref=\"simpleImg\" :width=\"previewWidth\" :height=\"previewHeight\">\n            </div>\n            <div class=\"btn singleFileUpload uploader-button\" ref=\"upload\" >\n                <i class=\"v-upload-iconfont icon-uploader-open\" v-if=\"buttonIcon\"></i>\n                <span>{{buttonText?buttonText:ui.choseFileButton}}</span>\n            </div>\n        </div>\n\n        <!-- multiple upload file mode -->\n        <div v-if=\"multiple\" ref=\"multipleUpload\" class=\"upload-list\">\n\n        </div>\n\n        <div v-if=\"multiple\" v-show=\"false\" ref=\"uploadArea\">\n            <div class=\"qq-uploader-selector qq-uploader qq-gallery\"\n                 :qq-drop-area-text=\"ui.dropHere\"\n                 style=\"height:100%;\">\n                <ul class=\"qq-upload-list-selector qq-upload-list\"\n                    role=\"region\"\n                    aria-live=\"polite\"\n                    aria-relevant=\"additions removals\">\n                    <li>\n                        <span role=\"status\" class=\"qq-upload-status-text-selector qq-upload-status-text\"></span>\n                        <div class=\"qq-progress-bar-container-selector qq-progress-bar-container\">\n                            <div role=\"progressbar\"\n                                 aria-valuenow=\"0\"\n                                 aria-valuemin=\"0\"\n                                 aria-valuemax=\"100\"\n                                 class=\"qq-progress-bar-selector qq-progress-bar\"></div>\n                        </div>\n                        <span class=\"qq-upload-spinner-selector qq-upload-spinner\"></span>\n                        <div class=\"qq-thumbnail-wrapper\">\n                            <img class=\"qq-thumbnail-selector\" qq-max-size=\"120\" qq-server-scale>\n                        </div>\n                        <button type=\"button\" class=\"qq-upload-cancel-selector qq-upload-cancel\">X</button>\n                        <button type=\"button\" class=\"qq-upload-retry-selector qq-upload-retry\">\n                            <span class=\"qq-btn qq-retry-icon\" aria-label=\"Retry\"></span> Retry\n                        </button>\n\n                        <div class=\"qq-file-info\">\n                            <div class=\"qq-file-name\">\n                                <span class=\"qq-upload-file-selector qq-upload-file\"></span>\n                                <span class=\"qq-edit-filename-icon-selector qq-edit-filename-icon\"\n                                      aria-label=\"Edit filename\"></span>\n                            </div>\n                            <input class=\"qq-edit-filename-selector qq-edit-filename\" tabindex=\"0\" type=\"text\">\n                            <span class=\"qq-upload-size-selector qq-upload-size\"></span>\n                            <button type=\"button\" class=\"qq-btn qq-upload-delete-selector qq-upload-delete\">\n                                <span class=\"qq-btn qq-delete-icon\" aria-label=\"Delete\"></span>\n                            </button>\n                            <button type=\"button\" class=\"qq-btn qq-upload-pause-selector qq-upload-pause\">\n                                <span class=\"qq-btn qq-pause-icon\" aria-label=\"Pause\"></span>\n                            </button>\n                            <button type=\"button\" class=\"qq-btn qq-upload-continue-selector qq-upload-continue\">\n                                <span class=\"qq-btn qq-continue-icon\" aria-label=\"Continue\"></span>\n                            </button>\n                        </div>\n                    </li>\n                </ul>\n\n\n                <div class=\"qq-upload-drop-area-selector qq-upload-drop-area\" qq-hide-dropzone>\n                    <span class=\"qq-upload-drop-area-text-selector\"></span>\n                </div>\n\n\n                <div class=\"qq-upload-button-selector qq-upload-button uploader-button\">\n                    <div>\n                        <i class=\"v-upload-iconfont icon-uploader-open\" v-if=\"buttonIcon\"></i>\n                        {{buttonText?buttonText:ui.choseFileButton}}\n                    </div>\n                </div>\n                <div class=\"info-show\">\n                    <div>\n                        {{ui.fileSizeLimit}}：<span v-text=\"fileSizeLimit\"></span><br/>\n                        {{ui.fileTypes}}：<span v-text=\"fileTypeExts\"></span>\n                    </div>\n                </div>\n\n                <!--<div class=\"qq-upload-button-selector qq-upload-button file-upload-finish\" style=\"float:right;\">\n                    <div><i class=\"iconfont icon-uploader-done\"></i> {{ui.done}}</div>\n                </div>-->\n\n                <div class=\"qq-total-progress-bar-container-selector qq-total-progress-bar-container\">\n                    <div role=\"progressbar\"\n                         aria-valuenow=\"0\"\n                         aria-valuemin=\"0\"\n                         aria-valuemax=\"100\"\n                         class=\"qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import fu from 'fine-uploader';\n    import 'fine-uploader/fine-uploader/fine-uploader-gallery.min.css';\n    import holder from 'holderjs';\n\n    import * as cs from './constants';\n\n    export default {\n        name: \"v-uploader\",\n        props: {\n            language: {\n                type: String,\n                default: 'cn'\n            },\n            //show preview box in single upload mode\n            preview: {\n                type: Boolean,\n                default: true\n            },\n            previewImg: String,\n            buttonText: String,\n            buttonIcon: {\n                type: Boolean,\n                default: true\n            },\n            previewWidth: {\n                type: Number,\n                default: 200\n            },\n            previewHeight: {\n                type: Number,\n                default: 150\n            },\n            /**\n             * file upload type\n             * true: multiple file upload\n             * false: single file upload(default)\n             */\n            multiple: {\n                type: Boolean,\n                default: false\n            },\n            //upload file object name\n            uploadFileObjName: {\n                type: String,\n                default: 'uploadFileObj'\n            },\n            //Maximum number of items that can be potentially uploaded in this session.\n            //set 0 to unlimited\n            itemLimit: {\n                type: Number,\n                default: 0\n            },\n            //upload file size limit\n            fileSizeLimit: {\n                type: String,\n                default: '5MB'\n            },\n            // allow to upload file types\n            fileTypeExts: {\n                type: String,\n                default: 'jpeg,jpg,gif,png'\n            },\n            imageMaxHeight: {\n                type: Number,\n                default: 0\n            },\n            imageMaxWidth: {\n                type: Number,\n                default: 0\n            },\n            imageMinHeight: {\n                type: Number,\n                default: 0\n            },\n            imageMinWidth: {\n                type: Number,\n                default: 0\n            },\n            /**\n             * the callback before file upload\n             *\n             * @param id - file id\n             * @param name - file name\n             *\n             * @return boolean - return false to abort file upload\n             */\n            beforeUpload: Function,\n            //file uploader service url\n            uploadFileUrl: {\n                type: String,\n                default: ''\n            },\n            //file delete service url\n            deleteFileUrl: {\n                type: String,\n                default: ''\n            },\n            //set the way to show upload message(upload fail message)\n            showMessage: {\n                type: Function,\n                default: undefined\n            }\n        },\n        data(){\n            return {\n                uploadedFiles: [],\n                deleteIndexs: [],\n\n                options: {},\n                /**\n                 * upload success callback\n                 * @param id - file id\n                 * @param name - file name\n                 * @param json - uploaded file detail info\n                 */\n                callback: undefined,\n\n                singleUploadImg: '',\n                ui: {},\n                //fileSizeLimit: 0,\n                uploaderClass: {\n                    'v-uploader': true,\n                    'single-mode': false,\n                    'multiple-mode': false\n                }\n            };\n        },\n        watch:{\n            previewImg(val){\n                if(val) this.singleUploadImg = val;\n            }\n        },\n        beforeMount(){\n            let that = this;\n            if(this.multiple) this.uploaderClass['multiple-mode'] = true;\n            else this.uploaderClass['single-mode'] = true;\n\n            this.ui = cs.getI18n(this.language);\n            let imgHolder = `holder.js/${this.previewWidth}x${this.previewHeight}?text=${this.ui.thumbnail}&size=16`;\n            this.singleUploadImg = this.previewImg?this.previewImg:imgHolder;\n\n            if(!this.multiple) {\n                this.callback = data => {\n                    if(data && typeof(data.success) !== 'undefined' && data.success){\n                        if(that.preview) that.singleUploadImg = data.url;\n                        that.$emit('done', [data]);\n                    }\n                };\n            }else{\n                this.callback = data => {\n                    if(data && typeof(data.success) !== 'undefined' && data.success) {\n                        that.uploadedFiles.push(data);\n                    }\n                };\n            }\n            this.options = cs.buildOptions.call(this);\n        },\n        mounted(){\n            let that = this;\n\n            if(!this.multiple) {\n                if(this.preview && !this.previewImg) holder.run({ images: this.$refs.simpleImg });\n                this.options.button = this.$refs.upload;\n                //upload error callback\n                //basic mode work only\n                that.options.callbacks.onError = (id, name, errorReason, xhr) => {\n                    if(that.showMessage && typeof that.showMessage === 'function')\n                        that.showMessage(that, errorReason);\n                };\n                if(this.beforeUpload && typeof this.beforeUpload === 'function')\n                    that.options.callbacks.onSubmit = this.beforeUpload;\n                new fu.FineUploaderBasic(that.options);\n            }else{\n                that.options.deleteFile.endpoint = this.deleteFileUrl;\n                that.options.template = this.$refs.uploadArea;\n                that.options.element = this.$refs.multipleUpload;\n                that.options.showMessage = message => {\n                    if(that.showMessage && typeof that.showMessage === 'function') that.showMessage(that, message);\n                }\n                that.options.callbacks.onDelete = id => {\n                    that.deleteIndexs.push(id);\n                    that.$emit('done', that.uploadedFiles.filter((val,index)=>{\n                        return !that.deleteIndexs.includes(index);\n                    }));\n                };\n                that.options.callbacks.onAllComplete = (succeeded, failed) => {\n                    that.$emit('done', that.uploadedFiles);\n                };\n                if(this.itemLimit) this.options.validation.itemLimit = this.itemLimit;\n                if(this.beforeUpload && typeof(this.beforeUpload) === 'function')\n                    that.options.callbacks.onSubmit = this.beforeUpload;\n                new fu.FineUploader(that.options);\n            }\n        }\n    };\n</script>\n\n<style lang=\"scss\" scoped>\n    $borderRadius: 2px;\n    div.v-uploader{\n        margin-bottom: 10px;\n        &.single-mode { display: inline-block; }\n        &.multiple-mode { display: block; }\n        .uploader-button {\n            -webkit-border-radius: 2px;\n            -moz-border-radius: 2px;\n            border-radius: 2px;\n            -webkit-box-shadow: 0 0 2px rgba(0,0,0,.12), 0 2px 2px rgba(0,0,0,.2);\n            box-shadow: 0 0 2px rgba(0,0,0,.12), 0 2px 2px rgba(0,0,0,.2);\n            -webkit-transition: all .2s ease-in-out;\n            -moz-transition: all .2s ease-in-out;\n            transition: all .2s ease-in-out;\n            color: #212121;\n            background: #fff;\n            border-color: #fff;\n            outline: 0;\n            width: auto;\n            display: inline-block;\n            padding: 6px 12px;\n            margin-bottom: 0;\n            font-size: 14px;\n            font-weight: 400;\n            line-height: 1.42857143;\n            i { font-size: 13px; }\n            &:active {\n                -webkit-box-shadow: 0 10px 20px rgba(0,0,0,.2), 0 6px 6px rgba(0,0,0,.23);\n                box-shadow: 0 10px 20px rgba(0,0,0,.2), 0 6px 6px rgba(0,0,0,.23);\n            }\n        }\n\n        div.single-upload {\n            display: inline-block;margin-right: 5px;text-align: center;\n            div.image-box {\n                -webkit-border-radius: $borderRadius;\n                -moz-border-radius: $borderRadius;\n                border-radius: $borderRadius;\n                -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);\n                -moz-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);\n                box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);\n                border: 1px solid #DDDDDD;\n                padding: 5px;\n                margin-bottom: 10px;\n            }\n        }\n        div.upload-list {\n            width: 100%;\n            .qq-gallery {\n                &.qq-uploader { padding: 10px; }\n                .qq-upload-list {\n                    height: 205px;padding: 1px 0 10px 1px;overflow-x: hidden;margin-bottom: 10px;\n                    li{\n                        margin: 0 10px 10px 0;height: 180px;\n                        &.qq-upload-success { background-color: #DFF0D8; }\n                    }\n                }\n                .qq-upload-button {}\n                .file-upload-finish { cursor: pointer;color: #fff;background: #2196F3;border-color: #2196F3; }\n                .info-show {\n                    float: left;line-height: 18px;white-space:nowrap;padding: 0 5px;color: #333333;\n                    span { color: #999999;margin-right: 10px;font-family: 'Consolas'; }\n                }\n            }\n        }\n    }\n    @font-face {font-family: \"v-upload-iconfont\";\n        src: url('data:image/eot;base64,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'); /* IE9*/\n        src: url('data:image/eot;base64,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?t=1524818269295#iefix') format('embedded-opentype'), /* IE6-IE8 */\n        url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAWkAAsAAAAACBgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAAQwAAAFZW7kiCY21hcAAAAYAAAABmAAABnM+SbChnbHlmAAAB6AAAAbEAAAHYVwg4OmhlYWQAAAOcAAAALwAAADYRdEjPaGhlYQAAA8wAAAAeAAAAJAghA85obXR4AAAD7AAAABAAAAAQEDIAAGxvY2EAAAP8AAAACgAAAAoBYgDabWF4cAAABAgAAAAfAAAAIAETAF1uYW1lAAAEKAAAAUUAAAJtPlT+fXBvc3QAAAVwAAAAMQAAAELmlhu2eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk4WWcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYKp41Mzf8b2CIYW5gaAAKM4LkAOEpDAUAeJzFkLENwCAMBN+YRCjKKCmjDEOZKiPQs6vXILahYQIenbFfLxkBYAPAyqVEgD4QTK+65D7jcD/i0TnpCXoXyVJbmzoTeSJ5x5akHctE61bPOr3eY7L/LgN9ouSO+VI7CD9X5RLnAAB4nCWRu27UQBSG54xj7yVeG48vY89efMOeoMBKOOPdgmS3AAqIi4hUSKFIlYakQkpDsQ0SBQVa3gAhEWqQtskrIPIKCHp6xBrG5OjoP9IvHen/zkEqQn+/K5eKj2y0he6iB+gAIdC2ITHwEGIuxngb3Fh1qWMoPOVxK03Gyh7QRHO8YiJyqrU0EwwYwU5cTPgYcyjFDN+DwhsCBH12SLIBUd5C1+ejV/Vj/B7cMB2Yszv1o9tzp4js9rlOSEDIm7amqm2MN0wDTqnXUTtdrf6gmsy9DG/hEPSAs+ppL+qT49fibJjRDsBiAXY/Mj7OLWbJfsk8mwStG722z3rpTQfOf276tj7MfyBZSiMb95UpshBHDyWnSONEptdcpwk/h0kWlyKXZr4HIpdH0FxrOgPVaQgbu7TE5BotbmSn8Kin/A7X76gwL7ojfEaFcbG5fgGriNYrGkVUypI9wX/Yp+AwXy/L/f1yJSqYiuo0FHoHnjuBddXrOsy60k+OPLmRNWu1/yXkz9Lk22irEjgTVSVIJY4GjMjY/2EWeInk9zLeosBh8Xn3F0a7X68H+gf3elGXAAAAeJxjYGRgYADiuGdCavH8Nl8ZuFkYQOA6J1Msgv7/kMWZ2RzI5WBgAokCAOhECBYAeJxjYGRgYG7438AQw+LJAAQszgyMDKiABQBTJAL5AAAEAAAAA+kAAARJAAAEAAAAAAAAAAB2ANoA7AAAeJxjYGRgYGBhCGRgZQABJiDmAkIGhv9gPgMAERIBcQB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICFkYmRmZGFkZWBsYI3LT8nJbVIN78gNU83nyUlPy+VgQEAXuoHSgAAAA==') format('woff'),\n        url('data:image/ttf;base64,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?t=1524818269295') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/\n        url('data:image/svg;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPCEtLQoyMDEzLTktMzA6IENyZWF0ZWQuCi0tPgo8c3ZnPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgaWNvbmZvbnQKPC9tZXRhZGF0YT4KPGRlZnM+Cgo8Zm9udCBpZD0iaWNvbmZvbnQiIGhvcml6LWFkdi14PSIxMDI0IiA+CiAgPGZvbnQtZmFjZQogICAgZm9udC1mYW1pbHk9Imljb25mb250IgogICAgZm9udC13ZWlnaHQ9IjUwMCIKICAgIGZvbnQtc3RyZXRjaD0ibm9ybWFsIgogICAgdW5pdHMtcGVyLWVtPSIxMDI0IgogICAgYXNjZW50PSI4OTYiCiAgICBkZXNjZW50PSItMTI4IgogIC8+CiAgICA8bWlzc2luZy1nbHlwaCAvPgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0ieCIgdW5pY29kZT0ieCIgaG9yaXotYWR2LXg9IjEwMDEiCmQ9Ik0yODEgNTQzcS0yNyAtMSAtNTMgLTFoLTgzcS0xOCAwIC0zNi41IC02dC0zMi41IC0xOC41dC0yMyAtMzJ0LTkgLTQ1LjV2LTc2aDkxMnY0MXEwIDE2IC0wLjUgMzB0LTAuNSAxOHEwIDEzIC01IDI5dC0xNyAyOS41dC0zMS41IDIyLjV0LTQ5LjUgOWgtMTMzdi05N2gtNDM4djk3ek05NTUgMzEwdi01MnEwIC0yMyAwLjUgLTUydDAuNSAtNTh0LTEwLjUgLTQ3LjV0LTI2IC0zMHQtMzMgLTE2dC0zMS41IC00LjVxLTE0IC0xIC0yOS41IC0wLjUKdC0yOS41IDAuNWgtMzJsLTQ1IDEyOGgtNDM5bC00NCAtMTI4aC0yOWgtMzRxLTIwIDAgLTQ1IDFxLTI1IDAgLTQxIDkuNXQtMjUuNSAyM3QtMTMuNSAyOS41dC00IDMwdjE2N2g5MTF6TTE2MyAyNDdxLTEyIDAgLTIxIC04LjV0LTkgLTIxLjV0OSAtMjEuNXQyMSAtOC41cTEzIDAgMjIgOC41dDkgMjEuNXQtOSAyMS41dC0yMiA4LjV6TTMxNiAxMjNxLTggLTI2IC0xNCAtNDhxLTUgLTE5IC0xMC41IC0zN3QtNy41IC0yNXQtMyAtMTV0MSAtMTQuNQp0OS41IC0xMC41dDIxLjUgLTRoMzdoNjdoODFoODBoNjRoMzZxMjMgMCAzNCAxMnQyIDM4cS01IDEzIC05LjUgMzAuNXQtOS41IDM0LjVxLTUgMTkgLTExIDM5aC0zNjh6TTMzNiA0OTh2MjI4cTAgMTEgMi41IDIzdDEwIDIxLjV0MjAuNSAxNS41dDM0IDZoMTg4cTMxIDAgNTEuNSAtMTQuNXQyMC41IC01Mi41di0yMjdoLTMyN3oiIC8+CiAgICAKCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJmb2xkZXItb3Blbi1vIiB1bmljb2RlPSImIzU5MDExOyIgZD0iTTEwMTcuNzE0Mjg2IDM2NHEwIDIwLTMwLjI4NTcxNSAyMEgzNjUuNzE0Mjg2cS0yMi44NTcxNDMgMC00OC44NTcxNDMtMTIuMjg1NzE0VDI3NiAzNDEuNzE0Mjg2bC0xNjgtMjA3LjQyODU3MnEtMTAuMjg1NzE0LTEzLjcxNDI4Ni0xMC4yODU3MTQtMjIuODU3MTQzIDAtMjAgMzAuMjg1NzE0LTIwaDYyMS43MTQyODZxMjIuODU3MTQzIDAgNDkuMTQyODU3IDEyLjU3MTQyOXQ0MC41NzE0MjggMzAuMjg1NzE0bDE2OCAyMDcuNDI4NTcycTEwLjI4NTcxNCAxMi41NzE0MjkgMTAuMjg1NzE1IDIyLjI4NTcxNHpNMzY1LjcxNDI4NiA0NTcuMTQyODU3aDQzOC44NTcxNDNWNTQ4LjU3MTQyOXEwIDIyLjg1NzE0My0xNiAzOC44NTcxNDJ0LTM4Ljg1NzE0MyAxNkg0MjAuNTcxNDI5cS0yMi44NTcxNDMgMC0zOC44NTcxNDMgMTZ0LTE2IDM4Ljg1NzE0M3YzNi41NzE0MjlxMCAyMi44NTcxNDMtMTYgMzguODU3MTQzdC0zOC44NTcxNDMgMTZIMTI4cS0yMi44NTcxNDMgMC0zOC44NTcxNDMtMTZ0LTE2LTM4Ljg1NzE0M3YtNDg3LjQyODU3MmwxNDYuMjg1NzE0IDE4MHEyNS4xNDI4NTcgMzAuMjg1NzE0IDY2LjI4NTcxNSA1MFQzNjUuNzE0Mjg2IDQ1Ny4xNDI4NTd6IG03MjUuMTQyODU3LTkzLjE0Mjg1N3EwLTM1LjQyODU3MS0yNi4yODU3MTQtNjguNTcxNDI5bC0xNjguNTcxNDI5LTIwNy40Mjg1NzFxLTI0LjU3MTQyOS0zMC4yODU3MTQtNjYuMjg1NzE0LTUwdC04MC0xOS43MTQyODZIMTI4cS01Mi41NzE0MjkgMC05MC4yODU3MTQgMzcuNzE0Mjg2VDAgMTQ2LjI4NTcxNFY2OTQuODU3MTQzcTAgNTIuNTcxNDI5IDM3LjcxNDI4NiA5MC4yODU3MTR0OTAuMjg1NzE0IDM3LjcxNDI4NmgxODIuODU3MTQzcTUyLjU3MTQyOSAwIDkwLjI4NTcxNC0zNy43MTQyODZ0MzcuNzE0Mjg2LTkwLjI4NTcxNHYtMTguMjg1NzE0aDMxMC44NTcxNDNxNTIuNTcxNDI5IDAgOTAuMjg1NzE0LTM3LjcxNDI4NnQzNy43MTQyODYtOTAuMjg1NzE0di05MS40Mjg1NzJoMTA5LjcxNDI4NXEzMC44NTcxNDMgMCA1Ni41NzE0MjktMTR0MzguMjg1NzE0LTQwLjI4NTcxNHE4LjU3MTQyOS0xOC4yODU3MTQgOC41NzE0MjktMzguODU3MTQzeiIgIGhvcml6LWFkdi14PSIxMDk3IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9ImRvbmUiIHVuaWNvZGU9IiYjNTg5NzA7IiBkPSJNMzg0IDIwNC44TDIwNC44IDM4NGwtNTkuNzMzMzMzLTU5LjczMzMzM0wzODQgODUuMzMzMzMzIDg5NiA1OTcuMzMzMzMzbC01OS43MzMzMzMgNTkuNzMzMzM0eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAoKCiAgPC9mb250Pgo8L2RlZnM+PC9zdmc+Cg==?t=1524818269295#v-upload-iconfont') format('svg'); /* iOS 4.1- */\n    }\n\n    .v-upload-iconfont {\n        font-family:\"v-upload-iconfont\" !important;\n        font-size:16px;\n        font-style:normal;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .icon-uploader-open:before { content: \"\\e683\"; }\n    .icon-uploader-done:before { content: \"\\e65a\"; }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/Uploader.vue","import uploader from './Uploader.vue';\n\nconst Plugin = {\n    install(Vue, options = {}){\n        if(Object.keys(options).length){\n            if(typeof options.language === 'string') uploader.props.language.default = options.language;\n            if(typeof options.preview === 'boolean') uploader.props.preview.default = options.preview;\n            if(typeof options.buttonText === 'string') uploader.props.buttonText.default = options.buttonText;\n            if(typeof options.buttonIcon === 'boolean') uploader.props.buttonIcon.default = options.buttonIcon;\n            if(typeof options.previewWidth === 'number') uploader.props.previewWidth.default = options.previewWidth;\n            if(typeof options.previewHeight === 'number') uploader.props.previewHeight.default = options.previewHeight;\n            if(typeof options.multiple === 'boolean') uploader.props.multiple.default = options.multiple;\n            if(typeof options.uploadFileObjName === 'string') uploader.props.uploadFileObjName.default = options.uploadFileObjName;\n            if(typeof options.itemLimit === 'number') uploader.props.itemLimit.default = options.itemLimit;\n            if(typeof options.fileSizeLimit === 'string') uploader.props.fileSizeLimit.default = options.fileSizeLimit;\n            if(typeof options.fileTypeExts === 'string') uploader.props.fileTypeExts.default = options.fileTypeExts;\n            if(typeof options.imageMaxHeight === 'number') uploader.props.imageMaxHeight.default = options.imageMaxHeight;\n            if(typeof options.imageMaxWidth === 'number') uploader.props.imageMaxWidth.default = options.imageMaxWidth;\n            if(typeof options.imageMinHeight === 'number') uploader.props.imageMinHeight.default = options.imageMinHeight;\n            if(typeof options.imageMinWidth === 'number') uploader.props.imageMinWidth.default = options.imageMinWidth;\n\n            if(typeof options.uploadFileUrl === 'string') uploader.props.uploadFileUrl.default = options.uploadFileUrl;\n            if(typeof options.deleteFileUrl === 'string') uploader.props.deleteFileUrl.default = options.deleteFileUrl;\n            if(typeof options.showMessage === 'function') uploader.props.showMessage.default = options.showMessage;\n        }\n        Vue.component(uploader.name, uploader);\n    }\n};\n\nexport default Plugin;\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eca14c4c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Uploader.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Uploader.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Uploader.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eca14c4c\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Uploader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eca14c4c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Uploader.vue\n// module id = 4\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eca14c4c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/sass-loader/lib/loader.js!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Uploader.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"d79e3958\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-eca14c4c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/Uploader.vue\n// module id = 5\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div.v-uploader[data-v-eca14c4c]{margin-bottom:10px}div.v-uploader.single-mode[data-v-eca14c4c]{display:inline-block}div.v-uploader.multiple-mode[data-v-eca14c4c]{display:block}div.v-uploader .uploader-button[data-v-eca14c4c]{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.2);box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.2);-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;transition:all .2s ease-in-out;color:#212121;background:#fff;border-color:#fff;outline:0;width:auto;display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143}div.v-uploader .uploader-button i[data-v-eca14c4c]{font-size:13px}div.v-uploader .uploader-button[data-v-eca14c4c]:active{-webkit-box-shadow:0 10px 20px rgba(0,0,0,.2),0 6px 6px rgba(0,0,0,.23);box-shadow:0 10px 20px rgba(0,0,0,.2),0 6px 6px rgba(0,0,0,.23)}div.v-uploader div.single-upload[data-v-eca14c4c]{display:inline-block;margin-right:5px;text-align:center}div.v-uploader div.single-upload div.image-box[data-v-eca14c4c]{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 1px 8px rgba(0,0,0,.1);-moz-box-shadow:0 1px 8px rgba(0,0,0,.1);box-shadow:0 1px 8px rgba(0,0,0,.1);border:1px solid #ddd;padding:5px;margin-bottom:10px}div.v-uploader div.upload-list[data-v-eca14c4c]{width:100%}div.v-uploader div.upload-list .qq-gallery.qq-uploader[data-v-eca14c4c]{padding:10px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list[data-v-eca14c4c]{height:205px;padding:1px 0 10px 1px;overflow-x:hidden;margin-bottom:10px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list li[data-v-eca14c4c]{margin:0 10px 10px 0;height:180px}div.v-uploader div.upload-list .qq-gallery .qq-upload-list li.qq-upload-success[data-v-eca14c4c]{background-color:#dff0d8}div.v-uploader div.upload-list .qq-gallery .file-upload-finish[data-v-eca14c4c]{cursor:pointer;color:#fff;background:#2196f3;border-color:#2196f3}div.v-uploader div.upload-list .qq-gallery .info-show[data-v-eca14c4c]{float:left;line-height:18px;white-space:nowrap;padding:0 5px;color:#333}div.v-uploader div.upload-list .qq-gallery .info-show span[data-v-eca14c4c]{color:#999;margin-right:10px;font-family:Consolas}@font-face{font-family:v-upload-iconfont;src:url(\\\"data:image/eot;base64,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\\\");src:url(\\\"data:image/eot;base64,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?t=1524818269295#iefix\\\") format(\\\"embedded-opentype\\\"),url(\\\"data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAWkAAsAAAAACBgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAAQwAAAFZW7kiCY21hcAAAAYAAAABmAAABnM+SbChnbHlmAAAB6AAAAbEAAAHYVwg4OmhlYWQAAAOcAAAALwAAADYRdEjPaGhlYQAAA8wAAAAeAAAAJAghA85obXR4AAAD7AAAABAAAAAQEDIAAGxvY2EAAAP8AAAACgAAAAoBYgDabWF4cAAABAgAAAAfAAAAIAETAF1uYW1lAAAEKAAAAUUAAAJtPlT+fXBvc3QAAAVwAAAAMQAAAELmlhu2eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk4WWcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYKp41Mzf8b2CIYW5gaAAKM4LkAOEpDAUAeJzFkLENwCAMBN+YRCjKKCmjDEOZKiPQs6vXILahYQIenbFfLxkBYAPAyqVEgD4QTK+65D7jcD/i0TnpCXoXyVJbmzoTeSJ5x5akHctE61bPOr3eY7L/LgN9ouSO+VI7CD9X5RLnAAB4nCWRu27UQBSG54xj7yVeG48vY89efMOeoMBKOOPdgmS3AAqIi4hUSKFIlYakQkpDsQ0SBQVa3gAhEWqQtskrIPIKCHp6xBrG5OjoP9IvHen/zkEqQn+/K5eKj2y0he6iB+gAIdC2ITHwEGIuxngb3Fh1qWMoPOVxK03Gyh7QRHO8YiJyqrU0EwwYwU5cTPgYcyjFDN+DwhsCBH12SLIBUd5C1+ejV/Vj/B7cMB2Yszv1o9tzp4js9rlOSEDIm7amqm2MN0wDTqnXUTtdrf6gmsy9DG/hEPSAs+ppL+qT49fibJjRDsBiAXY/Mj7OLWbJfsk8mwStG722z3rpTQfOf276tj7MfyBZSiMb95UpshBHDyWnSONEptdcpwk/h0kWlyKXZr4HIpdH0FxrOgPVaQgbu7TE5BotbmSn8Kin/A7X76gwL7ojfEaFcbG5fgGriNYrGkVUypI9wX/Yp+AwXy/L/f1yJSqYiuo0FHoHnjuBddXrOsy60k+OPLmRNWu1/yXkz9Lk22irEjgTVSVIJY4GjMjY/2EWeInk9zLeosBh8Xn3F0a7X68H+gf3elGXAAAAeJxjYGRgYADiuGdCavH8Nl8ZuFkYQOA6J1Msgv7/kMWZ2RzI5WBgAokCAOhECBYAeJxjYGRgYG7438AQw+LJAAQszgyMDKiABQBTJAL5AAAEAAAAA+kAAARJAAAEAAAAAAAAAAB2ANoA7AAAeJxjYGRgYGBhCGRgZQABJiDmAkIGhv9gPgMAERIBcQB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxjYGKAAC4G7ICFkYmRmZGFkZWBsYI3LT8nJbVIN78gNU83nyUlPy+VgQEAXuoHSgAAAA==\\\") format(\\\"woff\\\"),url(\\\"data:image/ttf;base64,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?t=1524818269295\\\") format(\\\"truetype\\\"),url(\\\"data:image/svg;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPCEtLQoyMDEzLTktMzA6IENyZWF0ZWQuCi0tPgo8c3ZnPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgaWNvbmZvbnQKPC9tZXRhZGF0YT4KPGRlZnM+Cgo8Zm9udCBpZD0iaWNvbmZvbnQiIGhvcml6LWFkdi14PSIxMDI0IiA+CiAgPGZvbnQtZmFjZQogICAgZm9udC1mYW1pbHk9Imljb25mb250IgogICAgZm9udC13ZWlnaHQ9IjUwMCIKICAgIGZvbnQtc3RyZXRjaD0ibm9ybWFsIgogICAgdW5pdHMtcGVyLWVtPSIxMDI0IgogICAgYXNjZW50PSI4OTYiCiAgICBkZXNjZW50PSItMTI4IgogIC8+CiAgICA8bWlzc2luZy1nbHlwaCAvPgogICAgCiAgICA8Z2x5cGggZ2x5cGgtbmFtZT0ieCIgdW5pY29kZT0ieCIgaG9yaXotYWR2LXg9IjEwMDEiCmQ9Ik0yODEgNTQzcS0yNyAtMSAtNTMgLTFoLTgzcS0xOCAwIC0zNi41IC02dC0zMi41IC0xOC41dC0yMyAtMzJ0LTkgLTQ1LjV2LTc2aDkxMnY0MXEwIDE2IC0wLjUgMzB0LTAuNSAxOHEwIDEzIC01IDI5dC0xNyAyOS41dC0zMS41IDIyLjV0LTQ5LjUgOWgtMTMzdi05N2gtNDM4djk3ek05NTUgMzEwdi01MnEwIC0yMyAwLjUgLTUydDAuNSAtNTh0LTEwLjUgLTQ3LjV0LTI2IC0zMHQtMzMgLTE2dC0zMS41IC00LjVxLTE0IC0xIC0yOS41IC0wLjUKdC0yOS41IDAuNWgtMzJsLTQ1IDEyOGgtNDM5bC00NCAtMTI4aC0yOWgtMzRxLTIwIDAgLTQ1IDFxLTI1IDAgLTQxIDkuNXQtMjUuNSAyM3QtMTMuNSAyOS41dC00IDMwdjE2N2g5MTF6TTE2MyAyNDdxLTEyIDAgLTIxIC04LjV0LTkgLTIxLjV0OSAtMjEuNXQyMSAtOC41cTEzIDAgMjIgOC41dDkgMjEuNXQtOSAyMS41dC0yMiA4LjV6TTMxNiAxMjNxLTggLTI2IC0xNCAtNDhxLTUgLTE5IC0xMC41IC0zN3QtNy41IC0yNXQtMyAtMTV0MSAtMTQuNQp0OS41IC0xMC41dDIxLjUgLTRoMzdoNjdoODFoODBoNjRoMzZxMjMgMCAzNCAxMnQyIDM4cS01IDEzIC05LjUgMzAuNXQtOS41IDM0LjVxLTUgMTkgLTExIDM5aC0zNjh6TTMzNiA0OTh2MjI4cTAgMTEgMi41IDIzdDEwIDIxLjV0MjAuNSAxNS41dDM0IDZoMTg4cTMxIDAgNTEuNSAtMTQuNXQyMC41IC01Mi41di0yMjdoLTMyN3oiIC8+CiAgICAKCiAgICAKICAgIDxnbHlwaCBnbHlwaC1uYW1lPSJmb2xkZXItb3Blbi1vIiB1bmljb2RlPSImIzU5MDExOyIgZD0iTTEwMTcuNzE0Mjg2IDM2NHEwIDIwLTMwLjI4NTcxNSAyMEgzNjUuNzE0Mjg2cS0yMi44NTcxNDMgMC00OC44NTcxNDMtMTIuMjg1NzE0VDI3NiAzNDEuNzE0Mjg2bC0xNjgtMjA3LjQyODU3MnEtMTAuMjg1NzE0LTEzLjcxNDI4Ni0xMC4yODU3MTQtMjIuODU3MTQzIDAtMjAgMzAuMjg1NzE0LTIwaDYyMS43MTQyODZxMjIuODU3MTQzIDAgNDkuMTQyODU3IDEyLjU3MTQyOXQ0MC41NzE0MjggMzAuMjg1NzE0bDE2OCAyMDcuNDI4NTcycTEwLjI4NTcxNCAxMi41NzE0MjkgMTAuMjg1NzE1IDIyLjI4NTcxNHpNMzY1LjcxNDI4NiA0NTcuMTQyODU3aDQzOC44NTcxNDNWNTQ4LjU3MTQyOXEwIDIyLjg1NzE0My0xNiAzOC44NTcxNDJ0LTM4Ljg1NzE0MyAxNkg0MjAuNTcxNDI5cS0yMi44NTcxNDMgMC0zOC44NTcxNDMgMTZ0LTE2IDM4Ljg1NzE0M3YzNi41NzE0MjlxMCAyMi44NTcxNDMtMTYgMzguODU3MTQzdC0zOC44NTcxNDMgMTZIMTI4cS0yMi44NTcxNDMgMC0zOC44NTcxNDMtMTZ0LTE2LTM4Ljg1NzE0M3YtNDg3LjQyODU3MmwxNDYuMjg1NzE0IDE4MHEyNS4xNDI4NTcgMzAuMjg1NzE0IDY2LjI4NTcxNSA1MFQzNjUuNzE0Mjg2IDQ1Ny4xNDI4NTd6IG03MjUuMTQyODU3LTkzLjE0Mjg1N3EwLTM1LjQyODU3MS0yNi4yODU3MTQtNjguNTcxNDI5bC0xNjguNTcxNDI5LTIwNy40Mjg1NzFxLTI0LjU3MTQyOS0zMC4yODU3MTQtNjYuMjg1NzE0LTUwdC04MC0xOS43MTQyODZIMTI4cS01Mi41NzE0MjkgMC05MC4yODU3MTQgMzcuNzE0Mjg2VDAgMTQ2LjI4NTcxNFY2OTQuODU3MTQzcTAgNTIuNTcxNDI5IDM3LjcxNDI4NiA5MC4yODU3MTR0OTAuMjg1NzE0IDM3LjcxNDI4NmgxODIuODU3MTQzcTUyLjU3MTQyOSAwIDkwLjI4NTcxNC0zNy43MTQyODZ0MzcuNzE0Mjg2LTkwLjI4NTcxNHYtMTguMjg1NzE0aDMxMC44NTcxNDNxNTIuNTcxNDI5IDAgOTAuMjg1NzE0LTM3LjcxNDI4NnQzNy43MTQyODYtOTAuMjg1NzE0di05MS40Mjg1NzJoMTA5LjcxNDI4NXEzMC44NTcxNDMgMCA1Ni41NzE0MjktMTR0MzguMjg1NzE0LTQwLjI4NTcxNHE4LjU3MTQyOS0xOC4yODU3MTQgOC41NzE0MjktMzguODU3MTQzeiIgIGhvcml6LWFkdi14PSIxMDk3IiAvPgoKICAgIAogICAgPGdseXBoIGdseXBoLW5hbWU9ImRvbmUiIHVuaWNvZGU9IiYjNTg5NzA7IiBkPSJNMzg0IDIwNC44TDIwNC44IDM4NGwtNTkuNzMzMzMzLTU5LjczMzMzM0wzODQgODUuMzMzMzMzIDg5NiA1OTcuMzMzMzMzbC01OS43MzMzMzMgNTkuNzMzMzM0eiIgIGhvcml6LWFkdi14PSIxMDI0IiAvPgoKICAgIAoKCiAgPC9mb250Pgo8L2RlZnM+PC9zdmc+Cg==?t=1524818269295#v-upload-iconfont\\\") format(\\\"svg\\\")}.v-upload-iconfont[data-v-eca14c4c]{font-family:v-upload-iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-uploader-open[data-v-eca14c4c]:before{content:\\\"\\\\E683\\\"}.icon-uploader-done[data-v-eca14c4c]:before{content:\\\"\\\\E65A\\\"}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-eca14c4c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/Uploader.vue\n// module id = 6\n// module chunks = 0","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/listToStyles.js\n// module id = 7\n// module chunks = 0","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/component-normalizer.js\n// module id = 8\n// module chunks = 0","\"use strict\";\n\nmodule.exports = require(\"../fine-uploader/fine-uploader\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/lib/traditional.js\n// module id = 9\n// module chunks = 0","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.traditional = qq.traditional || {};\n    qq.traditional.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log;\n        function getIframeContentJson(id, iframe) {\n            var response, doc, innerHtml;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                log(\"converting iframe's innerHTML to JSON\");\n                log(\"innerHTML = \" + innerHtml);\n                if (innerHtml && innerHtml.match(/^<pre/i)) {\n                    innerHtml = doc.body.firstChild.firstChild.nodeValue;\n                }\n                response = handler._parseJsonResponse(innerHtml);\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n                response = {\n                    success: false\n                };\n            }\n            return response;\n        }\n        function createForm(id, iframe) {\n            var params = options.paramsStore.get(id), method = options.method.toLowerCase() === \"get\" ? \"GET\" : \"POST\", endpoint = options.endpointStore.get(id), name = getName(id);\n            params[options.uuidName] = getUuid(id);\n            params[options.filenameParam] = name;\n            return handler._initFormForUpload({\n                method: method,\n                endpoint: endpoint,\n                params: params,\n                paramsInBody: options.paramsInBody,\n                targetName: iframe.name\n            });\n        }\n        this.uploadFile = function(id) {\n            var input = handler.getInput(id), iframe = handler._createIframe(id), promise = new qq.Promise(), form;\n            form = createForm(id, iframe);\n            form.appendChild(input);\n            handler._attachLoadEvent(iframe, function(responseFromMessage) {\n                log(\"iframe loaded\");\n                var response = responseFromMessage ? responseFromMessage : getIframeContentJson(id, iframe);\n                handler._detachLoadEvent(id);\n                if (!options.cors.expected) {\n                    qq(iframe).remove();\n                }\n                if (response.success) {\n                    promise.success(response);\n                } else {\n                    promise.failure(response);\n                }\n            });\n            log(\"Sending upload request for \" + id);\n            form.submit();\n            qq(form).remove();\n            return promise;\n        };\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: options.cors.expected,\n                inputName: options.inputName\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n    };\n    qq.traditional = qq.traditional || {};\n    qq.traditional.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, log = proxy.log, multipart = spec.forceMultipart || spec.paramsInBody, addChunkingSpecificParams = function(id, params, chunkData) {\n            var size = getSize(id), name = getName(id);\n            if (!spec.omitDefaultParams) {\n                params[spec.chunking.paramNames.partIndex] = chunkData.part;\n                params[spec.chunking.paramNames.partByteOffset] = chunkData.start;\n                params[spec.chunking.paramNames.chunkSize] = chunkData.size;\n                params[spec.chunking.paramNames.totalParts] = chunkData.count;\n                params[spec.totalFileSizeName] = size;\n            }\n            if (multipart && !spec.omitDefaultParams) {\n                params[spec.filenameParam] = name;\n            }\n        }, allChunksDoneRequester = new qq.traditional.AllChunksDoneAjaxRequester({\n            cors: spec.cors,\n            endpoint: spec.chunking.success.endpoint,\n            headers: spec.chunking.success.headers,\n            jsonPayload: spec.chunking.success.jsonPayload,\n            log: log,\n            method: spec.chunking.success.method,\n            params: spec.chunking.success.params\n        }), createReadyStateChangedHandler = function(id, xhr) {\n            var promise = new qq.Promise();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    var result = onUploadOrChunkComplete(id, xhr);\n                    if (result.success) {\n                        promise.success(result.response, xhr);\n                    } else {\n                        promise.failure(result.response, xhr);\n                    }\n                }\n            };\n            return promise;\n        }, getChunksCompleteParams = function(id) {\n            var params = spec.paramsStore.get(id), name = getName(id), size = getSize(id);\n            params[spec.uuidName] = getUuid(id);\n            params[spec.filenameParam] = name;\n            params[spec.totalFileSizeName] = size;\n            params[spec.chunking.paramNames.totalParts] = handler._getTotalChunks(id);\n            return params;\n        }, isErrorUploadResponse = function(xhr, response) {\n            return qq.indexOf([ 200, 201, 202, 203, 204 ], xhr.status) < 0 || spec.requireSuccessJson && !response.success || response.reset;\n        }, onUploadOrChunkComplete = function(id, xhr) {\n            var response;\n            log(\"xhr - server response received for \" + id);\n            log(\"responseText = \" + xhr.responseText);\n            response = parseResponse(true, xhr);\n            return {\n                success: !isErrorUploadResponse(xhr, response),\n                response: response\n            };\n        }, parseResponse = function(upload, xhr) {\n            var response = {};\n            try {\n                log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                response = qq.parseJson(xhr.responseText);\n            } catch (error) {\n                upload && spec.requireSuccessJson && log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n            }\n            return response;\n        }, sendChunksCompleteRequest = function(id) {\n            var promise = new qq.Promise();\n            allChunksDoneRequester.complete(id, handler._createXhr(id), getChunksCompleteParams(id), spec.customHeaders.get(id)).then(function(xhr) {\n                promise.success(parseResponse(false, xhr), xhr);\n            }, function(xhr) {\n                promise.failure(parseResponse(false, xhr), xhr);\n            });\n            return promise;\n        }, setParamsAndGetEntityToSend = function(entityToSendParams) {\n            var fileOrBlob = entityToSendParams.fileOrBlob;\n            var id = entityToSendParams.id;\n            var xhr = entityToSendParams.xhr;\n            var xhrOverrides = entityToSendParams.xhrOverrides || {};\n            var customParams = entityToSendParams.customParams || {};\n            var defaultParams = entityToSendParams.params || {};\n            var xhrOverrideParams = xhrOverrides.params || {};\n            var params;\n            var formData = multipart ? new FormData() : null, method = xhrOverrides.method || spec.method, endpoint = xhrOverrides.endpoint || spec.endpointStore.get(id), name = getName(id), size = getSize(id);\n            if (spec.omitDefaultParams) {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n            } else {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n                qq.extend(params, defaultParams);\n                params[spec.uuidName] = getUuid(id);\n                params[spec.filenameParam] = name;\n                if (multipart) {\n                    params[spec.totalFileSizeName] = size;\n                } else if (!spec.paramsInBody) {\n                    params[spec.inputName] = name;\n                }\n            }\n            if (!spec.paramsInBody) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            xhr.open(method, endpoint, true);\n            if (spec.cors.expected && spec.cors.sendCredentials) {\n                xhr.withCredentials = true;\n            }\n            if (multipart) {\n                if (spec.paramsInBody) {\n                    qq.obj2FormData(params, formData);\n                }\n                formData.append(spec.inputName, fileOrBlob);\n                return formData;\n            }\n            return fileOrBlob;\n        }, setUploadHeaders = function(headersOptions) {\n            var headerOverrides = headersOptions.headerOverrides;\n            var id = headersOptions.id;\n            var xhr = headersOptions.xhr;\n            if (headerOverrides) {\n                qq.each(headerOverrides, function(headerName, headerValue) {\n                    xhr.setRequestHeader(headerName, headerValue);\n                });\n            } else {\n                var extraHeaders = spec.customHeaders.get(id), fileOrBlob = handler.getFile(id);\n                xhr.setRequestHeader(\"Accept\", \"application/json\");\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                if (!multipart) {\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n                    xhr.setRequestHeader(\"X-Mime-Type\", fileOrBlob.type);\n                }\n                qq.each(extraHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: function(uploadChunkParams) {\n                var id = uploadChunkParams.id;\n                var chunkIdx = uploadChunkParams.chunkIdx;\n                var overrides = uploadChunkParams.overrides || {};\n                var resuming = uploadChunkParams.resuming;\n                var chunkData = handler._getChunkData(id, chunkIdx), xhr = handler._createXhr(id, chunkIdx), promise, toSend, customParams, params = {};\n                promise = createReadyStateChangedHandler(id, xhr);\n                handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                customParams = spec.paramsStore.get(id);\n                addChunkingSpecificParams(id, params, chunkData);\n                if (resuming) {\n                    params[spec.resume.paramNames.resuming] = true;\n                }\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: chunkData.blob,\n                    id: id,\n                    customParams: customParams,\n                    params: params,\n                    xhr: xhr,\n                    xhrOverrides: overrides\n                });\n                setUploadHeaders({\n                    headerOverrides: overrides.headers,\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var fileOrBlob = handler.getFile(id), promise, xhr, customParams, toSend;\n                xhr = handler._createXhr(id);\n                handler._registerProgressHandler(id);\n                promise = createReadyStateChangedHandler(id, xhr);\n                customParams = spec.paramsStore.get(id);\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: fileOrBlob,\n                    id: id,\n                    customParams: customParams,\n                    xhr: xhr\n                });\n                setUploadHeaders({\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"traditional\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                finalizeChunks: function(id) {\n                    proxy.onFinalizing(id);\n                    if (spec.chunking.success.endpoint) {\n                        return sendChunksCompleteRequest(id);\n                    } else {\n                        return super_.finalizeChunks(id, qq.bind(parseResponse, this, true));\n                    }\n                }\n            };\n        });\n    };\n    qq.traditional.AllChunksDoneAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                allowXdr: false,\n                expected: false,\n                sendCredentials: false\n            },\n            endpoint: null,\n            log: function(str, level) {},\n            method: \"POST\"\n        }, promises = {}, endpointHandler = {\n            get: function(id) {\n                if (qq.isFunction(options.endpoint)) {\n                    return options.endpoint(id);\n                }\n                return options.endpoint;\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            contentType: options.jsonPayload ? \"application/json\" : \"application/x-www-form-urlencoded\",\n            validMethods: [ options.method ],\n            method: options.method,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: options.cors,\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        qq.extend(this, {\n            complete: function(id, xhr, params, headers) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting All Chunks Done request for \" + id);\n                promises[id] = promise;\n                requester.initTransport(id).withParams(options.params(id) || params).withHeaders(options.headers(id) || headers).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.DragAndDrop = function(o) {\n        \"use strict\";\n        var options, HIDE_ZONES_EVENT_NAME = \"qq-hidezones\", HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\", uploadDropZones = [], droppedFiles = [], disposeSupport = new qq.DisposeSupport();\n        options = {\n            dropZoneElements: [],\n            allowMultipleItems: true,\n            classes: {\n                dropActive: null\n            },\n            callbacks: new qq.DragAndDrop.callbacks()\n        };\n        qq.extend(options, o, true);\n        function uploadDroppedFiles(files, uploadDropZone) {\n            var filesAsArray = Array.prototype.slice.call(files);\n            options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n            uploadDropZone.dropDisabled(false);\n            options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n        }\n        function traverseFileTree(entry) {\n            var parseEntryPromise = new qq.Promise();\n            if (entry.isFile) {\n                entry.file(function(file) {\n                    file.qqPath = extractDirectoryPath(entry);\n                    droppedFiles.push(file);\n                    parseEntryPromise.success();\n                }, function(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            } else if (entry.isDirectory) {\n                getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                }, function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            }\n            return parseEntryPromise;\n        }\n        function extractDirectoryPath(entry) {\n            var name = entry.name, fullPath = entry.fullPath, indexOfNameInFullPath = fullPath.lastIndexOf(name);\n            fullPath = fullPath.substr(0, indexOfNameInFullPath);\n            if (fullPath.charAt(0) === \"/\") {\n                fullPath = fullPath.substr(1);\n            }\n            return fullPath;\n        }\n        function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n            var promise = existingPromise || new qq.Promise(), dirReader = reader || entry.createReader();\n            dirReader.readEntries(function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n                if (entries.length) {\n                    setTimeout(function() {\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                } else {\n                    promise.success(newEntries);\n                }\n            }, promise.failure);\n            return promise;\n        }\n        function handleDataTransfer(dataTransfer, uploadDropZone) {\n            var pendingFolderPromises = [], handleDataTransferPromise = new qq.Promise();\n            options.callbacks.processingDroppedFiles();\n            uploadDropZone.dropDisabled(true);\n            if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n                options.callbacks.processingDroppedFilesComplete([]);\n                options.callbacks.dropError(\"tooManyFilesError\", \"\");\n                uploadDropZone.dropDisabled(false);\n                handleDataTransferPromise.failure();\n            } else {\n                droppedFiles = [];\n                if (qq.isFolderDropSupported(dataTransfer)) {\n                    qq.each(dataTransfer.items, function(idx, item) {\n                        var entry = item.webkitGetAsEntry();\n                        if (entry) {\n                            if (entry.isFile) {\n                                droppedFiles.push(item.getAsFile());\n                            } else {\n                                pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                    pendingFolderPromises.pop();\n                                    if (pendingFolderPromises.length === 0) {\n                                        handleDataTransferPromise.success();\n                                    }\n                                }));\n                            }\n                        }\n                    });\n                } else {\n                    droppedFiles = dataTransfer.files;\n                }\n                if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                }\n            }\n            return handleDataTransferPromise;\n        }\n        function setupDropzone(dropArea) {\n            var dropZone = new qq.UploadDropZone({\n                HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n                element: dropArea,\n                onEnter: function(e) {\n                    qq(dropArea).addClass(options.classes.dropActive);\n                    e.stopPropagation();\n                },\n                onLeaveNotDescendants: function(e) {\n                    qq(dropArea).removeClass(options.classes.dropActive);\n                },\n                onDrop: function(e) {\n                    handleDataTransfer(e.dataTransfer, dropZone).then(function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    }, function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    });\n                }\n            });\n            disposeSupport.addDisposer(function() {\n                dropZone.dispose();\n            });\n            qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n            uploadDropZones.push(dropZone);\n            return dropZone;\n        }\n        function isFileDrag(dragEvent) {\n            var fileDrag;\n            qq.each(dragEvent.dataTransfer.types, function(key, val) {\n                if (val === \"Files\") {\n                    fileDrag = true;\n                    return false;\n                }\n            });\n            return fileDrag;\n        }\n        function leavingDocumentOut(e) {\n            if (qq.safari()) {\n                return e.x < 0 || e.y < 0;\n            }\n            return e.x === 0 && e.y === 0;\n        }\n        function setupDragDrop() {\n            var dropZones = options.dropZoneElements, maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n            qq.each(dropZones, function(idx, dropZone) {\n                var uploadDropZone = setupDropzone(dropZone);\n                if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                    disposeSupport.attach(document, \"dragenter\", function(e) {\n                        if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                            qq.each(dropZones, function(idx, dropZone) {\n                                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                                    qq(dropZone).css({\n                                        display: \"block\"\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n            disposeSupport.attach(document, \"dragleave\", function(e) {\n                if (leavingDocumentOut(e)) {\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n                maybeHideDropZones();\n            });\n            disposeSupport.attach(document, \"drop\", function(e) {\n                if (isFileDrag(e)) {\n                    e.preventDefault();\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n        }\n        setupDragDrop();\n        qq.extend(this, {\n            setupExtraDropzone: function(element) {\n                options.dropZoneElements.push(element);\n                setupDropzone(element);\n            },\n            removeDropzone: function(element) {\n                var i, dzs = options.dropZoneElements;\n                for (i in dzs) {\n                    if (dzs[i] === element) {\n                        return dzs.splice(i, 1);\n                    }\n                }\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n                qq.each(uploadDropZones, function(idx, dropZone) {\n                    dropZone.dispose();\n                });\n            }\n        });\n        this._testing = {};\n        this._testing.extractDirectoryPath = extractDirectoryPath;\n    };\n    qq.DragAndDrop.callbacks = function() {\n        \"use strict\";\n        return {\n            processingDroppedFiles: function() {},\n            processingDroppedFilesComplete: function(files, targetEl) {},\n            dropError: function(code, errorSpecifics) {\n                qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n            },\n            dropLog: function(message, level) {\n                qq.log(message, level);\n            }\n        };\n    };\n    qq.UploadDropZone = function(o) {\n        \"use strict\";\n        var disposeSupport = new qq.DisposeSupport(), options, element, preventDrop, dropOutsideDisabled;\n        options = {\n            element: null,\n            onEnter: function(e) {},\n            onLeave: function(e) {},\n            onLeaveNotDescendants: function(e) {},\n            onDrop: function(e) {}\n        };\n        qq.extend(options, o);\n        element = options.element;\n        function dragoverShouldBeCanceled() {\n            return qq.safari() || qq.firefox() && qq.windows();\n        }\n        function disableDropOutside(e) {\n            if (!dropOutsideDisabled) {\n                if (dragoverShouldBeCanceled) {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        e.preventDefault();\n                    });\n                } else {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        if (e.dataTransfer) {\n                            e.dataTransfer.dropEffect = \"none\";\n                            e.preventDefault();\n                        }\n                    });\n                }\n                dropOutsideDisabled = true;\n            }\n        }\n        function isValidFileDrag(e) {\n            if (!qq.supportedFeatures.fileDrop) {\n                return false;\n            }\n            var effectTest, dt = e.dataTransfer, isSafari = qq.safari();\n            effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n            return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n        }\n        function isOrSetDropDisabled(isDisabled) {\n            if (isDisabled !== undefined) {\n                preventDrop = isDisabled;\n            }\n            return preventDrop;\n        }\n        function triggerHidezonesEvent() {\n            var hideZonesEvent;\n            function triggerUsingOldApi() {\n                hideZonesEvent = document.createEvent(\"Event\");\n                hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n            }\n            if (window.CustomEvent) {\n                try {\n                    hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n                } catch (err) {\n                    triggerUsingOldApi();\n                }\n            } else {\n                triggerUsingOldApi();\n            }\n            document.dispatchEvent(hideZonesEvent);\n        }\n        function attachEvents() {\n            disposeSupport.attach(element, \"dragover\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n                if (effect === \"move\" || effect === \"linkMove\") {\n                    e.dataTransfer.dropEffect = \"move\";\n                } else {\n                    e.dataTransfer.dropEffect = \"copy\";\n                }\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            disposeSupport.attach(element, \"dragenter\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    options.onEnter(e);\n                }\n            });\n            disposeSupport.attach(element, \"dragleave\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onLeave(e);\n                var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n                if (qq(this).contains(relatedTarget)) {\n                    return;\n                }\n                options.onLeaveNotDescendants(e);\n            });\n            disposeSupport.attach(element, \"drop\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    options.onDrop(e);\n                    triggerHidezonesEvent();\n                }\n            });\n        }\n        disableDropOutside();\n        attachEvents();\n        qq.extend(this, {\n            dropDisabled: function(isDisabled) {\n                return isOrSetDropDisabled(isDisabled);\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n            },\n            getElement: function() {\n                return element;\n            }\n        });\n        this._testing = {};\n        this._testing.isValidFileDrag = isValidFileDrag;\n    };\n    (function() {\n        \"use strict\";\n        qq.uiPublicApi = {\n            addInitialFiles: function(cannedFileList) {\n                this._parent.prototype.addInitialFiles.apply(this, arguments);\n                this._templating.addCacheToDom();\n            },\n            clearStoredFiles: function() {\n                this._parent.prototype.clearStoredFiles.apply(this, arguments);\n                this._templating.clearFiles();\n            },\n            addExtraDropzone: function(element) {\n                this._dnd && this._dnd.setupExtraDropzone(element);\n            },\n            removeExtraDropzone: function(element) {\n                if (this._dnd) {\n                    return this._dnd.removeDropzone(element);\n                }\n            },\n            getItemByFileId: function(id) {\n                if (!this._templating.isHiddenForever(id)) {\n                    return this._templating.getFileContainer(id);\n                }\n            },\n            reset: function() {\n                this._parent.prototype.reset.apply(this, arguments);\n                this._templating.reset();\n                if (!this._options.button && this._templating.getButton()) {\n                    this._defaultButtonId = this._createUploadButton({\n                        element: this._templating.getButton(),\n                        title: this._options.text.fileInputTitle\n                    }).getButtonId();\n                }\n                if (this._dnd) {\n                    this._dnd.dispose();\n                    this._dnd = this._setupDragAndDrop();\n                }\n                this._totalFilesInBatch = 0;\n                this._filesInBatchAddedToUi = 0;\n                this._setupClickAndEditEventHandlers();\n            },\n            setName: function(id, newName) {\n                var formattedFilename = this._options.formatFileName(newName);\n                this._parent.prototype.setName.apply(this, arguments);\n                this._templating.updateFilename(id, formattedFilename);\n            },\n            pauseUpload: function(id) {\n                var paused = this._parent.prototype.pauseUpload.apply(this, arguments);\n                paused && this._templating.uploadPaused(id);\n                return paused;\n            },\n            continueUpload: function(id) {\n                var continued = this._parent.prototype.continueUpload.apply(this, arguments);\n                continued && this._templating.uploadContinued(id);\n                return continued;\n            },\n            getId: function(fileContainerOrChildEl) {\n                return this._templating.getFileId(fileContainerOrChildEl);\n            },\n            getDropTarget: function(fileId) {\n                var file = this.getFile(fileId);\n                return file.qqDropTarget;\n            }\n        };\n        qq.uiPrivateApi = {\n            _getButton: function(buttonId) {\n                var button = this._parent.prototype._getButton.apply(this, arguments);\n                if (!button) {\n                    if (buttonId === this._defaultButtonId) {\n                        button = this._templating.getButton();\n                    }\n                }\n                return button;\n            },\n            _removeFileItem: function(fileId) {\n                this._templating.removeFile(fileId);\n            },\n            _setupClickAndEditEventHandlers: function() {\n                this._fileButtonsClickHandler = qq.FileButtonsClickHandler && this._bindFileButtonsClickEvent();\n                this._focusinEventSupported = !qq.firefox();\n                if (this._isEditFilenameEnabled()) {\n                    this._filenameClickHandler = this._bindFilenameClickEvent();\n                    this._filenameInputFocusInHandler = this._bindFilenameInputFocusInEvent();\n                    this._filenameInputFocusHandler = this._bindFilenameInputFocusEvent();\n                }\n            },\n            _setupDragAndDrop: function() {\n                var self = this, dropZoneElements = this._options.dragAndDrop.extraDropzones, templating = this._templating, defaultDropZone = templating.getDropZone();\n                defaultDropZone && dropZoneElements.push(defaultDropZone);\n                return new qq.DragAndDrop({\n                    dropZoneElements: dropZoneElements,\n                    allowMultipleItems: this._options.multiple,\n                    classes: {\n                        dropActive: this._options.classes.dropActive\n                    },\n                    callbacks: {\n                        processingDroppedFiles: function() {\n                            templating.showDropProcessing();\n                        },\n                        processingDroppedFilesComplete: function(files, targetEl) {\n                            templating.hideDropProcessing();\n                            qq.each(files, function(idx, file) {\n                                file.qqDropTarget = targetEl;\n                            });\n                            if (files.length) {\n                                self.addFiles(files, null, null);\n                            }\n                        },\n                        dropError: function(code, errorData) {\n                            self._itemError(code, errorData);\n                        },\n                        dropLog: function(message, level) {\n                            self.log(message, level);\n                        }\n                    }\n                });\n            },\n            _bindFileButtonsClickEvent: function() {\n                var self = this;\n                return new qq.FileButtonsClickHandler({\n                    templating: this._templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onDeleteFile: function(fileId) {\n                        self.deleteFile(fileId);\n                    },\n                    onCancel: function(fileId) {\n                        self.cancel(fileId);\n                    },\n                    onRetry: function(fileId) {\n                        self.retry(fileId);\n                    },\n                    onPause: function(fileId) {\n                        self.pauseUpload(fileId);\n                    },\n                    onContinue: function(fileId) {\n                        self.continueUpload(fileId);\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    }\n                });\n            },\n            _isEditFilenameEnabled: function() {\n                return this._templating.isEditFilenamePossible() && !this._options.autoUpload && qq.FilenameClickHandler && qq.FilenameInputFocusHandler && qq.FilenameInputFocusHandler;\n            },\n            _filenameEditHandler: function() {\n                var self = this, templating = this._templating;\n                return {\n                    templating: templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onGetUploadStatus: function(fileId) {\n                        return self.getUploads({\n                            id: fileId\n                        }).status;\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    },\n                    onSetName: function(id, newName) {\n                        self.setName(id, newName);\n                    },\n                    onEditingStatusChange: function(id, isEditing) {\n                        var qqInput = qq(templating.getEditInput(id)), qqFileContainer = qq(templating.getFileContainer(id));\n                        if (isEditing) {\n                            qqInput.addClass(\"qq-editing\");\n                            templating.hideFilename(id);\n                            templating.hideEditIcon(id);\n                        } else {\n                            qqInput.removeClass(\"qq-editing\");\n                            templating.showFilename(id);\n                            templating.showEditIcon(id);\n                        }\n                        qqFileContainer.addClass(\"qq-temp\").removeClass(\"qq-temp\");\n                    }\n                };\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                this._parent.prototype._onUploadStatusChange.apply(this, arguments);\n                if (this._isEditFilenameEnabled()) {\n                    if (this._templating.getFileContainer(id) && newStatus !== qq.status.SUBMITTED) {\n                        this._templating.markFilenameEditable(id);\n                        this._templating.hideEditIcon(id);\n                    }\n                }\n                if (oldStatus === qq.status.UPLOAD_RETRYING && newStatus === qq.status.UPLOADING) {\n                    this._templating.hideRetry(id);\n                    this._templating.setStatusText(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.retrying);\n                } else if (newStatus === qq.status.UPLOAD_FAILED) {\n                    this._templating.hidePause(id);\n                }\n            },\n            _bindFilenameInputFocusInEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusInHandler(spec);\n            },\n            _bindFilenameInputFocusEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusHandler(spec);\n            },\n            _bindFilenameClickEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameClickHandler(spec);\n            },\n            _storeForLater: function(id) {\n                this._parent.prototype._storeForLater.apply(this, arguments);\n                this._templating.hideSpinner(id);\n            },\n            _onAllComplete: function(successful, failed) {\n                this._parent.prototype._onAllComplete.apply(this, arguments);\n                this._templating.resetTotalProgress();\n            },\n            _onSubmit: function(id, name) {\n                var file = this.getFile(id);\n                if (file && file.qqPath && this._options.dragAndDrop.reportDirectoryPaths) {\n                    this._paramsStore.addReadOnly(id, {\n                        qqpath: file.qqPath\n                    });\n                }\n                this._parent.prototype._onSubmit.apply(this, arguments);\n                this._addToList(id, name);\n            },\n            _onSubmitted: function(id) {\n                if (this._isEditFilenameEnabled()) {\n                    this._templating.markFilenameEditable(id);\n                    this._templating.showEditIcon(id);\n                    if (!this._focusinEventSupported) {\n                        this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(id));\n                    }\n                }\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._parent.prototype._onProgress.apply(this, arguments);\n                this._templating.updateProgress(id, loaded, total);\n                if (total === 0 || Math.round(loaded / total * 100) === 100) {\n                    this._templating.hideCancel(id);\n                    this._templating.hidePause(id);\n                    this._templating.hideProgress(id);\n                    this._templating.setStatusText(id, this._options.text.waitingForResponse);\n                    this._displayFileSize(id);\n                } else {\n                    this._displayFileSize(id, loaded, total);\n                }\n            },\n            _onTotalProgress: function(loaded, total) {\n                this._parent.prototype._onTotalProgress.apply(this, arguments);\n                this._templating.updateTotalProgress(loaded, total);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                var parentRetVal = this._parent.prototype._onComplete.apply(this, arguments), templating = this._templating, fileContainer = templating.getFileContainer(id), self = this;\n                function completeUpload(result) {\n                    if (!fileContainer) {\n                        return;\n                    }\n                    templating.setStatusText(id);\n                    qq(fileContainer).removeClass(self._classes.retrying);\n                    templating.hideProgress(id);\n                    if (self.getUploads({\n                        id: id\n                    }).status !== qq.status.UPLOAD_FAILED) {\n                        templating.hideCancel(id);\n                    }\n                    templating.hideSpinner(id);\n                    if (result.success) {\n                        self._markFileAsSuccessful(id);\n                    } else {\n                        qq(fileContainer).addClass(self._classes.fail);\n                        templating.showCancel(id);\n                        if (templating.isRetryPossible() && !self._preventRetries[id]) {\n                            qq(fileContainer).addClass(self._classes.retryable);\n                            templating.showRetry(id);\n                        }\n                        self._controlFailureTextDisplay(id, result);\n                    }\n                }\n                if (parentRetVal instanceof qq.Promise) {\n                    parentRetVal.done(function(newResult) {\n                        completeUpload(newResult);\n                    });\n                } else {\n                    completeUpload(result);\n                }\n                return parentRetVal;\n            },\n            _markFileAsSuccessful: function(id) {\n                var templating = this._templating;\n                if (this._isDeletePossible()) {\n                    templating.showDeleteButton(id);\n                }\n                qq(templating.getFileContainer(id)).addClass(this._classes.success);\n                this._maybeUpdateThumbnail(id);\n            },\n            _onUploadPrep: function(id) {\n                this._parent.prototype._onUploadPrep.apply(this, arguments);\n                this._templating.showSpinner(id);\n            },\n            _onUpload: function(id, name) {\n                var parentRetVal = this._parent.prototype._onUpload.apply(this, arguments);\n                this._templating.showSpinner(id);\n                return parentRetVal;\n            },\n            _onUploadChunk: function(id, chunkData) {\n                this._parent.prototype._onUploadChunk.apply(this, arguments);\n                if (chunkData.partIndex > 0 && this._handler.isResumable(id)) {\n                    this._templating.allowPause(id);\n                }\n            },\n            _onCancel: function(id, name) {\n                this._parent.prototype._onCancel.apply(this, arguments);\n                this._removeFileItem(id);\n                if (this._getNotFinished() === 0) {\n                    this._templating.resetTotalProgress();\n                }\n            },\n            _onBeforeAutoRetry: function(id) {\n                var retryNumForDisplay, maxAuto, retryNote;\n                this._parent.prototype._onBeforeAutoRetry.apply(this, arguments);\n                this._showCancelLink(id);\n                if (this._options.retry.showAutoRetryNote) {\n                    retryNumForDisplay = this._autoRetries[id];\n                    maxAuto = this._options.retry.maxAutoAttempts;\n                    retryNote = this._options.retry.autoRetryNote.replace(/\\{retryNum\\}/g, retryNumForDisplay);\n                    retryNote = retryNote.replace(/\\{maxAuto\\}/g, maxAuto);\n                    this._templating.setStatusText(id, retryNote);\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retrying);\n                }\n            },\n            _onBeforeManualRetry: function(id) {\n                if (this._parent.prototype._onBeforeManualRetry.apply(this, arguments)) {\n                    this._templating.resetProgress(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.fail);\n                    this._templating.setStatusText(id);\n                    this._templating.showSpinner(id);\n                    this._showCancelLink(id);\n                    return true;\n                } else {\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retryable);\n                    this._templating.showRetry(id);\n                    return false;\n                }\n            },\n            _onSubmitDelete: function(id) {\n                var onSuccessCallback = qq.bind(this._onSubmitDeleteSuccess, this);\n                this._parent.prototype._onSubmitDelete.call(this, id, onSuccessCallback);\n            },\n            _onSubmitDeleteSuccess: function(id, uuid, additionalMandatedParams) {\n                if (this._options.deleteFile.forceConfirm) {\n                    this._showDeleteConfirm.apply(this, arguments);\n                } else {\n                    this._sendDeleteRequest.apply(this, arguments);\n                }\n            },\n            _onDeleteComplete: function(id, xhr, isError) {\n                this._parent.prototype._onDeleteComplete.apply(this, arguments);\n                this._templating.hideSpinner(id);\n                if (isError) {\n                    this._templating.setStatusText(id, this._options.deleteFile.deletingFailedText);\n                    this._templating.showDeleteButton(id);\n                } else {\n                    this._removeFileItem(id);\n                }\n            },\n            _sendDeleteRequest: function(id, uuid, additionalMandatedParams) {\n                this._templating.hideDeleteButton(id);\n                this._templating.showSpinner(id);\n                this._templating.setStatusText(id, this._options.deleteFile.deletingStatusText);\n                this._deleteHandler.sendDelete.apply(this, arguments);\n            },\n            _showDeleteConfirm: function(id, uuid, mandatedParams) {\n                var fileName = this.getName(id), confirmMessage = this._options.deleteFile.confirmMessage.replace(/\\{filename\\}/g, fileName), uuid = this.getUuid(id), deleteRequestArgs = arguments, self = this, retVal;\n                retVal = this._options.showConfirm(confirmMessage);\n                if (qq.isGenericPromise(retVal)) {\n                    retVal.then(function() {\n                        self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                    });\n                } else if (retVal !== false) {\n                    self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                }\n            },\n            _addToList: function(id, name, canned) {\n                var prependData, prependIndex = 0, dontDisplay = this._handler.isProxied(id) && this._options.scaling.hideScaled, record;\n                if (this._options.display.prependFiles) {\n                    if (this._totalFilesInBatch > 1 && this._filesInBatchAddedToUi > 0) {\n                        prependIndex = this._filesInBatchAddedToUi - 1;\n                    }\n                    prependData = {\n                        index: prependIndex\n                    };\n                }\n                if (!canned) {\n                    if (this._options.disableCancelForFormUploads && !qq.supportedFeatures.ajaxUploading) {\n                        this._templating.disableCancel();\n                    }\n                    if (!this._options.multiple) {\n                        record = this.getUploads({\n                            id: id\n                        });\n                        this._handledProxyGroup = this._handledProxyGroup || record.proxyGroupId;\n                        if (record.proxyGroupId !== this._handledProxyGroup || !record.proxyGroupId) {\n                            this._handler.cancelAll();\n                            this._clearList();\n                            this._handledProxyGroup = null;\n                        }\n                    }\n                }\n                if (canned) {\n                    this._templating.addFileToCache(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.updateThumbnail(id, this._thumbnailUrls[id], true, this._options.thumbnails.customResizer);\n                } else {\n                    this._templating.addFile(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.generatePreview(id, this.getFile(id), this._options.thumbnails.customResizer);\n                }\n                this._filesInBatchAddedToUi += 1;\n                if (canned || this._options.display.fileSizeOnSubmit && qq.supportedFeatures.ajaxUploading) {\n                    this._displayFileSize(id);\n                }\n            },\n            _clearList: function() {\n                this._templating.clearFiles();\n                this.clearStoredFiles();\n            },\n            _displayFileSize: function(id, loadedSize, totalSize) {\n                var size = this.getSize(id), sizeForDisplay = this._formatSize(size);\n                if (size >= 0) {\n                    if (loadedSize !== undefined && totalSize !== undefined) {\n                        sizeForDisplay = this._formatProgress(loadedSize, totalSize);\n                    }\n                    this._templating.updateSize(id, sizeForDisplay);\n                }\n            },\n            _formatProgress: function(uploadedSize, totalSize) {\n                var message = this._options.text.formatProgress;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                r(\"{percent}\", Math.round(uploadedSize / totalSize * 100));\n                r(\"{total_size}\", this._formatSize(totalSize));\n                return message;\n            },\n            _controlFailureTextDisplay: function(id, response) {\n                var mode, responseProperty, failureReason;\n                mode = this._options.failedUploadTextDisplay.mode;\n                responseProperty = this._options.failedUploadTextDisplay.responseProperty;\n                if (mode === \"custom\") {\n                    failureReason = response[responseProperty];\n                    if (!failureReason) {\n                        failureReason = this._options.text.failUpload;\n                    }\n                    this._templating.setStatusText(id, failureReason);\n                    if (this._options.failedUploadTextDisplay.enableTooltip) {\n                        this._showTooltip(id, failureReason);\n                    }\n                } else if (mode === \"default\") {\n                    this._templating.setStatusText(id, this._options.text.failUpload);\n                } else if (mode !== \"none\") {\n                    this.log(\"failedUploadTextDisplay.mode value of '\" + mode + \"' is not valid\", \"warn\");\n                }\n            },\n            _showTooltip: function(id, text) {\n                this._templating.getFileContainer(id).title = text;\n            },\n            _showCancelLink: function(id) {\n                if (!this._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) {\n                    this._templating.showCancel(id);\n                }\n            },\n            _itemError: function(code, name, item) {\n                var message = this._parent.prototype._itemError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _batchError: function(message) {\n                this._parent.prototype._batchError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _setupPastePrompt: function() {\n                var self = this;\n                this._options.callbacks.onPasteReceived = function() {\n                    var message = self._options.paste.namePromptMessage, defaultVal = self._options.paste.defaultName;\n                    return self._options.showPrompt(message, defaultVal);\n                };\n            },\n            _fileOrBlobRejected: function(id, name) {\n                this._totalFilesInBatch -= 1;\n                this._parent.prototype._fileOrBlobRejected.apply(this, arguments);\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                this._totalFilesInBatch = items.length;\n                this._filesInBatchAddedToUi = 0;\n                this._parent.prototype._prepareItemsForUpload.apply(this, arguments);\n            },\n            _maybeUpdateThumbnail: function(fileId) {\n                var thumbnailUrl = this._thumbnailUrls[fileId], fileStatus = this.getUploads({\n                    id: fileId\n                }).status;\n                if (fileStatus !== qq.status.DELETED && (thumbnailUrl || this._options.thumbnails.placeholders.waitUntilResponse || !qq.supportedFeatures.imagePreviews)) {\n                    this._templating.updateThumbnail(fileId, thumbnailUrl, this._options.thumbnails.customResizer);\n                }\n            },\n            _addCannedFile: function(sessionData) {\n                var id = this._parent.prototype._addCannedFile.apply(this, arguments);\n                this._addToList(id, this.getName(id), true);\n                this._templating.hideSpinner(id);\n                this._templating.hideCancel(id);\n                this._markFileAsSuccessful(id);\n                return id;\n            },\n            _setSize: function(id, newSize) {\n                this._parent.prototype._setSize.apply(this, arguments);\n                this._templating.updateSize(id, this._formatSize(newSize));\n            },\n            _sessionRequestComplete: function() {\n                this._templating.addCacheToDom();\n                this._parent.prototype._sessionRequestComplete.apply(this, arguments);\n            }\n        };\n    })();\n    qq.FineUploader = function(o, namespace) {\n        \"use strict\";\n        var self = this;\n        this._parent = namespace ? qq[namespace].FineUploaderBasic : qq.FineUploaderBasic;\n        this._parent.apply(this, arguments);\n        qq.extend(this._options, {\n            element: null,\n            button: null,\n            listElement: null,\n            dragAndDrop: {\n                extraDropzones: [],\n                reportDirectoryPaths: false\n            },\n            text: {\n                formatProgress: \"{percent}% of {total_size}\",\n                failUpload: \"Upload failed\",\n                waitingForResponse: \"Processing...\",\n                paused: \"Paused\"\n            },\n            template: \"qq-template\",\n            classes: {\n                retrying: \"qq-upload-retrying\",\n                retryable: \"qq-upload-retryable\",\n                success: \"qq-upload-success\",\n                fail: \"qq-upload-fail\",\n                editable: \"qq-editable\",\n                hide: \"qq-hide\",\n                dropActive: \"qq-upload-drop-area-active\"\n            },\n            failedUploadTextDisplay: {\n                mode: \"default\",\n                responseProperty: \"error\",\n                enableTooltip: true\n            },\n            messages: {\n                tooManyFilesError: \"You may only drop one file\",\n                unsupportedBrowser: \"Unrecoverable error - this browser does not permit file uploading of any kind.\"\n            },\n            retry: {\n                showAutoRetryNote: true,\n                autoRetryNote: \"Retrying {retryNum}/{maxAuto}...\"\n            },\n            deleteFile: {\n                forceConfirm: false,\n                confirmMessage: \"Are you sure you want to delete {filename}?\",\n                deletingStatusText: \"Deleting...\",\n                deletingFailedText: \"Delete failed\"\n            },\n            display: {\n                fileSizeOnSubmit: false,\n                prependFiles: false\n            },\n            paste: {\n                promptForName: false,\n                namePromptMessage: \"Please name this image\"\n            },\n            thumbnails: {\n                customResizer: null,\n                maxCount: 0,\n                placeholders: {\n                    waitUntilResponse: false,\n                    notAvailablePath: null,\n                    waitingPath: null\n                },\n                timeBetweenThumbs: 750\n            },\n            scaling: {\n                hideScaled: false\n            },\n            showMessage: function(message) {\n                if (self._templating.hasDialog(\"alert\")) {\n                    return self._templating.showDialog(\"alert\", message);\n                } else {\n                    setTimeout(function() {\n                        window.alert(message);\n                    }, 0);\n                }\n            },\n            showConfirm: function(message) {\n                if (self._templating.hasDialog(\"confirm\")) {\n                    return self._templating.showDialog(\"confirm\", message);\n                } else {\n                    return window.confirm(message);\n                }\n            },\n            showPrompt: function(message, defaultValue) {\n                if (self._templating.hasDialog(\"prompt\")) {\n                    return self._templating.showDialog(\"prompt\", message, defaultValue);\n                } else {\n                    return window.prompt(message, defaultValue);\n                }\n            }\n        }, true);\n        qq.extend(this._options, o, true);\n        this._templating = new qq.Templating({\n            log: qq.bind(this.log, this),\n            templateIdOrEl: this._options.template,\n            containerEl: this._options.element,\n            fileContainerEl: this._options.listElement,\n            button: this._options.button,\n            imageGenerator: this._imageGenerator,\n            classes: {\n                hide: this._options.classes.hide,\n                editable: this._options.classes.editable\n            },\n            limits: {\n                maxThumbs: this._options.thumbnails.maxCount,\n                timeBetweenThumbs: this._options.thumbnails.timeBetweenThumbs\n            },\n            placeholders: {\n                waitUntilUpdate: this._options.thumbnails.placeholders.waitUntilResponse,\n                thumbnailNotAvailable: this._options.thumbnails.placeholders.notAvailablePath,\n                waitingForThumbnail: this._options.thumbnails.placeholders.waitingPath\n            },\n            text: this._options.text\n        });\n        if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari);\n        } else if (!qq.supportedFeatures.uploading || this._options.cors.expected && !qq.supportedFeatures.uploadCors) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowser);\n        } else {\n            this._wrapCallbacks();\n            this._templating.render();\n            this._classes = this._options.classes;\n            if (!this._options.button && this._templating.getButton()) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._templating.getButton(),\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._setupClickAndEditEventHandlers();\n            if (qq.DragAndDrop && qq.supportedFeatures.fileDrop) {\n                this._dnd = this._setupDragAndDrop();\n            }\n            if (this._options.paste.targetElement && this._options.paste.promptForName) {\n                if (qq.PasteSupport) {\n                    this._setupPastePrompt();\n                } else {\n                    this.log(\"Paste support module not found.\", \"error\");\n                }\n            }\n            this._totalFilesInBatch = 0;\n            this._filesInBatchAddedToUi = 0;\n        }\n    };\n    qq.extend(qq.FineUploader.prototype, qq.basePublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.basePrivateApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPrivateApi);\n    qq.Templating = function(spec) {\n        \"use strict\";\n        var FILE_ID_ATTR = \"qq-file-id\", FILE_CLASS_PREFIX = \"qq-file-id-\", THUMBNAIL_MAX_SIZE_ATTR = \"qq-max-size\", THUMBNAIL_SERVER_SCALE_ATTR = \"qq-server-scale\", HIDE_DROPZONE_ATTR = \"qq-hide-dropzone\", DROPZPONE_TEXT_ATTR = \"qq-drop-area-text\", IN_PROGRESS_CLASS = \"qq-in-progress\", HIDDEN_FOREVER_CLASS = \"qq-hidden-forever\", fileBatch = {\n            content: document.createDocumentFragment(),\n            map: {}\n        }, isCancelDisabled = false, generatedThumbnails = 0, thumbnailQueueMonitorRunning = false, thumbGenerationQueue = [], thumbnailMaxSize = -1, options = {\n            log: null,\n            limits: {\n                maxThumbs: 0,\n                timeBetweenThumbs: 750\n            },\n            templateIdOrEl: \"qq-template\",\n            containerEl: null,\n            fileContainerEl: null,\n            button: null,\n            imageGenerator: null,\n            classes: {\n                hide: \"qq-hide\",\n                editable: \"qq-editable\"\n            },\n            placeholders: {\n                waitUntilUpdate: false,\n                thumbnailNotAvailable: null,\n                waitingForThumbnail: null\n            },\n            text: {\n                paused: \"Paused\"\n            }\n        }, selectorClasses = {\n            button: \"qq-upload-button-selector\",\n            alertDialog: \"qq-alert-dialog-selector\",\n            dialogCancelButton: \"qq-cancel-button-selector\",\n            confirmDialog: \"qq-confirm-dialog-selector\",\n            dialogMessage: \"qq-dialog-message-selector\",\n            dialogOkButton: \"qq-ok-button-selector\",\n            promptDialog: \"qq-prompt-dialog-selector\",\n            uploader: \"qq-uploader-selector\",\n            drop: \"qq-upload-drop-area-selector\",\n            list: \"qq-upload-list-selector\",\n            progressBarContainer: \"qq-progress-bar-container-selector\",\n            progressBar: \"qq-progress-bar-selector\",\n            totalProgressBarContainer: \"qq-total-progress-bar-container-selector\",\n            totalProgressBar: \"qq-total-progress-bar-selector\",\n            file: \"qq-upload-file-selector\",\n            spinner: \"qq-upload-spinner-selector\",\n            size: \"qq-upload-size-selector\",\n            cancel: \"qq-upload-cancel-selector\",\n            pause: \"qq-upload-pause-selector\",\n            continueButton: \"qq-upload-continue-selector\",\n            deleteButton: \"qq-upload-delete-selector\",\n            retry: \"qq-upload-retry-selector\",\n            statusText: \"qq-upload-status-text-selector\",\n            editFilenameInput: \"qq-edit-filename-selector\",\n            editNameIcon: \"qq-edit-filename-icon-selector\",\n            dropText: \"qq-upload-drop-area-text-selector\",\n            dropProcessing: \"qq-drop-processing-selector\",\n            dropProcessingSpinner: \"qq-drop-processing-spinner-selector\",\n            thumbnail: \"qq-thumbnail-selector\"\n        }, previewGeneration = {}, cachedThumbnailNotAvailableImg = new qq.Promise(), cachedWaitingForThumbnailImg = new qq.Promise(), log, isEditElementsExist, isRetryElementExist, templateDom, container, fileList, showThumbnails, serverScale, cacheThumbnailPlaceholders = function() {\n            var notAvailableUrl = options.placeholders.thumbnailNotAvailable, waitingUrl = options.placeholders.waitingForThumbnail, spec = {\n                maxSize: thumbnailMaxSize,\n                scale: serverScale\n            };\n            if (showThumbnails) {\n                if (notAvailableUrl) {\n                    options.imageGenerator.generate(notAvailableUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedThumbnailNotAvailableImg.success(updatedImg);\n                    }, function() {\n                        cachedThumbnailNotAvailableImg.failure();\n                        log(\"Problem loading 'not available' placeholder image at \" + notAvailableUrl, \"error\");\n                    });\n                } else {\n                    cachedThumbnailNotAvailableImg.failure();\n                }\n                if (waitingUrl) {\n                    options.imageGenerator.generate(waitingUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedWaitingForThumbnailImg.success(updatedImg);\n                    }, function() {\n                        cachedWaitingForThumbnailImg.failure();\n                        log(\"Problem loading 'waiting for thumbnail' placeholder image at \" + waitingUrl, \"error\");\n                    });\n                } else {\n                    cachedWaitingForThumbnailImg.failure();\n                }\n            }\n        }, displayWaitingImg = function(thumbnail) {\n            var waitingImgPlacement = new qq.Promise();\n            cachedWaitingForThumbnailImg.then(function(img) {\n                maybeScalePlaceholderViaCss(img, thumbnail);\n                if (!thumbnail.src) {\n                    thumbnail.src = img.src;\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        show(thumbnail);\n                        waitingImgPlacement.success();\n                    };\n                } else {\n                    waitingImgPlacement.success();\n                }\n            }, function() {\n                hide(thumbnail);\n                waitingImgPlacement.success();\n            });\n            return waitingImgPlacement;\n        }, generateNewPreview = function(id, blob, spec) {\n            var thumbnail = getThumbnail(id);\n            log(\"Generating new thumbnail for \" + id);\n            blob.qqThumbnailId = id;\n            return options.imageGenerator.generate(blob, thumbnail, spec).then(function() {\n                generatedThumbnails++;\n                show(thumbnail);\n                previewGeneration[id].success();\n            }, function() {\n                previewGeneration[id].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                }\n            });\n        }, generateNextQueuedPreview = function() {\n            if (thumbGenerationQueue.length) {\n                thumbnailQueueMonitorRunning = true;\n                var queuedThumbRequest = thumbGenerationQueue.shift();\n                if (queuedThumbRequest.update) {\n                    processUpdateQueuedPreviewRequest(queuedThumbRequest);\n                } else {\n                    processNewQueuedPreviewRequest(queuedThumbRequest);\n                }\n            } else {\n                thumbnailQueueMonitorRunning = false;\n            }\n        }, getCancel = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.cancel);\n        }, getContinue = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.continueButton);\n        }, getDialog = function(type) {\n            return getTemplateEl(container, selectorClasses[type + \"Dialog\"]);\n        }, getDelete = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.deleteButton);\n        }, getDropProcessing = function() {\n            return getTemplateEl(container, selectorClasses.dropProcessing);\n        }, getEditIcon = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.editNameIcon);\n        }, getFile = function(id) {\n            return fileBatch.map[id] || qq(fileList).getFirstByClass(FILE_CLASS_PREFIX + id);\n        }, getFilename = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.file);\n        }, getPause = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.pause);\n        }, getProgress = function(id) {\n            if (id == null) {\n                return getTemplateEl(container, selectorClasses.totalProgressBarContainer) || getTemplateEl(container, selectorClasses.totalProgressBar);\n            }\n            return getTemplateEl(getFile(id), selectorClasses.progressBarContainer) || getTemplateEl(getFile(id), selectorClasses.progressBar);\n        }, getRetry = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.retry);\n        }, getSize = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.size);\n        }, getSpinner = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.spinner);\n        }, getTemplateEl = function(context, cssClass) {\n            return context && qq(context).getFirstByClass(cssClass);\n        }, getThumbnail = function(id) {\n            return showThumbnails && getTemplateEl(getFile(id), selectorClasses.thumbnail);\n        }, hide = function(el) {\n            el && qq(el).addClass(options.classes.hide);\n        }, maybeScalePlaceholderViaCss = function(placeholder, thumbnail) {\n            var maxWidth = placeholder.style.maxWidth, maxHeight = placeholder.style.maxHeight;\n            if (maxHeight && maxWidth && !thumbnail.style.maxWidth && !thumbnail.style.maxHeight) {\n                qq(thumbnail).css({\n                    maxWidth: maxWidth,\n                    maxHeight: maxHeight\n                });\n            }\n        }, maybeSetDisplayNotAvailableImg = function(id, thumbnail) {\n            var previewing = previewGeneration[id] || new qq.Promise().failure(), notAvailableImgPlacement = new qq.Promise();\n            cachedThumbnailNotAvailableImg.then(function(img) {\n                previewing.then(function() {\n                    notAvailableImgPlacement.success();\n                }, function() {\n                    maybeScalePlaceholderViaCss(img, thumbnail);\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        notAvailableImgPlacement.success();\n                    };\n                    thumbnail.src = img.src;\n                    show(thumbnail);\n                });\n            });\n            return notAvailableImgPlacement;\n        }, parseAndGetTemplate = function() {\n            var scriptEl, scriptHtml, fileListNode, tempTemplateEl, fileListEl, defaultButton, dropArea, thumbnail, dropProcessing, dropTextEl, uploaderEl;\n            log(\"Parsing template\");\n            if (options.templateIdOrEl == null) {\n                throw new Error(\"You MUST specify either a template element or ID!\");\n            }\n            if (qq.isString(options.templateIdOrEl)) {\n                scriptEl = document.getElementById(options.templateIdOrEl);\n                if (scriptEl === null) {\n                    throw new Error(qq.format(\"Cannot find template script at ID '{}'!\", options.templateIdOrEl));\n                }\n                scriptHtml = scriptEl.innerHTML;\n            } else {\n                if (options.templateIdOrEl.innerHTML === undefined) {\n                    throw new Error(\"You have specified an invalid value for the template option!  \" + \"It must be an ID or an Element.\");\n                }\n                scriptHtml = options.templateIdOrEl.innerHTML;\n            }\n            scriptHtml = qq.trimStr(scriptHtml);\n            tempTemplateEl = document.createElement(\"div\");\n            tempTemplateEl.appendChild(qq.toElement(scriptHtml));\n            uploaderEl = qq(tempTemplateEl).getFirstByClass(selectorClasses.uploader);\n            if (options.button) {\n                defaultButton = qq(tempTemplateEl).getFirstByClass(selectorClasses.button);\n                if (defaultButton) {\n                    qq(defaultButton).remove();\n                }\n            }\n            if (!qq.DragAndDrop || !qq.supportedFeatures.fileDrop) {\n                dropProcessing = qq(tempTemplateEl).getFirstByClass(selectorClasses.dropProcessing);\n                if (dropProcessing) {\n                    qq(dropProcessing).remove();\n                }\n            }\n            dropArea = qq(tempTemplateEl).getFirstByClass(selectorClasses.drop);\n            if (dropArea && !qq.DragAndDrop) {\n                log(\"DnD module unavailable.\", \"info\");\n                qq(dropArea).remove();\n            }\n            if (!qq.supportedFeatures.fileDrop) {\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (dropArea && qq(dropArea).hasAttribute(HIDE_DROPZONE_ATTR)) {\n                    qq(dropArea).css({\n                        display: \"none\"\n                    });\n                }\n            } else if (qq(uploaderEl).hasAttribute(DROPZPONE_TEXT_ATTR) && dropArea) {\n                dropTextEl = qq(dropArea).getFirstByClass(selectorClasses.dropText);\n                dropTextEl && qq(dropTextEl).remove();\n            }\n            thumbnail = qq(tempTemplateEl).getFirstByClass(selectorClasses.thumbnail);\n            if (!showThumbnails) {\n                thumbnail && qq(thumbnail).remove();\n            } else if (thumbnail) {\n                thumbnailMaxSize = parseInt(thumbnail.getAttribute(THUMBNAIL_MAX_SIZE_ATTR));\n                thumbnailMaxSize = thumbnailMaxSize > 0 ? thumbnailMaxSize : null;\n                serverScale = qq(thumbnail).hasAttribute(THUMBNAIL_SERVER_SCALE_ATTR);\n            }\n            showThumbnails = showThumbnails && thumbnail;\n            isEditElementsExist = qq(tempTemplateEl).getByClass(selectorClasses.editFilenameInput).length > 0;\n            isRetryElementExist = qq(tempTemplateEl).getByClass(selectorClasses.retry).length > 0;\n            fileListNode = qq(tempTemplateEl).getFirstByClass(selectorClasses.list);\n            if (fileListNode == null) {\n                throw new Error(\"Could not find the file list container in the template!\");\n            }\n            fileListEl = fileListNode.children[0].cloneNode(true);\n            fileListNode.innerHTML = \"\";\n            if (tempTemplateEl.getElementsByTagName(\"DIALOG\").length) {\n                document.createElement(\"dialog\");\n            }\n            log(\"Template parsing complete\");\n            return {\n                template: tempTemplateEl,\n                fileTemplate: fileListEl\n            };\n        }, prependFile = function(el, index, fileList) {\n            var parentEl = fileList, beforeEl = parentEl.firstChild;\n            if (index > 0) {\n                beforeEl = qq(parentEl).children()[index].nextSibling;\n            }\n            parentEl.insertBefore(el, beforeEl);\n        }, processNewQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, optFileOrBlob = queuedThumbRequest.optFileOrBlob, relatedThumbnailId = optFileOrBlob && optFileOrBlob.qqThumbnailId, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                maxSize: thumbnailMaxSize,\n                orient: true,\n                scale: true\n            };\n            if (qq.supportedFeatures.imagePreviews) {\n                if (thumbnail) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        displayWaitingImg(thumbnail).done(function() {\n                            previewGeneration[id] = new qq.Promise();\n                            previewGeneration[id].done(function() {\n                                setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                            });\n                            if (relatedThumbnailId != null) {\n                                useCachedPreview(id, relatedThumbnailId);\n                            } else {\n                                generateNewPreview(id, optFileOrBlob, spec);\n                            }\n                        });\n                    }\n                } else {\n                    generateNextQueuedPreview();\n                }\n            } else if (thumbnail) {\n                displayWaitingImg(thumbnail);\n                generateNextQueuedPreview();\n            }\n        }, processUpdateQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, thumbnailUrl = queuedThumbRequest.thumbnailUrl, showWaitingImg = queuedThumbRequest.showWaitingImg, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                scale: serverScale,\n                maxSize: thumbnailMaxSize\n            };\n            if (thumbnail) {\n                if (thumbnailUrl) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        if (showWaitingImg) {\n                            displayWaitingImg(thumbnail);\n                        }\n                        return options.imageGenerator.generate(thumbnailUrl, thumbnail, spec).then(function() {\n                            show(thumbnail);\n                            generatedThumbnails++;\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        }, function() {\n                            maybeSetDisplayNotAvailableImg(id, thumbnail);\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        });\n                    }\n                } else {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                    generateNextQueuedPreview();\n                }\n            }\n        }, setProgressBarWidth = function(id, percent) {\n            var bar = getProgress(id), progressBarSelector = id == null ? selectorClasses.totalProgressBar : selectorClasses.progressBar;\n            if (bar && !qq(bar).hasClass(progressBarSelector)) {\n                bar = qq(bar).getFirstByClass(progressBarSelector);\n            }\n            if (bar) {\n                qq(bar).css({\n                    width: percent + \"%\"\n                });\n                bar.setAttribute(\"aria-valuenow\", percent);\n            }\n        }, show = function(el) {\n            el && qq(el).removeClass(options.classes.hide);\n        }, useCachedPreview = function(targetThumbnailId, cachedThumbnailId) {\n            var targetThumbnail = getThumbnail(targetThumbnailId), cachedThumbnail = getThumbnail(cachedThumbnailId);\n            log(qq.format(\"ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.\", targetThumbnailId, cachedThumbnailId, cachedThumbnailId));\n            previewGeneration[cachedThumbnailId].then(function() {\n                generatedThumbnails++;\n                previewGeneration[targetThumbnailId].success();\n                log(qq.format(\"Now using previously generated thumbnail created for ID {} on ID {}.\", cachedThumbnailId, targetThumbnailId));\n                targetThumbnail.src = cachedThumbnail.src;\n                show(targetThumbnail);\n            }, function() {\n                previewGeneration[targetThumbnailId].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(targetThumbnailId, targetThumbnail);\n                }\n            });\n        };\n        qq.extend(options, spec);\n        log = options.log;\n        if (!qq.supportedFeatures.imagePreviews) {\n            options.limits.timeBetweenThumbs = 0;\n            options.limits.maxThumbs = 0;\n        }\n        container = options.containerEl;\n        showThumbnails = options.imageGenerator !== undefined;\n        templateDom = parseAndGetTemplate();\n        cacheThumbnailPlaceholders();\n        qq.extend(this, {\n            render: function() {\n                log(\"Rendering template in DOM.\");\n                generatedThumbnails = 0;\n                container.appendChild(templateDom.template.cloneNode(true));\n                hide(getDropProcessing());\n                this.hideTotalProgress();\n                fileList = options.fileContainerEl || getTemplateEl(container, selectorClasses.list);\n                log(\"Template rendering complete\");\n            },\n            renderFailure: function(message) {\n                var cantRenderEl = qq.toElement(message);\n                container.innerHTML = \"\";\n                container.appendChild(cantRenderEl);\n            },\n            reset: function() {\n                container.innerHTML = \"\";\n                this.render();\n            },\n            clearFiles: function() {\n                fileList.innerHTML = \"\";\n            },\n            disableCancel: function() {\n                isCancelDisabled = true;\n            },\n            addFile: function(id, name, prependInfo, hideForever, batch) {\n                var fileEl = templateDom.fileTemplate.cloneNode(true), fileNameEl = getTemplateEl(fileEl, selectorClasses.file), uploaderEl = getTemplateEl(container, selectorClasses.uploader), fileContainer = batch ? fileBatch.content : fileList, thumb;\n                if (batch) {\n                    fileBatch.map[id] = fileEl;\n                }\n                qq(fileEl).addClass(FILE_CLASS_PREFIX + id);\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (fileNameEl) {\n                    qq(fileNameEl).setText(name);\n                    fileNameEl.setAttribute(\"title\", name);\n                }\n                fileEl.setAttribute(FILE_ID_ATTR, id);\n                if (prependInfo) {\n                    prependFile(fileEl, prependInfo.index, fileContainer);\n                } else {\n                    fileContainer.appendChild(fileEl);\n                }\n                if (hideForever) {\n                    fileEl.style.display = \"none\";\n                    qq(fileEl).addClass(HIDDEN_FOREVER_CLASS);\n                } else {\n                    hide(getProgress(id));\n                    hide(getSize(id));\n                    hide(getDelete(id));\n                    hide(getRetry(id));\n                    hide(getPause(id));\n                    hide(getContinue(id));\n                    if (isCancelDisabled) {\n                        this.hideCancel(id);\n                    }\n                    thumb = getThumbnail(id);\n                    if (thumb && !thumb.src) {\n                        cachedWaitingForThumbnailImg.then(function(waitingImg) {\n                            thumb.src = waitingImg.src;\n                            if (waitingImg.style.maxHeight && waitingImg.style.maxWidth) {\n                                qq(thumb).css({\n                                    maxHeight: waitingImg.style.maxHeight,\n                                    maxWidth: waitingImg.style.maxWidth\n                                });\n                            }\n                            show(thumb);\n                        });\n                    }\n                }\n            },\n            addFileToCache: function(id, name, prependInfo, hideForever) {\n                this.addFile(id, name, prependInfo, hideForever, true);\n            },\n            addCacheToDom: function() {\n                fileList.appendChild(fileBatch.content);\n                fileBatch.content = document.createDocumentFragment();\n                fileBatch.map = {};\n            },\n            removeFile: function(id) {\n                qq(getFile(id)).remove();\n            },\n            getFileId: function(el) {\n                var currentNode = el;\n                if (currentNode) {\n                    while (currentNode.getAttribute(FILE_ID_ATTR) == null) {\n                        currentNode = currentNode.parentNode;\n                    }\n                    return parseInt(currentNode.getAttribute(FILE_ID_ATTR));\n                }\n            },\n            getFileList: function() {\n                return fileList;\n            },\n            markFilenameEditable: function(id) {\n                var filename = getFilename(id);\n                filename && qq(filename).addClass(options.classes.editable);\n            },\n            updateFilename: function(id, name) {\n                var filenameEl = getFilename(id);\n                if (filenameEl) {\n                    qq(filenameEl).setText(name);\n                    filenameEl.setAttribute(\"title\", name);\n                }\n            },\n            hideFilename: function(id) {\n                hide(getFilename(id));\n            },\n            showFilename: function(id) {\n                show(getFilename(id));\n            },\n            isFileName: function(el) {\n                return qq(el).hasClass(selectorClasses.file);\n            },\n            getButton: function() {\n                return options.button || getTemplateEl(container, selectorClasses.button);\n            },\n            hideDropProcessing: function() {\n                hide(getDropProcessing());\n            },\n            showDropProcessing: function() {\n                show(getDropProcessing());\n            },\n            getDropZone: function() {\n                return getTemplateEl(container, selectorClasses.drop);\n            },\n            isEditFilenamePossible: function() {\n                return isEditElementsExist;\n            },\n            hideRetry: function(id) {\n                hide(getRetry(id));\n            },\n            isRetryPossible: function() {\n                return isRetryElementExist;\n            },\n            showRetry: function(id) {\n                show(getRetry(id));\n            },\n            getFileContainer: function(id) {\n                return getFile(id);\n            },\n            showEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).addClass(options.classes.editable);\n            },\n            isHiddenForever: function(id) {\n                return qq(getFile(id)).hasClass(HIDDEN_FOREVER_CLASS);\n            },\n            hideEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).removeClass(options.classes.editable);\n            },\n            isEditIcon: function(el) {\n                return qq(el).hasClass(selectorClasses.editNameIcon, true);\n            },\n            getEditInput: function(id) {\n                return getTemplateEl(getFile(id), selectorClasses.editFilenameInput);\n            },\n            isEditInput: function(el) {\n                return qq(el).hasClass(selectorClasses.editFilenameInput, true);\n            },\n            updateProgress: function(id, loaded, total) {\n                var bar = getProgress(id), percent;\n                if (bar && total > 0) {\n                    percent = Math.round(loaded / total * 100);\n                    if (percent === 100) {\n                        hide(bar);\n                    } else {\n                        show(bar);\n                    }\n                    setProgressBarWidth(id, percent);\n                }\n            },\n            updateTotalProgress: function(loaded, total) {\n                this.updateProgress(null, loaded, total);\n            },\n            hideProgress: function(id) {\n                var bar = getProgress(id);\n                bar && hide(bar);\n            },\n            hideTotalProgress: function() {\n                this.hideProgress();\n            },\n            resetProgress: function(id) {\n                setProgressBarWidth(id, 0);\n                this.hideTotalProgress(id);\n            },\n            resetTotalProgress: function() {\n                this.resetProgress();\n            },\n            showCancel: function(id) {\n                if (!isCancelDisabled) {\n                    var cancel = getCancel(id);\n                    cancel && qq(cancel).removeClass(options.classes.hide);\n                }\n            },\n            hideCancel: function(id) {\n                hide(getCancel(id));\n            },\n            isCancel: function(el) {\n                return qq(el).hasClass(selectorClasses.cancel, true);\n            },\n            allowPause: function(id) {\n                show(getPause(id));\n                hide(getContinue(id));\n            },\n            uploadPaused: function(id) {\n                this.setStatusText(id, options.text.paused);\n                this.allowContinueButton(id);\n                hide(getSpinner(id));\n            },\n            hidePause: function(id) {\n                hide(getPause(id));\n            },\n            isPause: function(el) {\n                return qq(el).hasClass(selectorClasses.pause, true);\n            },\n            isContinueButton: function(el) {\n                return qq(el).hasClass(selectorClasses.continueButton, true);\n            },\n            allowContinueButton: function(id) {\n                show(getContinue(id));\n                hide(getPause(id));\n            },\n            uploadContinued: function(id) {\n                this.setStatusText(id, \"\");\n                this.allowPause(id);\n                show(getSpinner(id));\n            },\n            showDeleteButton: function(id) {\n                show(getDelete(id));\n            },\n            hideDeleteButton: function(id) {\n                hide(getDelete(id));\n            },\n            isDeleteButton: function(el) {\n                return qq(el).hasClass(selectorClasses.deleteButton, true);\n            },\n            isRetry: function(el) {\n                return qq(el).hasClass(selectorClasses.retry, true);\n            },\n            updateSize: function(id, text) {\n                var size = getSize(id);\n                if (size) {\n                    show(size);\n                    qq(size).setText(text);\n                }\n            },\n            setStatusText: function(id, text) {\n                var textEl = getTemplateEl(getFile(id), selectorClasses.statusText);\n                if (textEl) {\n                    if (text == null) {\n                        qq(textEl).clearText();\n                    } else {\n                        qq(textEl).setText(text);\n                    }\n                }\n            },\n            hideSpinner: function(id) {\n                qq(getFile(id)).removeClass(IN_PROGRESS_CLASS);\n                hide(getSpinner(id));\n            },\n            showSpinner: function(id) {\n                qq(getFile(id)).addClass(IN_PROGRESS_CLASS);\n                show(getSpinner(id));\n            },\n            generatePreview: function(id, optFileOrBlob, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        id: id,\n                        customResizeFunction: customResizeFunction,\n                        optFileOrBlob: optFileOrBlob\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            updateThumbnail: function(id, thumbnailUrl, showWaitingImg, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        customResizeFunction: customResizeFunction,\n                        update: true,\n                        id: id,\n                        thumbnailUrl: thumbnailUrl,\n                        showWaitingImg: showWaitingImg\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            hasDialog: function(type) {\n                return qq.supportedFeatures.dialogElement && !!getDialog(type);\n            },\n            showDialog: function(type, message, defaultValue) {\n                var dialog = getDialog(type), messageEl = getTemplateEl(dialog, selectorClasses.dialogMessage), inputEl = dialog.getElementsByTagName(\"INPUT\")[0], cancelBtn = getTemplateEl(dialog, selectorClasses.dialogCancelButton), okBtn = getTemplateEl(dialog, selectorClasses.dialogOkButton), promise = new qq.Promise(), closeHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    okBtn && okBtn.removeEventListener(\"click\", okClickHandler);\n                    promise.failure();\n                }, cancelClickHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    dialog.close();\n                }, okClickHandler = function() {\n                    dialog.removeEventListener(\"close\", closeHandler);\n                    okBtn.removeEventListener(\"click\", okClickHandler);\n                    dialog.close();\n                    promise.success(inputEl && inputEl.value);\n                };\n                dialog.addEventListener(\"close\", closeHandler);\n                cancelBtn.addEventListener(\"click\", cancelClickHandler);\n                okBtn && okBtn.addEventListener(\"click\", okClickHandler);\n                if (inputEl) {\n                    inputEl.value = defaultValue;\n                }\n                messageEl.textContent = message;\n                dialog.showModal();\n                return promise;\n            }\n        });\n    };\n    qq.UiEventHandler = function(s, protectedApi) {\n        \"use strict\";\n        var disposer = new qq.DisposeSupport(), spec = {\n            eventType: \"click\",\n            attachTo: null,\n            onHandled: function(target, event) {}\n        };\n        qq.extend(this, {\n            addHandler: function(element) {\n                addHandler(element);\n            },\n            dispose: function() {\n                disposer.dispose();\n            }\n        });\n        function addHandler(element) {\n            disposer.attach(element, spec.eventType, function(event) {\n                event = event || window.event;\n                var target = event.target || event.srcElement;\n                spec.onHandled(target, event);\n            });\n        }\n        qq.extend(protectedApi, {\n            getFileIdFromItem: function(item) {\n                return item.qqFileId;\n            },\n            getDisposeSupport: function() {\n                return disposer;\n            }\n        });\n        qq.extend(spec, s);\n        if (spec.attachTo) {\n            addHandler(spec.attachTo);\n        }\n    };\n    qq.FileButtonsClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onDeleteFile: function(fileId) {},\n            onCancel: function(fileId) {},\n            onRetry: function(fileId) {},\n            onPause: function(fileId) {},\n            onContinue: function(fileId) {},\n            onGetName: function(fileId) {}\n        }, buttonHandlers = {\n            cancel: function(id) {\n                spec.onCancel(id);\n            },\n            retry: function(id) {\n                spec.onRetry(id);\n            },\n            deleteButton: function(id) {\n                spec.onDeleteFile(id);\n            },\n            pause: function(id) {\n                spec.onPause(id);\n            },\n            continueButton: function(id) {\n                spec.onContinue(id);\n            }\n        };\n        function examineEvent(target, event) {\n            qq.each(buttonHandlers, function(buttonType, handler) {\n                var firstLetterCapButtonType = buttonType.charAt(0).toUpperCase() + buttonType.slice(1), fileId;\n                if (spec.templating[\"is\" + firstLetterCapButtonType](target)) {\n                    fileId = spec.templating.getFileId(target);\n                    qq.preventDefault(event);\n                    spec.log(qq.format(\"Detected valid file button click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    handler(fileId);\n                    return false;\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            classes: {\n                file: \"qq-upload-file\",\n                editNameIcon: \"qq-edit-filename-icon\"\n            },\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {}\n        };\n        qq.extend(spec, s);\n        function examineEvent(target, event) {\n            if (spec.templating.isFileName(target) || spec.templating.isEditIcon(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    qq.preventDefault(event);\n                    inheritedInternalApi.handleFilenameEdit(fileId, target, true);\n                }\n            }\n        }\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusInHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            onGetUploadStatus: function(fileId) {},\n            log: function(message, lvl) {}\n        };\n        if (!inheritedInternalApi) {\n            inheritedInternalApi = {};\n        }\n        function handleInputFocus(target, event) {\n            if (spec.templating.isEditInput(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename input focus event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    inheritedInternalApi.handleFilenameEdit(fileId, target);\n                }\n            }\n        }\n        spec.eventType = \"focusin\";\n        spec.onHandled = handleInputFocus;\n        qq.extend(spec, s);\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusHandler = function(spec) {\n        \"use strict\";\n        spec.eventType = \"focus\";\n        spec.attachTo = null;\n        qq.extend(this, new qq.FilenameInputFocusInHandler(spec, {}));\n    };\n    qq.FilenameEditHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {},\n            onSetName: function(fileId, newName) {},\n            onEditingStatusChange: function(fileId, isEditing) {}\n        };\n        function getFilenameSansExtension(fileId) {\n            var filenameSansExt = spec.onGetName(fileId), extIdx = filenameSansExt.lastIndexOf(\".\");\n            if (extIdx > 0) {\n                filenameSansExt = filenameSansExt.substr(0, extIdx);\n            }\n            return filenameSansExt;\n        }\n        function getOriginalExtension(fileId) {\n            var origName = spec.onGetName(fileId);\n            return qq.getExtension(origName);\n        }\n        function handleNameUpdate(newFilenameInputEl, fileId) {\n            var newName = newFilenameInputEl.value, origExtension;\n            if (newName !== undefined && qq.trimStr(newName).length > 0) {\n                origExtension = getOriginalExtension(fileId);\n                if (origExtension !== undefined) {\n                    newName = newName + \".\" + origExtension;\n                }\n                spec.onSetName(fileId, newName);\n            }\n            spec.onEditingStatusChange(fileId, false);\n        }\n        function registerInputBlurHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"blur\", function() {\n                handleNameUpdate(inputEl, fileId);\n            });\n        }\n        function registerInputEnterKeyHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"keyup\", function(event) {\n                var code = event.keyCode || event.which;\n                if (code === 13) {\n                    handleNameUpdate(inputEl, fileId);\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n        qq.extend(inheritedInternalApi, {\n            handleFilenameEdit: function(id, target, focusInput) {\n                var newFilenameInputEl = spec.templating.getEditInput(id);\n                spec.onEditingStatusChange(id, true);\n                newFilenameInputEl.value = getFilenameSansExtension(id);\n                if (focusInput) {\n                    newFilenameInputEl.focus();\n                }\n                registerInputBlurHandler(newFilenameInputEl, id);\n                registerInputEnterKeyHandler(newFilenameInputEl, id);\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=fine-uploader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/fine-uploader.js\n// module id = 10\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/index.js!./fine-uploader-gallery.min.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../vue-style-loader/lib/addStylesClient.js\")(\"44ff462e\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/fine-uploader-gallery.min.css\n// module id = 11\n// module chunks = 0","var escape = require(\"../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".qq-gallery .qq-btn{float:right;border:none;padding:0;margin:0;box-shadow:none}.qq-gallery .qq-upload-button{display:inline;width:105px;padding:7px 10px;float:left;text-align:center;background:#00abc7;color:#fff;border-radius:2px;border:1px solid #37b7cc;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.37),inset 1px 0 1px hsla(0,0%,100%,.07),0 1px 0 rgba(0,0,0,.36),inset 0 -2px 12px rgba(0,0,0,.08)}.qq-gallery .qq-upload-button-hover{background:#33b6cc}.qq-gallery .qq-upload-button-focus{outline:1px dotted #000}.qq-gallery.qq-uploader{position:relative;min-height:200px;max-height:490px;overflow-y:hidden;width:inherit;border-radius:6px;border:1px dashed #ccc;background-color:#fafafa;padding:20px}.qq-gallery.qq-uploader:before{content:attr(qq-drop-area-text) \\\" \\\";position:absolute;font-size:200%;left:0;width:100%;text-align:center;top:45%;opacity:.25}.qq-gallery .qq-upload-drop-area,.qq-upload-extra-drop-area{position:absolute;top:0;left:0;width:100%;height:100%;min-height:30px;z-index:2;background:#f9f9f9;border-radius:4px;text-align:center}.qq-gallery .qq-upload-drop-area span{display:block;position:absolute;top:50%;width:100%;margin-top:-8px;font-size:16px}.qq-gallery .qq-upload-extra-drop-area{position:relative;margin-top:50px;font-size:16px;padding-top:30px;height:20px;min-height:40px}.qq-gallery .qq-upload-drop-area-active{background:#fdfdfd;border-radius:4px}.qq-gallery .qq-upload-list{margin:0;padding:10px 0 0;list-style:none;max-height:450px;overflow-y:auto;clear:both;box-shadow:none}.qq-gallery .qq-upload-list li{display:inline-block;position:relative;max-width:120px;margin:0 25px 25px 0;padding:0;line-height:16px;font-size:13px;color:#424242;background-color:#fff;border-radius:2px;box-shadow:0 1px 1px 0 rgba(0,0,0,.22);vertical-align:top;height:186px}.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-failed-text,.qq-gallery .qq-upload-pause,.qq-gallery .qq-upload-retry,.qq-gallery .qq-upload-size,.qq-gallery .qq-upload-spinner{display:inline}.qq-gallery .qq-upload-continue:hover,.qq-gallery .qq-upload-delete:hover,.qq-gallery .qq-upload-pause:hover,.qq-gallery .qq-upload-retry:hover{background-color:transparent}.qq-gallery .qq-upload-cancel,.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-pause{cursor:pointer}.qq-gallery .qq-upload-continue,.qq-gallery .qq-upload-delete,.qq-gallery .qq-upload-pause{border:none;background:0 0;color:#00a0ba;font-size:12px;padding:0}.qq-gallery .qq-upload-status-text{color:#333;font-size:12px;padding-left:3px;padding-top:2px;width:inherit;display:none;width:108px}.qq-gallery .qq-upload-fail .qq-upload-status-text{text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;display:block}.qq-gallery .qq-upload-retrying .qq-upload-status-text{display:inline-block}.qq-gallery .qq-upload-retrying .qq-progress-bar-container{display:none}.qq-gallery .qq-upload-cancel{background-color:#525252;color:#f7f7f7;font-weight:700;font-family:Arial,Helvetica,sans-serif;border-radius:12px;border:none;height:22px;width:22px;padding:4px;position:absolute;right:-5px;top:-6px;margin:0;line-height:17px}.qq-gallery .qq-upload-cancel:hover{background-color:#525252}.qq-gallery .qq-upload-retry{cursor:pointer;position:absolute;top:30px;left:50%;margin-left:-31px;box-shadow:inset 0 1px 1px hsla(0,0%,100%,.37),inset 1px 0 1px hsla(0,0%,100%,.07),0 4px 4px rgba(0,0,0,.5),inset 0 -2px 12px rgba(0,0,0,.08);padding:3px 4px;border:1px solid #d2ddc7;border-radius:2px;color:inherit;background-color:#ebf6e0;z-index:1}.qq-gallery .qq-upload-retry:hover{background-color:#f7ffec}.qq-gallery .qq-file-info{padding:10px 6px 4px;margin-top:-3px;border-radius:0 0 2px 2px;text-align:left;overflow:hidden}.qq-gallery .qq-file-info .qq-file-name{position:relative}.qq-gallery .qq-upload-file{display:block;margin-right:0;margin-bottom:3px;width:auto;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden}.qq-gallery .qq-upload-spinner{display:inline-block;background:url(\" + escape(require(\"./loading.gif\")) + \");position:absolute;left:50%;margin-left:-7px;top:53px;width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-drop-processing{display:block}.qq-gallery .qq-drop-processing-spinner{display:inline-block;background:url(\" + escape(require(\"./processing.gif\")) + \");width:24px;height:24px;vertical-align:text-bottom}.qq-gallery .qq-upload-failed-text{display:none;font-style:italic;font-weight:700}.qq-gallery .qq-upload-failed-icon{display:none;width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-upload-fail .qq-upload-failed-text,.qq-gallery .qq-upload-retrying .qq-upload-failed-text{display:inline}.qq-gallery .qq-upload-list li.qq-upload-success{background-color:#f2f7ed}.qq-gallery .qq-upload-list li.qq-upload-fail{background-color:#f5eded;box-shadow:0 0 1px 0 red;border:0}.qq-gallery .qq-progress-bar{display:block;background:#00abc7;width:0;height:15px;border-radius:6px;margin-bottom:3px}.qq-gallery .qq-total-progress-bar{height:25px;border-radius:9px}.qq-gallery .qq-total-progress-bar-container{margin-left:9px;display:inline;float:right;width:500px}.qq-gallery .qq-upload-size{float:left;font-size:11px;color:#929292;margin-bottom:3px;margin-right:0;display:inline-block}.qq-gallery INPUT.qq-edit-filename{position:absolute;opacity:0;z-index:-1}.qq-gallery .qq-upload-file.qq-editable{cursor:pointer;margin-right:20px}.qq-gallery .qq-edit-filename-icon.qq-editable{display:inline-block;cursor:pointer;position:absolute;right:0;top:0}.qq-gallery INPUT.qq-edit-filename.qq-editing{position:static;height:28px;width:90px;width:-moz-available;padding:0 8px;margin-bottom:3px;border:1px solid #ccc;border-radius:2px;font-size:13px;opacity:1}.qq-gallery .qq-edit-filename-icon{display:none;background:url(\" + escape(require(\"./edit.gif\")) + \");width:15px;height:15px;vertical-align:text-bottom}.qq-gallery .qq-delete-icon{background:url(\" + escape(require(\"./trash.gif\")) + \")}.qq-gallery .qq-delete-icon,.qq-gallery .qq-retry-icon{width:15px;height:15px;vertical-align:sub;display:inline-block}.qq-gallery .qq-retry-icon{background:url(\" + escape(require(\"./retry.gif\")) + \");float:none}.qq-gallery .qq-continue-icon{background:url(\" + escape(require(\"./continue.gif\")) + \")}.qq-gallery .qq-continue-icon,.qq-gallery .qq-pause-icon{width:15px;height:15px;vertical-align:sub;display:inline-block}.qq-gallery .qq-pause-icon{background:url(\" + escape(require(\"./pause.gif\")) + \")}.qq-gallery .qq-hide{display:none}.qq-gallery .qq-in-progress .qq-thumbnail-wrapper{opacity:.5}.qq-gallery .qq-thumbnail-wrapper{overflow:hidden;position:relative;height:120px;width:120px}.qq-gallery .qq-thumbnail-selector{border-radius:2px 2px 0 0;bottom:0;top:0;margin:auto;display:block}:root *>.qq-gallery .qq-thumbnail-selector{position:relative;top:50%;transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%)}.qq-gallery.qq-uploader DIALOG{display:none}.qq-gallery.qq-uploader DIALOG[open]{display:block}.qq-gallery.qq-uploader DIALOG .qq-dialog-buttons{text-align:center;padding-top:10px}.qq-gallery.qq-uploader DIALOG .qq-dialog-buttons BUTTON{margin-left:5px;margin-right:5px}.qq-gallery.qq-uploader DIALOG .qq-dialog-message-selector{padding-bottom:10px}.qq-gallery .qq-uploader DIALOG::backdrop{background-color:rgba(0,0,0,.7)}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/fine-uploader/fine-uploader/fine-uploader-gallery.min.css\n// module id = 12\n// module chunks = 0","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/url/escape.js\n// module id = 13\n// module chunks = 0","module.exports = \"data:image/gif;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/loading.gif\n// module id = 14\n// module chunks = 0","module.exports = \"data:image/gif;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/processing.gif\n// module id = 15\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhDwAPALMPAHNzc7+/v2ZmZuXl5aWlpU1NTYCAgMzMzJmZmbKysllZWUBAQPLy8tnZ2TMzM////yH5BAEAAA8ALAAAAAAPAA8AAARD8MlJm0g0z+Ic1lITNEv3ZaSXAlpqNgCDll0XtHStyFXe7RpA7cejBBgKXXFy8CAdQA3CxDAsKYLaDSRZAAgDrpgbAQA7\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/edit.gif\n// module id = 16\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhDwAPALMMAE1NTY2NjdnZ2b+/v/Ly8llZWaWlpXNzc5mZmczMzGZmZjMzM////wAAAAAAAAAAACH5BAEAAAwALAAAAAAPAA8AAARMkMlpEJoYqa2WL9zFHF5pesCUrGybYAEnbwHWAWiu2EvSMQtFIsjzLYBC4qRjRA53y94v+CxOk1AJ81qNDjoEqlJ7MmUZAot6/WJEAAA7\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/trash.gif\n// module id = 17\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhDwAPALMOAGZmZZWVlNvb26CgoFpaWcTEw4mJiefn505OTX19fdDQz/Pz83FxcUJCQf///wAAACH5BAEAAA4ALAAAAAAPAA8AAARa0Mmp6jxTLtN6N0aQCUiDJEPiAdNSJgvlYc7QJJmTMLwiEQ1aLrNosIYSQGOhaDCQEkbD1yBAHVIh9GCSCHgMXEYlchQ7hZYKEUt6GAOpSZAJhEoeQ7tFseQiADs=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/retry.gif\n// module id = 18\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhDwAPAMQQAOfn55WVlImJibi4t6ysrMTEw9vb22ZmZX19faCgoFpaWfPz805OTdDQz3FxcUJCQf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABAALAAAAAAPAA8AAAVaICSORtMsIjCOhPK8jzMw6+K8h4C4bzMiD4VvxAuIGg+GalRwOI0QwYOwqo4OD5S1+tpab0uvSJrwFkaApMFKeEAhgeRgtEi8ziNp0Ml4zasDWDAIa14LJlYhADs=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/continue.gif\n// module id = 19\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhDwAPALMIAOXl5dnZ2b+/v0BAQGZmZpmZmczMzDMzM////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAgALAAAAAAPAA8AAAQ7EMlJ6xznCBTyAFV2FIghGmFGmhlKieuZjqX8qnU7x/pNswfXBJYL7opCCRGYRCxtE4J0E5ASQJbsJAIAOw==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fine-uploader/fine-uploader/pause.gif\n// module id = 20\n// module chunks = 0","/*!\n\nHolder - client side image placeholders\nVersion 2.9.7+5g5ho\n© 2020 Ivan Malopinsky - https://imsky.co\n\nSite:     http://holderjs.com\nIssues:   https://github.com/imsky/holder/issues\nLicense:  MIT\n\n*/\n(function (window) {\n  if (!window.document) return;\n  var document = window.document;\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n    if (!document.querySelectorAll) {\n      document.querySelectorAll = function (selectors) {\n        var style = document.createElement('style'), elements = [], element;\n        document.documentElement.firstChild.appendChild(style);\n        document._qsa = [];\n\n        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';\n        window.scrollBy(0, 0);\n        style.parentNode.removeChild(style);\n\n        while (document._qsa.length) {\n          element = document._qsa.shift();\n          element.style.removeAttribute('x-qsa');\n          elements.push(element);\n        }\n        document._qsa = null;\n        return elements;\n      };\n    }\n\n    if (!document.querySelector) {\n      document.querySelector = function (selectors) {\n        var elements = document.querySelectorAll(selectors);\n        return (elements.length) ? elements[0] : null;\n      };\n    }\n\n    if (!document.getElementsByClassName) {\n      document.getElementsByClassName = function (classNames) {\n        classNames = String(classNames).replace(/^|\\s+/g, '.');\n        return document.querySelectorAll(classNames);\n      };\n    }\n\n  //https://github.com/inexorabletash/polyfill\n  // ES5 15.2.3.14 Object.keys ( O )\n  // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      if (o !== Object(o)) { throw TypeError('Object.keys called on non-object'); }\n      var ret = [], p;\n      for (p in o) {\n        if (Object.prototype.hasOwnProperty.call(o, p)) {\n          ret.push(p);\n        }\n      }\n      return ret;\n    };\n  }\n\n  // ES5 15.4.4.18 Array.prototype.forEach ( callbackfn [ , thisArg ] )\n  // From https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function (fun /*, thisp */) {\n      if (this === void 0 || this === null) { throw TypeError(); }\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\") { throw TypeError(); }\n\n      var thisp = arguments[1], i;\n      for (i = 0; i < len; i++) {\n        if (i in t) {\n          fun.call(thisp, t[i], i, t);\n        }\n      }\n    };\n  }\n\n  //https://github.com/inexorabletash/polyfill/blob/master/web.js\n  (function (global) {\n    var B64_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    global.atob = global.atob || function (input) {\n      input = String(input);\n      var position = 0,\n          output = [],\n          buffer = 0, bits = 0, n;\n\n      input = input.replace(/\\s/g, '');\n      if ((input.length % 4) === 0) { input = input.replace(/=+$/, ''); }\n      if ((input.length % 4) === 1) { throw Error('InvalidCharacterError'); }\n      if (/[^+/0-9A-Za-z]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        n = B64_ALPHABET.indexOf(input.charAt(position));\n        buffer = (buffer << 6) | n;\n        bits += 6;\n\n        if (bits === 24) {\n          output.push(String.fromCharCode((buffer >> 16) & 0xFF));\n          output.push(String.fromCharCode((buffer >>  8) & 0xFF));\n          output.push(String.fromCharCode(buffer & 0xFF));\n          bits = 0;\n          buffer = 0;\n        }\n        position += 1;\n      }\n\n      if (bits === 12) {\n        buffer = buffer >> 4;\n        output.push(String.fromCharCode(buffer & 0xFF));\n      } else if (bits === 18) {\n        buffer = buffer >> 2;\n        output.push(String.fromCharCode((buffer >> 8) & 0xFF));\n        output.push(String.fromCharCode(buffer & 0xFF));\n      }\n\n      return output.join('');\n    };\n\n    global.btoa = global.btoa || function (input) {\n      input = String(input);\n      var position = 0,\n          out = [],\n          o1, o2, o3,\n          e1, e2, e3, e4;\n\n      if (/[^\\x00-\\xFF]/.test(input)) { throw Error('InvalidCharacterError'); }\n\n      while (position < input.length) {\n        o1 = input.charCodeAt(position++);\n        o2 = input.charCodeAt(position++);\n        o3 = input.charCodeAt(position++);\n\n        // 111111 112222 222233 333333\n        e1 = o1 >> 2;\n        e2 = ((o1 & 0x3) << 4) | (o2 >> 4);\n        e3 = ((o2 & 0xf) << 2) | (o3 >> 6);\n        e4 = o3 & 0x3f;\n\n        if (position === input.length + 2) {\n          e3 = 64; e4 = 64;\n        }\n        else if (position === input.length + 1) {\n          e4 = 64;\n        }\n\n        out.push(B64_ALPHABET.charAt(e1),\n                 B64_ALPHABET.charAt(e2),\n                 B64_ALPHABET.charAt(e3),\n                 B64_ALPHABET.charAt(e4));\n      }\n\n      return out.join('');\n    };\n  }(window));\n\n  //https://gist.github.com/jimeh/332357\n  if (!Object.prototype.hasOwnProperty){\n      /*jshint -W001, -W103 */\n      Object.prototype.hasOwnProperty = function(prop) {\n      var proto = this.__proto__ || this.constructor.prototype;\n      return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);\n    };\n      /*jshint +W001, +W103 */\n  }\n\n  // @license http://opensource.org/licenses/MIT\n  // copyright Paul Irish 2015\n\n\n  // Date.now() is supported everywhere except IE8. For IE8 we use the Date.now polyfill\n  //   github.com/Financial-Times/polyfill-service/blob/master/polyfills/Date.now/polyfill.js\n  // as Safari 6 doesn't have support for NavigationTiming, we use a Date.now() timestamp for relative values\n\n  // if you want values similar to what you'd get with real perf.now, place this towards the head of the page\n  // but in reality, you're just getting the delta between now() calls, so it's not terribly important where it's placed\n\n\n  (function(){\n\n    if ('performance' in window === false) {\n        window.performance = {};\n    }\n    \n    Date.now = (Date.now || function () {  // thanks IE8\n      return new Date().getTime();\n    });\n\n    if ('now' in window.performance === false){\n      \n      var nowOffset = Date.now();\n      \n      if (performance.timing && performance.timing.navigationStart){\n        nowOffset = performance.timing.navigationStart;\n      }\n\n      window.performance.now = function now(){\n        return Date.now() - nowOffset;\n      };\n    }\n\n  })();\n\n  //requestAnimationFrame polyfill for older Firefox/Chrome versions\n  if (!window.requestAnimationFrame) {\n    if (window.webkitRequestAnimationFrame && window.webkitCancelAnimationFrame) {\n    //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-webkit.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return webkitRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.webkitCancelAnimationFrame;\n    }(window));\n    } else if (window.mozRequestAnimationFrame && window.mozCancelAnimationFrame) {\n      //https://github.com/Financial-Times/polyfill-service/blob/master/polyfills/requestAnimationFrame/polyfill-moz.js\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return mozRequestAnimationFrame(function () {\n          callback(global.performance.now());\n        });\n      };\n\n      global.cancelAnimationFrame = global.mozCancelAnimationFrame;\n    }(window));\n    } else {\n    (function (global) {\n      global.requestAnimationFrame = function (callback) {\n        return global.setTimeout(callback, 1000 / 60);\n      };\n\n      global.cancelAnimationFrame = global.clearTimeout;\n    })(window);\n    }\n  }\n})(this);\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Holder\"] = factory();\n\telse\n\t\troot[\"Holder\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2020 Ivan Malopinsky - https://imsky.co\n\t*/\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*\n\tHolder.js - client side image placeholders\n\t(c) 2012-2020 Ivan Malopinsky - http://imsky.co\n\t*/\n\n\t//Libraries and functions\n\tvar onDomReady = __webpack_require__(2);\n\tvar querystring = __webpack_require__(3);\n\n\tvar SceneGraph = __webpack_require__(6);\n\tvar utils = __webpack_require__(7);\n\tvar SVG = __webpack_require__(8);\n\tvar DOM = __webpack_require__(9);\n\tvar Color = __webpack_require__(10);\n\tvar constants = __webpack_require__(11);\n\n\tvar svgRenderer = __webpack_require__(12);\n\tvar sgCanvasRenderer = __webpack_require__(15);\n\n\tvar extend = utils.extend;\n\tvar dimensionCheck = utils.dimensionCheck;\n\n\t//Constants and definitions\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar Holder = {\n\t    version: constants.version,\n\n\t    /**\n\t     * Adds a theme to default settings\n\t     *\n\t     * @param {string} name Theme name\n\t     * @param {Object} theme Theme object, with foreground, background, size, font, and fontweight properties.\n\t     */\n\t    addTheme: function(name, theme) {\n\t        name != null && theme != null && (App.settings.themes[name] = theme);\n\t        delete App.vars.cache.themeKeys;\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Appends a placeholder to an element\n\t     *\n\t     * @param {string} src Placeholder URL string\n\t     * @param el A selector or a reference to a DOM node\n\t     */\n\t    addImage: function(src, el) {\n\t        //todo: use jquery fallback if available for all QSA references\n\t        var nodes = DOM.getNodeArray(el);\n\t        nodes.forEach(function (node) {\n\t            var img = DOM.newEl('img');\n\t            var domProps = {};\n\t            domProps[App.setup.dataAttr] = src;\n\t            DOM.setAttr(img, domProps);\n\t            node.appendChild(img);\n\t        });\n\t        return this;\n\t    },\n\n\t    /**\n\t     * Sets whether or not an image is updated on resize.\n\t     * If an image is set to be updated, it is immediately rendered.\n\t     *\n\t     * @param {Object} el Image DOM element\n\t     * @param {Boolean} value Resizable update flag value\n\t     */\n\t    setResizeUpdate: function(el, value) {\n\t        if (el.holderData) {\n\t            el.holderData.resizeUpdate = !!value;\n\t            if (el.holderData.resizeUpdate) {\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    },\n\n\t    /**\n\t     * Runs Holder with options. By default runs Holder on all images with \"holder.js\" in their source attributes.\n\t     *\n\t     * @param {Object} userOptions Options object, can contain domain, themes, images, and bgnodes properties\n\t     */\n\t    run: function(userOptions) {\n\t        //todo: split processing into separate queues\n\t        userOptions = userOptions || {};\n\t        var engineSettings = {};\n\t        var options = extend(App.settings, userOptions);\n\n\t        App.vars.preempted = true;\n\t        App.vars.dataAttr = options.dataAttr || App.setup.dataAttr;\n\n\t        engineSettings.renderer = options.renderer ? options.renderer : App.setup.renderer;\n\t        if (App.setup.renderers.join(',').indexOf(engineSettings.renderer) === -1) {\n\t            engineSettings.renderer = App.setup.supportsSVG ? 'svg' : (App.setup.supportsCanvas ? 'canvas' : 'html');\n\t        }\n\n\t        var images = DOM.getNodeArray(options.images);\n\t        var bgnodes = DOM.getNodeArray(options.bgnodes);\n\t        var stylenodes = DOM.getNodeArray(options.stylenodes);\n\t        var objects = DOM.getNodeArray(options.objects);\n\n\t        engineSettings.stylesheets = [];\n\t        engineSettings.svgXMLStylesheet = true;\n\t        engineSettings.noFontFallback = !!options.noFontFallback;\n\t        engineSettings.noBackgroundSize = !!options.noBackgroundSize;\n\n\t        stylenodes.forEach(function (styleNode) {\n\t            if (styleNode.attributes.rel && styleNode.attributes.href && styleNode.attributes.rel.value == 'stylesheet') {\n\t                var href = styleNode.attributes.href.value;\n\t                //todo: write isomorphic relative-to-absolute URL function\n\t                var proxyLink = DOM.newEl('a');\n\t                proxyLink.href = href;\n\t                var stylesheetURL = proxyLink.protocol + '//' + proxyLink.host + proxyLink.pathname + proxyLink.search;\n\t                engineSettings.stylesheets.push(stylesheetURL);\n\t            }\n\t        });\n\n\t        bgnodes.forEach(function (bgNode) {\n\t            //Skip processing background nodes if getComputedStyle is unavailable, since only modern browsers would be able to use canvas or SVG to render to background\n\t            if (!global.getComputedStyle) return;\n\t            var backgroundImage = global.getComputedStyle(bgNode, null).getPropertyValue('background-image');\n\t            var dataBackgroundImage = bgNode.getAttribute('data-background-src');\n\t            var rawURL = dataBackgroundImage || backgroundImage;\n\n\t            var holderURL = null;\n\t            var holderString = options.domain + '/';\n\t            var holderStringIndex = rawURL.indexOf(holderString);\n\n\t            if (holderStringIndex === 0) {\n\t                holderURL = rawURL;\n\t            } else if (holderStringIndex === 1 && rawURL[0] === '?') {\n\t                holderURL = rawURL.slice(1);\n\t            } else {\n\t                var fragment = rawURL.substr(holderStringIndex).match(/([^\\\"]*)\"?\\)/);\n\t                if (fragment !== null) {\n\t                    holderURL = fragment[1];\n\t                } else if (rawURL.indexOf('url(') === 0) {\n\t                    throw 'Holder: unable to parse background URL: ' + rawURL;\n\t                }\n\t            }\n\n\t            if (holderURL) {\n\t                var holderFlags = parseURL(holderURL, options);\n\t                if (holderFlags) {\n\t                    prepareDOMElement({\n\t                        mode: 'background',\n\t                        el: bgNode,\n\t                        flags: holderFlags,\n\t                        engineSettings: engineSettings\n\t                    });\n\t                }\n\t            }\n\t        });\n\n\t        objects.forEach(function (object) {\n\t            var objectAttr = {};\n\n\t            try {\n\t                objectAttr.data = object.getAttribute('data');\n\t                objectAttr.dataSrc = object.getAttribute(App.vars.dataAttr);\n\t            } catch (e) {}\n\n\t            var objectHasSrcURL = objectAttr.data != null && objectAttr.data.indexOf(options.domain) === 0;\n\t            var objectHasDataSrcURL = objectAttr.dataSrc != null && objectAttr.dataSrc.indexOf(options.domain) === 0;\n\n\t            if (objectHasSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.data, object);\n\t            } else if (objectHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, objectAttr.dataSrc, object);\n\t            }\n\t        });\n\n\t        images.forEach(function (image) {\n\t            var imageAttr = {};\n\n\t            try {\n\t                imageAttr.src = image.getAttribute('src');\n\t                imageAttr.dataSrc = image.getAttribute(App.vars.dataAttr);\n\t                imageAttr.rendered = image.getAttribute('data-holder-rendered');\n\t            } catch (e) {}\n\n\t            var imageHasSrc = imageAttr.src != null;\n\t            var imageHasDataSrcURL = imageAttr.dataSrc != null && imageAttr.dataSrc.indexOf(options.domain) === 0;\n\t            var imageRendered = imageAttr.rendered != null && imageAttr.rendered == 'true';\n\n\t            if (imageHasSrc) {\n\t                if (imageAttr.src.indexOf(options.domain) === 0) {\n\t                    prepareImageElement(options, engineSettings, imageAttr.src, image);\n\t                } else if (imageHasDataSrcURL) {\n\t                    //Image has a valid data-src and an invalid src\n\t                    if (imageRendered) {\n\t                        //If the placeholder has already been render, re-render it\n\t                        prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t                    } else {\n\t                        //If the placeholder has not been rendered, check if the image exists and render a fallback if it doesn't\n\t                        (function(src, options, engineSettings, dataSrc, image) {\n\t                            utils.imageExists(src, function(exists) {\n\t                                if (!exists) {\n\t                                    prepareImageElement(options, engineSettings, dataSrc, image);\n\t                                }\n\t                            });\n\t                        })(imageAttr.src, options, engineSettings, imageAttr.dataSrc, image);\n\t                    }\n\t                }\n\t            } else if (imageHasDataSrcURL) {\n\t                prepareImageElement(options, engineSettings, imageAttr.dataSrc, image);\n\t            }\n\t        });\n\n\t        return this;\n\t    }\n\t};\n\n\tvar App = {\n\t    settings: {\n\t        domain: 'holder.js',\n\t        images: 'img',\n\t        objects: 'object',\n\t        bgnodes: 'body .holderjs',\n\t        stylenodes: 'head link.holderjs',\n\t        themes: {\n\t            'gray': {\n\t                bg: '#EEEEEE',\n\t                fg: '#AAAAAA'\n\t            },\n\t            'social': {\n\t                bg: '#3a5a97',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'industrial': {\n\t                bg: '#434A52',\n\t                fg: '#C2F200'\n\t            },\n\t            'sky': {\n\t                bg: '#0D8FDB',\n\t                fg: '#FFFFFF'\n\t            },\n\t            'vine': {\n\t                bg: '#39DBAC',\n\t                fg: '#1E292C'\n\t            },\n\t            'lava': {\n\t                bg: '#F8591A',\n\t                fg: '#1C2846'\n\t            }\n\t        }\n\t    },\n\t    defaults: {\n\t        size: 10,\n\t        units: 'pt',\n\t        scale: 1 / 16\n\t    }\n\t};\n\n\t/**\n\t * Processes provided source attribute and sets up the appropriate rendering workflow\n\t *\n\t * @private\n\t * @param options Instance options from Holder.run\n\t * @param renderSettings Instance configuration\n\t * @param src Image URL\n\t * @param el Image DOM element\n\t */\n\tfunction prepareImageElement(options, engineSettings, src, el) {\n\t    var holderFlags = parseURL(src.substr(src.lastIndexOf(options.domain)), options);\n\t    if (holderFlags) {\n\t        prepareDOMElement({\n\t            mode: null,\n\t            el: el,\n\t            flags: holderFlags,\n\t            engineSettings: engineSettings\n\t        });\n\t    }\n\t}\n\n\t/**\n\t * Processes a Holder URL and extracts configuration from query string\n\t *\n\t * @private\n\t * @param url URL\n\t * @param instanceOptions Instance options from Holder.run\n\t */\n\tfunction parseURL(url, instanceOptions) {\n\t    var holder = {\n\t        theme: extend(App.settings.themes.gray, null),\n\t        stylesheets: instanceOptions.stylesheets,\n\t        instanceOptions: instanceOptions\n\t    };\n\n\t    var firstQuestionMark = url.indexOf('?');\n\t    var parts = [url];\n\n\t    if (firstQuestionMark !== -1) {\n\t        parts = [url.slice(0, firstQuestionMark), url.slice(firstQuestionMark + 1)];\n\t    }\n\n\t    var basics = parts[0].split('/');\n\n\t    holder.holderURL = url;\n\n\t    var dimensions = basics[1];\n\t    var dimensionData = dimensions.match(/([\\d]+p?)x([\\d]+p?)/);\n\n\t    if (!dimensionData) return false;\n\n\t    holder.fluid = dimensions.indexOf('p') !== -1;\n\n\t    holder.dimensions = {\n\t        width: dimensionData[1].replace('p', '%'),\n\t        height: dimensionData[2].replace('p', '%')\n\t    };\n\n\t    if (parts.length === 2) {\n\t        var options = querystring.parse(parts[1]);\n\n\t        // Dimensions\n\n\t        if (utils.truthy(options.ratio)) {\n\t            holder.fluid = true;\n\t            var ratioWidth = parseFloat(holder.dimensions.width.replace('%', ''));\n\t            var ratioHeight = parseFloat(holder.dimensions.height.replace('%', ''));\n\n\t            ratioHeight = Math.floor(100 * (ratioHeight / ratioWidth));\n\t            ratioWidth = 100;\n\n\t            holder.dimensions.width = ratioWidth + '%';\n\t            holder.dimensions.height = ratioHeight + '%';\n\t        }\n\n\t        holder.auto = utils.truthy(options.auto);\n\n\t        // Colors\n\n\t        if (options.bg) {\n\t            holder.theme.bg = utils.parseColor(options.bg);\n\t        }\n\n\t        if (options.fg) {\n\t            holder.theme.fg = utils.parseColor(options.fg);\n\t        }\n\n\t        //todo: add automatic foreground to themes without foreground\n\t        if (options.bg && !options.fg) {\n\t            holder.autoFg = true;\n\t        }\n\n\t        if (options.theme && holder.instanceOptions.themes.hasOwnProperty(options.theme)) {\n\t            holder.theme = extend(holder.instanceOptions.themes[options.theme], null);\n\t        }\n\n\t        // Text\n\n\t        if (options.text) {\n\t            holder.text = options.text;\n\t        }\n\n\t        if (options.textmode) {\n\t            holder.textmode = options.textmode;\n\t        }\n\n\t        if (options.size && parseFloat(options.size)) {\n\t            holder.size = parseFloat(options.size);\n\t        }\n\n\t        if (options.font) {\n\t            holder.font = options.font;\n\t        }\n\n\t        if (options.align) {\n\t            holder.align = options.align;\n\t        }\n\n\t        if (options.lineWrap) {\n\t            holder.lineWrap = options.lineWrap;\n\t        }\n\n\t        holder.nowrap = utils.truthy(options.nowrap);\n\n\t        // Miscellaneous\n\n\t        holder.outline = utils.truthy(options.outline);\n\n\t        if (utils.truthy(options.random)) {\n\t            App.vars.cache.themeKeys = App.vars.cache.themeKeys || Object.keys(holder.instanceOptions.themes);\n\t            var _theme = App.vars.cache.themeKeys[0 | Math.random() * App.vars.cache.themeKeys.length];\n\t            holder.theme = extend(holder.instanceOptions.themes[_theme], null);\n\t        }\n\t    }\n\n\t    return holder;\n\t}\n\n\t/**\n\t * Modifies the DOM to fit placeholders and sets up resizable image callbacks (for fluid and automatically sized placeholders)\n\t *\n\t * @private\n\t * @param settings DOM prep settings\n\t */\n\tfunction prepareDOMElement(prepSettings) {\n\t    var mode = prepSettings.mode;\n\t    var el = prepSettings.el;\n\t    var flags = prepSettings.flags;\n\t    var _engineSettings = prepSettings.engineSettings;\n\t    var dimensions = flags.dimensions,\n\t        theme = flags.theme;\n\t    var dimensionsCaption = dimensions.width + 'x' + dimensions.height;\n\t    mode = mode == null ? (flags.fluid ? 'fluid' : 'image') : mode;\n\t    var holderTemplateRe = /holder_([a-z]+)/g;\n\t    var dimensionsInText = false;\n\n\t    if (flags.text != null) {\n\t        theme.text = flags.text;\n\n\t        //<object> SVG embedding doesn't parse Unicode properly\n\t        if (el.nodeName.toLowerCase() === 'object') {\n\t            var textLines = theme.text.split('\\\\n');\n\t            for (var k = 0; k < textLines.length; k++) {\n\t                textLines[k] = utils.encodeHtmlEntity(textLines[k]);\n\t            }\n\t            theme.text = textLines.join('\\\\n');\n\t        }\n\t    }\n\n\t    if (theme.text) {\n\t        var holderTemplateMatches = theme.text.match(holderTemplateRe);\n\n\t        if (holderTemplateMatches !== null) {\n\t            //todo: optimize template replacement\n\t            holderTemplateMatches.forEach(function (match) {\n\t                if (match === 'holder_dimensions') {\n\t                    theme.text = theme.text.replace(match, dimensionsCaption);\n\t                }\n\t            });\n\t        }\n\t    }\n\n\t    var holderURL = flags.holderURL;\n\t    var engineSettings = extend(_engineSettings, null);\n\n\t    if (flags.font) {\n\t        /*\n\t        If external fonts are used in a <img> placeholder rendered with SVG, Holder falls back to canvas.\n\n\t        This is done because Firefox and Chrome disallow embedded SVGs from referencing external assets.\n\t        The workaround is either to change the placeholder tag from <img> to <object> or to use the canvas renderer.\n\t        */\n\t        theme.font = flags.font;\n\t        if (!engineSettings.noFontFallback && el.nodeName.toLowerCase() === 'img' && App.setup.supportsCanvas && engineSettings.renderer === 'svg') {\n\t            engineSettings = extend(engineSettings, {\n\t                renderer: 'canvas'\n\t            });\n\t        }\n\t    }\n\n\t    //Chrome and Opera require a quick 10ms re-render if web fonts are used with canvas\n\t    if (flags.font && engineSettings.renderer == 'canvas') {\n\t        engineSettings.reRender = true;\n\t    }\n\n\t    if (mode == 'background') {\n\t        if (el.getAttribute('data-background-src') == null) {\n\t            DOM.setAttr(el, {\n\t                'data-background-src': holderURL\n\t            });\n\t        }\n\t    } else {\n\t        var domProps = {};\n\t        domProps[App.vars.dataAttr] = holderURL;\n\t        DOM.setAttr(el, domProps);\n\t    }\n\n\t    flags.theme = theme;\n\n\t    //todo consider using all renderSettings in holderData\n\t    el.holderData = {\n\t        flags: flags,\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image' || mode == 'fluid') {\n\t        DOM.setAttr(el, {\n\t            'alt': theme.text ? (dimensionsInText ? theme.text : theme.text + ' [' + dimensionsCaption + ']') : dimensionsCaption\n\t        });\n\t    }\n\n\t    var renderSettings = {\n\t        mode: mode,\n\t        el: el,\n\t        holderSettings: {\n\t            dimensions: dimensions,\n\t            theme: theme,\n\t            flags: flags\n\t        },\n\t        engineSettings: engineSettings\n\t    };\n\n\t    if (mode == 'image') {\n\t        if (!flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            render(renderSettings);\n\n\t            if (flags.textmode == 'exact') {\n\t                el.holderData.resizeUpdate = true;\n\t                App.vars.resizableImages.push(el);\n\t                updateResizableElements(el);\n\t            }\n\t        }\n\t    } else if (mode == 'background' && engineSettings.renderer != 'html') {\n\t        render(renderSettings);\n\t    } else if (mode == 'fluid') {\n\t        el.holderData.resizeUpdate = true;\n\n\t        if (dimensions.height.slice(-1) == '%') {\n\t            el.style.height = dimensions.height;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.height = dimensions.height + 'px';\n\t        }\n\t        if (dimensions.width.slice(-1) == '%') {\n\t            el.style.width = dimensions.width;\n\t        } else if (flags.auto == null || !flags.auto) {\n\t            el.style.width = dimensions.width + 'px';\n\t        }\n\t        if (el.style.display == 'inline' || el.style.display === '' || el.style.display == 'none') {\n\t            el.style.display = 'block';\n\t        }\n\n\t        setInitialDimensions(el);\n\n\t        if (engineSettings.renderer == 'html') {\n\t            el.style.backgroundColor = theme.bg;\n\t        } else {\n\t            App.vars.resizableImages.push(el);\n\t            updateResizableElements(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Core function that takes output from renderers and sets it as the source or background-image of the target element\n\t *\n\t * @private\n\t * @param renderSettings Renderer settings\n\t */\n\tfunction render(renderSettings) {\n\t    var image = null;\n\t    var mode = renderSettings.mode;\n\t    var el = renderSettings.el;\n\t    var holderSettings = renderSettings.holderSettings;\n\t    var engineSettings = renderSettings.engineSettings;\n\n\t    switch (engineSettings.renderer) {\n\t        case 'svg':\n\t            if (!App.setup.supportsSVG) return;\n\t            break;\n\t        case 'canvas':\n\t            if (!App.setup.supportsCanvas) return;\n\t            break;\n\t        default:\n\t            return;\n\t    }\n\n\t    //todo: move generation of scene up to flag generation to reduce extra object creation\n\t    var scene = {\n\t        width: holderSettings.dimensions.width,\n\t        height: holderSettings.dimensions.height,\n\t        theme: holderSettings.theme,\n\t        flags: holderSettings.flags\n\t    };\n\n\t    var sceneGraph = buildSceneGraph(scene);\n\n\t    function getRenderedImage() {\n\t        var image = null;\n\t        switch (engineSettings.renderer) {\n\t            case 'canvas':\n\t                image = sgCanvasRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            case 'svg':\n\t                image = svgRenderer(sceneGraph, renderSettings);\n\t                break;\n\t            default:\n\t                throw 'Holder: invalid renderer: ' + engineSettings.renderer;\n\t        }\n\n\t        return image;\n\t    }\n\n\t    image = getRenderedImage();\n\n\t    if (image == null) {\n\t        throw 'Holder: couldn\\'t render placeholder';\n\t    }\n\n\t    //todo: add <object> canvas rendering\n\t    if (mode == 'background') {\n\t        el.style.backgroundImage = 'url(' + image + ')';\n\n\t        if (!engineSettings.noBackgroundSize) {\n\t            el.style.backgroundSize = scene.width + 'px ' + scene.height + 'px';\n\t        }\n\t    } else {\n\t        if (el.nodeName.toLowerCase() === 'img') {\n\t            DOM.setAttr(el, {\n\t                'src': image\n\t            });\n\t        } else if (el.nodeName.toLowerCase() === 'object') {\n\t            DOM.setAttr(el, {\n\t                'data': image,\n\t                'type': 'image/svg+xml'\n\t            });\n\t        }\n\t        if (engineSettings.reRender) {\n\t            global.setTimeout(function () {\n\t                var image = getRenderedImage();\n\t                if (image == null) {\n\t                    throw 'Holder: couldn\\'t render placeholder';\n\t                }\n\t                //todo: refactor this code into a function\n\t                if (el.nodeName.toLowerCase() === 'img') {\n\t                    DOM.setAttr(el, {\n\t                        'src': image\n\t                    });\n\t                } else if (el.nodeName.toLowerCase() === 'object') {\n\t                    DOM.setAttr(el, {\n\t                        'data': image,\n\t                        'type': 'image/svg+xml'\n\t                    });\n\t                }\n\t            }, 150);\n\t        }\n\t    }\n\t    //todo: account for re-rendering\n\t    DOM.setAttr(el, {\n\t        'data-holder-rendered': true\n\t    });\n\t}\n\n\t/**\n\t * Core function that takes a Holder scene description and builds a scene graph\n\t *\n\t * @private\n\t * @param scene Holder scene object\n\t */\n\t//todo: make this function reusable\n\t//todo: merge app defaults and setup properties into the scene argument\n\tfunction buildSceneGraph(scene) {\n\t    var fontSize = App.defaults.size;\n\t    if (parseFloat(scene.theme.size)) {\n\t        fontSize = scene.theme.size;\n\t    } else if (parseFloat(scene.flags.size)) {\n\t        fontSize = scene.flags.size;\n\t    }\n\n\t    scene.font = {\n\t        family: scene.theme.font ? scene.theme.font : 'Arial, Helvetica, Open Sans, sans-serif',\n\t        size: textSize(scene.width, scene.height, fontSize, App.defaults.scale),\n\t        units: scene.theme.units ? scene.theme.units : App.defaults.units,\n\t        weight: scene.theme.fontweight ? scene.theme.fontweight : 'bold'\n\t    };\n\n\t    scene.text = scene.theme.text || Math.floor(scene.width) + 'x' + Math.floor(scene.height);\n\n\t    scene.noWrap = scene.theme.nowrap || scene.flags.nowrap;\n\n\t    scene.align = scene.theme.align || scene.flags.align || 'center';\n\n\t    switch (scene.flags.textmode) {\n\t        case 'literal':\n\t            scene.text = scene.flags.dimensions.width + 'x' + scene.flags.dimensions.height;\n\t            break;\n\t        case 'exact':\n\t            if (!scene.flags.exactDimensions) break;\n\t            scene.text = Math.floor(scene.flags.exactDimensions.width) + 'x' + Math.floor(scene.flags.exactDimensions.height);\n\t            break;\n\t    }\n\n\t    var lineWrap = scene.flags.lineWrap || App.setup.lineWrapRatio;\n\t    var sceneMargin = scene.width * lineWrap;\n\t    var maxLineWidth = sceneMargin;\n\n\t    var sceneGraph = new SceneGraph({\n\t        width: scene.width,\n\t        height: scene.height\n\t    });\n\n\t    var Shape = sceneGraph.Shape;\n\n\t    var holderBg = new Shape.Rect('holderBg', {\n\t        fill: scene.theme.bg\n\t    });\n\n\t    holderBg.resize(scene.width, scene.height);\n\t    sceneGraph.root.add(holderBg);\n\n\t    if (scene.flags.outline) {\n\t        var outlineColor = new Color(holderBg.properties.fill);\n\t        outlineColor = outlineColor.lighten(outlineColor.lighterThan('7f7f7f') ? -0.1 : 0.1);\n\t        holderBg.properties.outline = {\n\t            fill: outlineColor.toHex(true),\n\t            width: 2\n\t        };\n\t    }\n\n\t    var holderTextColor = scene.theme.fg;\n\n\t    if (scene.flags.autoFg) {\n\t        var holderBgColor = new Color(holderBg.properties.fill);\n\t        var lightColor = new Color('fff');\n\t        var darkColor = new Color('000', {\n\t            'alpha': 0.285714\n\t        });\n\n\t        holderTextColor = holderBgColor.blendAlpha(holderBgColor.lighterThan('7f7f7f') ? darkColor : lightColor).toHex(true);\n\t    }\n\n\t    var holderTextGroup = new Shape.Group('holderTextGroup', {\n\t        text: scene.text,\n\t        align: scene.align,\n\t        font: scene.font,\n\t        fill: holderTextColor\n\t    });\n\n\t    holderTextGroup.moveTo(null, null, 1);\n\t    sceneGraph.root.add(holderTextGroup);\n\n\t    var tpdata = holderTextGroup.textPositionData = stagingRenderer(sceneGraph);\n\t    if (!tpdata) {\n\t        throw 'Holder: staging fallback not supported yet.';\n\t    }\n\t    holderTextGroup.properties.leading = tpdata.boundingBox.height;\n\n\t    var textNode = null;\n\t    var line = null;\n\n\t    function finalizeLine(parent, line, width, height) {\n\t        line.width = width;\n\t        line.height = height;\n\t        parent.width = Math.max(parent.width, line.width);\n\t        parent.height += line.height;\n\t    }\n\n\t    if (tpdata.lineCount > 1) {\n\t        var offsetX = 0;\n\t        var offsetY = 0;\n\t        var lineIndex = 0;\n\t        var lineKey;\n\t        line = new Shape.Group('line' + lineIndex);\n\n\t        //Double margin so that left/right-aligned next is not flush with edge of image\n\t        if (scene.align === 'left' || scene.align === 'right') {\n\t            maxLineWidth = scene.width * (1 - (1 - lineWrap) * 2);\n\t        }\n\n\t        for (var i = 0; i < tpdata.words.length; i++) {\n\t            var word = tpdata.words[i];\n\t            textNode = new Shape.Text(word.text);\n\t            var newline = word.text == '\\\\n';\n\t            if (!scene.noWrap && (offsetX + word.width >= maxLineWidth || newline === true)) {\n\t                finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t                holderTextGroup.add(line);\n\t                offsetX = 0;\n\t                offsetY += holderTextGroup.properties.leading;\n\t                lineIndex += 1;\n\t                line = new Shape.Group('line' + lineIndex);\n\t                line.y = offsetY;\n\t            }\n\t            if (newline === true) {\n\t                continue;\n\t            }\n\t            textNode.moveTo(offsetX, 0);\n\t            offsetX += tpdata.spaceWidth + word.width;\n\t            line.add(textNode);\n\t        }\n\n\t        finalizeLine(holderTextGroup, line, offsetX, holderTextGroup.properties.leading);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo(scene.width - line.width, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            for (lineKey in holderTextGroup.children) {\n\t                line = holderTextGroup.children[lineKey];\n\t                line.moveTo((holderTextGroup.width - line.width) / 2, null, null);\n\t            }\n\n\t            holderTextGroup.moveTo((scene.width - holderTextGroup.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - holderTextGroup.height) / 2, null);\n\n\t        //If the text exceeds vertical space, move it down so the first line is visible\n\t        if ((scene.height - holderTextGroup.height) / 2 < 0) {\n\t            holderTextGroup.moveTo(null, 0, null);\n\t        }\n\t    } else {\n\t        textNode = new Shape.Text(scene.text);\n\t        line = new Shape.Group('line0');\n\t        line.add(textNode);\n\t        holderTextGroup.add(line);\n\n\t        if (scene.align === 'left') {\n\t            holderTextGroup.moveTo(scene.width - sceneMargin, null, null);\n\t        } else if (scene.align === 'right') {\n\t            holderTextGroup.moveTo(0 - (scene.width - sceneMargin), null, null);\n\t        } else {\n\t            holderTextGroup.moveTo((scene.width - tpdata.boundingBox.width) / 2, null, null);\n\t        }\n\n\t        holderTextGroup.moveTo(null, (scene.height - tpdata.boundingBox.height) / 2, null);\n\t    }\n\n\t    //todo: renderlist\n\t    return sceneGraph;\n\t}\n\n\t/**\n\t * Adaptive text sizing function\n\t *\n\t * @private\n\t * @param width Parent width\n\t * @param height Parent height\n\t * @param fontSize Requested text size\n\t * @param scale Proportional scale of text\n\t */\n\tfunction textSize(width, height, fontSize, scale) {\n\t    var stageWidth = parseInt(width, 10);\n\t    var stageHeight = parseInt(height, 10);\n\n\t    var bigSide = Math.max(stageWidth, stageHeight);\n\t    var smallSide = Math.min(stageWidth, stageHeight);\n\n\t    var newHeight = 0.8 * Math.min(smallSide, bigSide * scale);\n\t    return Math.round(Math.max(fontSize, newHeight));\n\t}\n\n\t/**\n\t * Iterates over resizable (fluid or auto) placeholders and renders them\n\t *\n\t * @private\n\t * @param element Optional element selector, specified only if a specific element needs to be re-rendered\n\t */\n\tfunction updateResizableElements(element) {\n\t    var images;\n\t    if (element == null || element.nodeType == null) {\n\t        images = App.vars.resizableImages;\n\t    } else {\n\t        images = [element];\n\t    }\n\t    for (var i = 0, l = images.length; i < l; i++) {\n\t        var el = images[i];\n\t        if (el.holderData) {\n\t            var flags = el.holderData.flags;\n\t            var dimensions = dimensionCheck(el);\n\t            if (dimensions) {\n\t                if (!el.holderData.resizeUpdate) {\n\t                    continue;\n\t                }\n\n\t                if (flags.fluid && flags.auto) {\n\t                    var fluidConfig = el.holderData.fluidConfig;\n\t                    switch (fluidConfig.mode) {\n\t                        case 'width':\n\t                            dimensions.height = dimensions.width / fluidConfig.ratio;\n\t                            break;\n\t                        case 'height':\n\t                            dimensions.width = dimensions.height * fluidConfig.ratio;\n\t                            break;\n\t                    }\n\t                }\n\n\t                var settings = {\n\t                    mode: 'image',\n\t                    holderSettings: {\n\t                        dimensions: dimensions,\n\t                        theme: flags.theme,\n\t                        flags: flags\n\t                    },\n\t                    el: el,\n\t                    engineSettings: el.holderData.engineSettings\n\t                };\n\n\t                if (flags.textmode == 'exact') {\n\t                    flags.exactDimensions = dimensions;\n\t                    settings.holderSettings.dimensions = flags.dimensions;\n\t                }\n\n\t                render(settings);\n\t            } else {\n\t                setInvisible(el);\n\t            }\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Sets up aspect ratio metadata for fluid placeholders, in order to preserve proportions when resizing\n\t *\n\t * @private\n\t * @param el Image DOM element\n\t */\n\tfunction setInitialDimensions(el) {\n\t    if (el.holderData) {\n\t        var dimensions = dimensionCheck(el);\n\t        if (dimensions) {\n\t            var flags = el.holderData.flags;\n\n\t            var fluidConfig = {\n\t                fluidHeight: flags.dimensions.height.slice(-1) == '%',\n\t                fluidWidth: flags.dimensions.width.slice(-1) == '%',\n\t                mode: null,\n\t                initialDimensions: dimensions\n\t            };\n\n\t            if (fluidConfig.fluidWidth && !fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'width';\n\t                fluidConfig.ratio = fluidConfig.initialDimensions.width / parseFloat(flags.dimensions.height);\n\t            } else if (!fluidConfig.fluidWidth && fluidConfig.fluidHeight) {\n\t                fluidConfig.mode = 'height';\n\t                fluidConfig.ratio = parseFloat(flags.dimensions.width) / fluidConfig.initialDimensions.height;\n\t            }\n\n\t            el.holderData.fluidConfig = fluidConfig;\n\t        } else {\n\t            setInvisible(el);\n\t        }\n\t    }\n\t}\n\n\t/**\n\t * Iterates through all current invisible images, and if they're visible, renders them and removes them from further checks. Runs every animation frame.\n\t *\n\t * @private\n\t */\n\tfunction visibilityCheck() {\n\t    var renderableImages = [];\n\t    var keys = Object.keys(App.vars.invisibleImages);\n\t    var el;\n\n\t    keys.forEach(function (key) {\n\t        el = App.vars.invisibleImages[key];\n\t        if (dimensionCheck(el) && el.nodeName.toLowerCase() == 'img') {\n\t            renderableImages.push(el);\n\t            delete App.vars.invisibleImages[key];\n\t        }\n\t    });\n\n\t    if (renderableImages.length) {\n\t        Holder.run({\n\t            images: renderableImages\n\t        });\n\t    }\n\n\t    // Done to prevent 100% CPU usage via aggressive calling of requestAnimationFrame\n\t    setTimeout(function () {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t    }, 10);\n\t}\n\n\t/**\n\t * Starts checking for invisible placeholders if not doing so yet. Does nothing otherwise.\n\t *\n\t * @private\n\t */\n\tfunction startVisibilityCheck() {\n\t    if (!App.vars.visibilityCheckStarted) {\n\t        global.requestAnimationFrame(visibilityCheck);\n\t        App.vars.visibilityCheckStarted = true;\n\t    }\n\t}\n\n\t/**\n\t * Sets a unique ID for an image detected to be invisible and adds it to the map of invisible images checked by visibilityCheck\n\t *\n\t * @private\n\t * @param el Invisible DOM element\n\t */\n\tfunction setInvisible(el) {\n\t    if (!el.holderData.invisibleId) {\n\t        App.vars.invisibleId += 1;\n\t        App.vars.invisibleImages['i' + App.vars.invisibleId] = el;\n\t        el.holderData.invisibleId = App.vars.invisibleId;\n\t    }\n\t}\n\n\t//todo: see if possible to convert stagingRenderer to use HTML only\n\tvar stagingRenderer = (function() {\n\t    var svg = null,\n\t        stagingText = null,\n\t        stagingTextNode = null;\n\t    return function(graph) {\n\t        var rootNode = graph.root;\n\t        if (App.setup.supportsSVG) {\n\t            var firstTimeSetup = false;\n\t            var tnode = function(text) {\n\t                return document.createTextNode(text);\n\t            };\n\t            if (svg == null || svg.parentNode !== document.body) {\n\t                firstTimeSetup = true;\n\t            }\n\n\t            svg = SVG.initSVG(svg, rootNode.properties.width, rootNode.properties.height);\n\t            //Show staging element before staging\n\t            svg.style.display = 'block';\n\n\t            if (firstTimeSetup) {\n\t                stagingText = DOM.newEl('text', SVG_NS);\n\t                stagingTextNode = tnode(null);\n\t                DOM.setAttr(stagingText, {\n\t                    x: 0\n\t                });\n\t                stagingText.appendChild(stagingTextNode);\n\t                svg.appendChild(stagingText);\n\t                document.body.appendChild(svg);\n\t                svg.style.visibility = 'hidden';\n\t                svg.style.position = 'absolute';\n\t                svg.style.top = '-100%';\n\t                svg.style.left = '-100%';\n\t                //todo: workaround for zero-dimension <svg> tag in Opera 12\n\t                //svg.setAttribute('width', 0);\n\t                //svg.setAttribute('height', 0);\n\t            }\n\n\t            var holderTextGroup = rootNode.children.holderTextGroup;\n\t            var htgProps = holderTextGroup.properties;\n\t            DOM.setAttr(stagingText, {\n\t                'y': htgProps.font.size,\n\t                'style': utils.cssProps({\n\t                    'font-weight': htgProps.font.weight,\n\t                    'font-size': htgProps.font.size + htgProps.font.units,\n\t                    'font-family': htgProps.font.family\n\t                })\n\t            });\n\n\t            //Unescape HTML entities to get approximately the right width\n\t            var txt = DOM.newEl('textarea');\n\t            txt.innerHTML = htgProps.text;\n\t            stagingTextNode.nodeValue = txt.value;\n\n\t            //Get bounding box for the whole string (total width and height)\n\t            var stagingTextBBox = stagingText.getBBox();\n\n\t            //Get line count and split the string into words\n\t            var lineCount = Math.ceil(stagingTextBBox.width / rootNode.properties.width);\n\t            var words = htgProps.text.split(' ');\n\t            var newlines = htgProps.text.match(/\\\\n/g);\n\t            lineCount += newlines == null ? 0 : newlines.length;\n\n\t            //Get bounding box for the string with spaces removed\n\t            stagingTextNode.nodeValue = htgProps.text.replace(/[ ]+/g, '');\n\t            var computedNoSpaceLength = stagingText.getComputedTextLength();\n\n\t            //Compute average space width\n\t            var diffLength = stagingTextBBox.width - computedNoSpaceLength;\n\t            var spaceWidth = Math.round(diffLength / Math.max(1, words.length - 1));\n\n\t            //Get widths for every word with space only if there is more than one line\n\t            var wordWidths = [];\n\t            if (lineCount > 1) {\n\t                stagingTextNode.nodeValue = '';\n\t                for (var i = 0; i < words.length; i++) {\n\t                    if (words[i].length === 0) continue;\n\t                    stagingTextNode.nodeValue = utils.decodeHtmlEntity(words[i]);\n\t                    var bbox = stagingText.getBBox();\n\t                    wordWidths.push({\n\t                        text: words[i],\n\t                        width: bbox.width\n\t                    });\n\t                }\n\t            }\n\n\t            //Hide staging element after staging\n\t            svg.style.display = 'none';\n\n\t            return {\n\t                spaceWidth: spaceWidth,\n\t                lineCount: lineCount,\n\t                boundingBox: stagingTextBBox,\n\t                words: wordWidths\n\t            };\n\t        } else {\n\t            //todo: canvas fallback for measuring text on android 2.3\n\t            return false;\n\t        }\n\t    };\n\t})();\n\n\t//Helpers\n\n\t/**\n\t * Prevents a function from being called too often, waits until a timer elapses to call it again\n\t *\n\t * @param fn Function to call\n\t */\n\tfunction debounce(fn) {\n\t    if (!App.vars.debounceTimer) fn.call(this);\n\t    if (App.vars.debounceTimer) global.clearTimeout(App.vars.debounceTimer);\n\t    App.vars.debounceTimer = global.setTimeout(function() {\n\t        App.vars.debounceTimer = null;\n\t        fn.call(this);\n\t    }, App.setup.debounce);\n\t}\n\n\t/**\n\t * Holder-specific resize/orientation change callback, debounced to prevent excessive execution\n\t */\n\tfunction resizeEvent() {\n\t    debounce(function() {\n\t        updateResizableElements(null);\n\t    });\n\t}\n\n\t//Set up flags\n\n\tfor (var flag in App.flags) {\n\t    if (!App.flags.hasOwnProperty(flag)) continue;\n\t    App.flags[flag].match = function(val) {\n\t        return val.match(this.regex);\n\t    };\n\t}\n\n\t//Properties set once on setup\n\n\tApp.setup = {\n\t    renderer: 'html',\n\t    debounce: 100,\n\t    ratio: 1,\n\t    supportsCanvas: false,\n\t    supportsSVG: false,\n\t    lineWrapRatio: 0.9,\n\t    dataAttr: 'data-src',\n\t    renderers: ['html', 'canvas', 'svg']\n\t};\n\n\t//Properties modified during runtime\n\n\tApp.vars = {\n\t    preempted: false,\n\t    resizableImages: [],\n\t    invisibleImages: {},\n\t    invisibleId: 0,\n\t    visibilityCheckStarted: false,\n\t    debounceTimer: null,\n\t    cache: {}\n\t};\n\n\t//Pre-flight\n\n\t(function() {\n\t    var canvas = DOM.newEl('canvas');\n\n\t    if (canvas.getContext) {\n\t        if (canvas.toDataURL('image/png').indexOf('data:image/png') != -1) {\n\t            App.setup.renderer = 'canvas';\n\t            App.setup.supportsCanvas = true;\n\t        }\n\t    }\n\n\t    if (!!document.createElementNS && !!document.createElementNS(SVG_NS, 'svg').createSVGRect) {\n\t        App.setup.renderer = 'svg';\n\t        App.setup.supportsSVG = true;\n\t    }\n\t})();\n\n\t//Starts checking for invisible placeholders\n\tstartVisibilityCheck();\n\n\tif (onDomReady) {\n\t    onDomReady(function() {\n\t        if (!App.vars.preempted) {\n\t            Holder.run();\n\t        }\n\t        if (global.addEventListener) {\n\t            global.addEventListener('resize', resizeEvent, false);\n\t            global.addEventListener('orientationchange', resizeEvent, false);\n\t        } else {\n\t            global.attachEvent('onresize', resizeEvent);\n\t        }\n\n\t        if (typeof global.Turbolinks == 'object') {\n\t            global.document.addEventListener('page:change', function() {\n\t                Holder.run();\n\t            });\n\t        }\n\t    });\n\t}\n\n\tmodule.exports = Holder;\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * onDomReady.js 1.4.0 (c) 2013 Tubal Martin - MIT license\n\t *\n\t * Specially modified to work with Holder.js\n\t */\n\n\tfunction _onDomReady(win) {\n\t    //Lazy loading fix for Firefox < 3.6\n\t    //http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n\t    if (document.readyState == null && document.addEventListener) {\n\t        document.addEventListener(\"DOMContentLoaded\", function DOMContentLoaded() {\n\t            document.removeEventListener(\"DOMContentLoaded\", DOMContentLoaded, false);\n\t            document.readyState = \"complete\";\n\t        }, false);\n\t        document.readyState = \"loading\";\n\t    }\n\t    \n\t    var doc = win.document,\n\t        docElem = doc.documentElement,\n\t    \n\t        LOAD = \"load\",\n\t        FALSE = false,\n\t        ONLOAD = \"on\"+LOAD,\n\t        COMPLETE = \"complete\",\n\t        READYSTATE = \"readyState\",\n\t        ATTACHEVENT = \"attachEvent\",\n\t        DETACHEVENT = \"detachEvent\",\n\t        ADDEVENTLISTENER = \"addEventListener\",\n\t        DOMCONTENTLOADED = \"DOMContentLoaded\",\n\t        ONREADYSTATECHANGE = \"onreadystatechange\",\n\t        REMOVEEVENTLISTENER = \"removeEventListener\",\n\t    \n\t        // W3C Event model\n\t        w3c = ADDEVENTLISTENER in doc,\n\t        _top = FALSE,\n\t    \n\t        // isReady: Is the DOM ready to be used? Set to true once it occurs.\n\t        isReady = FALSE,\n\t    \n\t        // Callbacks pending execution until DOM is ready\n\t        callbacks = [];\n\t    \n\t    // Handle when the DOM is ready\n\t    function ready( fn ) {\n\t        if ( !isReady ) {\n\t    \n\t            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).\n\t            if ( !doc.body ) {\n\t                return defer( ready );\n\t            }\n\t    \n\t            // Remember that the DOM is ready\n\t            isReady = true;\n\t    \n\t            // Execute all callbacks\n\t            while ( fn = callbacks.shift() ) {\n\t                defer( fn );\n\t            }\n\t        }\n\t    }\n\t    \n\t    // The ready event handler\n\t    function completed( event ) {\n\t        // readyState === \"complete\" is good enough for us to call the dom ready in oldIE\n\t        if ( w3c || event.type === LOAD || doc[READYSTATE] === COMPLETE ) {\n\t            detach();\n\t            ready();\n\t        }\n\t    }\n\t    \n\t    // Clean-up method for dom ready events\n\t    function detach() {\n\t        if ( w3c ) {\n\t            doc[REMOVEEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t            win[REMOVEEVENTLISTENER]( LOAD, completed, FALSE );\n\t        } else {\n\t            doc[DETACHEVENT]( ONREADYSTATECHANGE, completed );\n\t            win[DETACHEVENT]( ONLOAD, completed );\n\t        }\n\t    }\n\t    \n\t    // Defers a function, scheduling it to run after the current call stack has cleared.\n\t    function defer( fn, wait ) {\n\t        // Allow 0 to be passed\n\t        setTimeout( fn, +wait >= 0 ? wait : 1 );\n\t    }\n\t    \n\t    // Attach the listeners:\n\t    \n\t    // Catch cases where onDomReady is called after the browser event has already occurred.\n\t    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t    if ( doc[READYSTATE] === COMPLETE ) {\n\t        // Handle it asynchronously to allow scripts the opportunity to delay ready\n\t        defer( ready );\n\t    \n\t    // Standards-based browsers support DOMContentLoaded\n\t    } else if ( w3c ) {\n\t        // Use the handy event callback\n\t        doc[ADDEVENTLISTENER]( DOMCONTENTLOADED, completed, FALSE );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ADDEVENTLISTENER]( LOAD, completed, FALSE );\n\t    \n\t    // If IE event model is used\n\t    } else {\n\t        // Ensure firing before onload, maybe late but safe also for iframes\n\t        doc[ATTACHEVENT]( ONREADYSTATECHANGE, completed );\n\t    \n\t        // A fallback to window.onload, that will always work\n\t        win[ATTACHEVENT]( ONLOAD, completed );\n\t    \n\t        // If IE and not a frame\n\t        // continually check to see if the document is ready\n\t        try {\n\t            _top = win.frameElement == null && docElem;\n\t        } catch(e) {}\n\t    \n\t        if ( _top && _top.doScroll ) {\n\t            (function doScrollCheck() {\n\t                if ( !isReady ) {\n\t                    try {\n\t                        // Use the trick by Diego Perini\n\t                        // http://javascript.nwbox.com/IEContentLoaded/\n\t                        _top.doScroll(\"left\");\n\t                    } catch(e) {\n\t                        return defer( doScrollCheck, 50 );\n\t                    }\n\t    \n\t                    // detach all dom ready events\n\t                    detach();\n\t    \n\t                    // and execute any waiting functions\n\t                    ready();\n\t                }\n\t            })();\n\t        }\n\t    }\n\t    \n\t    function onDomReady( fn ) {\n\t        // If DOM is ready, execute the function (async), otherwise wait\n\t        isReady ? defer( fn ) : callbacks.push( fn );\n\t    }\n\t    \n\t    // Add version\n\t    onDomReady.version = \"1.4.0\";\n\t    // Add method to check if DOM is ready\n\t    onDomReady.isReady = function(){\n\t        return isReady;\n\t    };\n\n\t    return onDomReady;\n\t}\n\n\tmodule.exports = typeof window !== \"undefined\" && _onDomReady(window);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t//Modified version of component/querystring\n\t//Changes: updated dependencies, dot notation parsing, JSHint fixes\n\t//Fork at https://github.com/imsky/querystring\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar encode = encodeURIComponent;\n\tvar decode = decodeURIComponent;\n\tvar trim = __webpack_require__(4);\n\tvar type = __webpack_require__(5);\n\n\tvar arrayRegex = /(\\w+)\\[(\\d+)\\]/;\n\tvar objectRegex = /\\w+\\.\\w+/;\n\n\t/**\n\t * Parse the given query `str`.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api public\n\t */\n\n\texports.parse = function(str){\n\t  if ('string' !== typeof str) return {};\n\n\t  str = trim(str);\n\t  if ('' === str) return {};\n\t  if ('?' === str.charAt(0)) str = str.slice(1);\n\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    var parts = pairs[i].split('=');\n\t    var key = decode(parts[0]);\n\t    var m, ctx, prop;\n\n\t    if (m = arrayRegex.exec(key)) {\n\t      obj[m[1]] = obj[m[1]] || [];\n\t      obj[m[1]][m[2]] = decode(parts[1]);\n\t      continue;\n\t    }\n\n\t    if (m = objectRegex.test(key)) {\n\t      m = key.split('.');\n\t      ctx = obj;\n\t      \n\t      while (m.length) {\n\t        prop = m.shift();\n\n\t        if (!prop.length) continue;\n\n\t        if (!ctx[prop]) {\n\t          ctx[prop] = {};\n\t        } else if (ctx[prop] && typeof ctx[prop] !== 'object') {\n\t          break;\n\t        }\n\n\t        if (!m.length) {\n\t          ctx[prop] = decode(parts[1]);\n\t        }\n\n\t        ctx = ctx[prop];\n\t      }\n\n\t      continue;\n\t    }\n\n\t    obj[parts[0]] = null == parts[1] ? '' : decode(parts[1]);\n\t  }\n\n\t  return obj;\n\t};\n\n\t/**\n\t * Stringify the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api public\n\t */\n\n\texports.stringify = function(obj){\n\t  if (!obj) return '';\n\t  var pairs = [];\n\n\t  for (var key in obj) {\n\t    var value = obj[key];\n\n\t    if ('array' == type(value)) {\n\t      for (var i = 0; i < value.length; ++i) {\n\t        pairs.push(encode(key + '[' + i + ']') + '=' + encode(value[i]));\n\t      }\n\t      continue;\n\t    }\n\n\t    pairs.push(encode(key) + '=' + encode(obj[key]));\n\t  }\n\n\t  return pairs.join('&');\n\t};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * toString ref.\n\t */\n\n\tvar toString = Object.prototype.toString;\n\n\t/**\n\t * Return the type of `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {String}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val){\n\t  switch (toString.call(val)) {\n\t    case '[object Date]': return 'date';\n\t    case '[object RegExp]': return 'regexp';\n\t    case '[object Arguments]': return 'arguments';\n\t    case '[object Array]': return 'array';\n\t    case '[object Error]': return 'error';\n\t  }\n\n\t  if (val === null) return 'null';\n\t  if (val === undefined) return 'undefined';\n\t  if (val !== val) return 'nan';\n\t  if (val && val.nodeType === 1) return 'element';\n\n\t  val = val.valueOf\n\t    ? val.valueOf()\n\t    : Object.prototype.valueOf.apply(val)\n\n\t  return typeof val;\n\t};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tvar SceneGraph = function(sceneProperties) {\n\t    var nodeCount = 1;\n\n\t    //todo: move merge to helpers section\n\t    function merge(parent, child) {\n\t        for (var prop in child) {\n\t            parent[prop] = child[prop];\n\t        }\n\t        return parent;\n\t    }\n\n\t    var SceneNode = function(name) {\n\t        nodeCount++;\n\t        this.parent = null;\n\t        this.children = {};\n\t        this.id = nodeCount;\n\t        this.name = 'n' + nodeCount;\n\t        if (typeof name !== 'undefined') {\n\t            this.name = name;\n\t        }\n\t        this.x = this.y = this.z = 0;\n\t        this.width = this.height = 0;\n\t    };\n\n\t    SceneNode.prototype.resize = function(width, height) {\n\t        if (width != null) {\n\t            this.width = width;\n\t        }\n\t        if (height != null) {\n\t            this.height = height;\n\t        }\n\t    };\n\n\t    SceneNode.prototype.moveTo = function(x, y, z) {\n\t        this.x = x != null ? x : this.x;\n\t        this.y = y != null ? y : this.y;\n\t        this.z = z != null ? z : this.z;\n\t    };\n\n\t    SceneNode.prototype.add = function(child) {\n\t        var name = child.name;\n\t        if (typeof this.children[name] === 'undefined') {\n\t            this.children[name] = child;\n\t            child.parent = this;\n\t        } else {\n\t            throw 'SceneGraph: child already exists: ' + name;\n\t        }\n\t    };\n\n\t    var RootNode = function() {\n\t        SceneNode.call(this, 'root');\n\t        this.properties = sceneProperties;\n\t    };\n\n\t    RootNode.prototype = new SceneNode();\n\n\t    var Shape = function(name, props) {\n\t        SceneNode.call(this, name);\n\t        this.properties = {\n\t            'fill': '#000000'\n\t        };\n\t        if (typeof props !== 'undefined') {\n\t            merge(this.properties, props);\n\t        } else if (typeof name !== 'undefined' && typeof name !== 'string') {\n\t            throw 'SceneGraph: invalid node name';\n\t        }\n\t    };\n\n\t    Shape.prototype = new SceneNode();\n\n\t    var Group = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'group';\n\t    };\n\n\t    Group.prototype = new Shape();\n\n\t    var Rect = function() {\n\t        Shape.apply(this, arguments);\n\t        this.type = 'rect';\n\t    };\n\n\t    Rect.prototype = new Shape();\n\n\t    var Text = function(text) {\n\t        Shape.call(this);\n\t        this.type = 'text';\n\t        this.properties.text = text;\n\t    };\n\n\t    Text.prototype = new Shape();\n\n\t    var root = new RootNode();\n\n\t    this.Shape = {\n\t        'Rect': Rect,\n\t        'Text': Text,\n\t        'Group': Group\n\t    };\n\n\t    this.root = root;\n\t    return this;\n\t};\n\n\tmodule.exports = SceneGraph;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Shallow object clone and merge\n\t *\n\t * @param a Object A\n\t * @param b Object B\n\t * @returns {Object} New object with all of A's properties, and all of B's properties, overwriting A's properties\n\t */\n\texports.extend = function(a, b) {\n\t    var c = {};\n\t    for (var x in a) {\n\t        if (a.hasOwnProperty(x)) {\n\t            c[x] = a[x];\n\t        }\n\t    }\n\t    if (b != null) {\n\t        for (var y in b) {\n\t            if (b.hasOwnProperty(y)) {\n\t                c[y] = b[y];\n\t            }\n\t        }\n\t    }\n\t    return c;\n\t};\n\n\t/**\n\t * Takes a k/v list of CSS properties and returns a rule\n\t *\n\t * @param props CSS properties object\n\t */\n\texports.cssProps = function(props) {\n\t    var ret = [];\n\t    for (var p in props) {\n\t        if (props.hasOwnProperty(p)) {\n\t            ret.push(p + ':' + props[p]);\n\t        }\n\t    }\n\t    return ret.join(';');\n\t};\n\n\t/**\n\t * Encodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.encodeHtmlEntity = function(str) {\n\t    var buf = [];\n\t    var charCode = 0;\n\t    for (var i = str.length - 1; i >= 0; i--) {\n\t        charCode = str.charCodeAt(i);\n\t        if (charCode > 128) {\n\t            buf.unshift(['&#', charCode, ';'].join(''));\n\t        } else {\n\t            buf.unshift(str[i]);\n\t        }\n\t    }\n\t    return buf.join('');\n\t};\n\n\t/**\n\t * Checks if an image exists\n\t *\n\t * @param src URL of image\n\t * @param callback Callback to call once image status has been found\n\t */\n\texports.imageExists = function(src, callback) {\n\t    var image = new Image();\n\t    image.onerror = function() {\n\t        callback.call(this, false);\n\t    };\n\t    image.onload = function() {\n\t        callback.call(this, true);\n\t    };\n\t    image.src = src;\n\t};\n\n\t/**\n\t * Decodes HTML entities in a string\n\t *\n\t * @param str Input string\n\t */\n\texports.decodeHtmlEntity = function(str) {\n\t    return str.replace(/&#(\\d+);/g, function(match, dec) {\n\t        return String.fromCharCode(dec);\n\t    });\n\t};\n\n\n\t/**\n\t * Returns an element's dimensions if it's visible, `false` otherwise.\n\t *\n\t * @param el DOM element\n\t */\n\texports.dimensionCheck = function(el) {\n\t    var dimensions = {\n\t        height: el.clientHeight,\n\t        width: el.clientWidth\n\t    };\n\n\t    if (dimensions.height && dimensions.width) {\n\t        return dimensions;\n\t    } else {\n\t        return false;\n\t    }\n\t};\n\n\n\t/**\n\t * Returns true if value is truthy or if it is \"semantically truthy\"\n\t * @param val\n\t */\n\texports.truthy = function(val) {\n\t    if (typeof val === 'string') {\n\t        return val === 'true' || val === 'yes' || val === '1' || val === 'on' || val === '✓';\n\t    }\n\t    return !!val;\n\t};\n\n\t/**\n\t * Parses input into a well-formed CSS color\n\t * @param val\n\t */\n\texports.parseColor = function(val) {\n\t    var hexre = /(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i;\n\t    var rgbre = /^rgb\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\t    var rgbare = /^rgba\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(0*\\.\\d{1,}|1)\\)$/;\n\n\t    var match = val.match(hexre);\n\t    var retval;\n\n\t    if (match !== null) {\n\t        retval = match[1] || match[2];\n\t        if (retval[0] !== '#') {\n\t            return '#' + retval;\n\t        } else {\n\t            return retval;\n\t        }\n\t    }\n\n\t    match = val.match(rgbre);\n\n\t    if (match !== null) {\n\t        retval = 'rgb(' + match.slice(1).join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    match = val.match(rgbare);\n\n\t    if (match !== null) {\n\t        const normalizeAlpha = function (a) { return '0.' + a.split('.')[1]; };\n\t        const fixedMatch = match.slice(1).map(function (e, i) {\n\t            return (i === 3) ? normalizeAlpha(e) : e;\n\t        });\n\t        retval = 'rgba(' + fixedMatch.join(',') + ')';\n\t        return retval;\n\t    }\n\n\t    return null;\n\t};\n\n\t/**\n\t * Provides the correct scaling ratio for canvas drawing operations on HiDPI screens (e.g. Retina displays)\n\t */\n\texports.canvasRatio = function () {\n\t    var devicePixelRatio = 1;\n\t    var backingStoreRatio = 1;\n\n\t    if (global.document) {\n\t        var canvas = global.document.createElement('canvas');\n\t        if (canvas.getContext) {\n\t            var ctx = canvas.getContext('2d');\n\t            devicePixelRatio = global.devicePixelRatio || 1;\n\t            backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n\t        }\n\t    }\n\n\t    return devicePixelRatio / backingStoreRatio;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var DOM = __webpack_require__(9);\n\n\tvar SVG_NS = 'http://www.w3.org/2000/svg';\n\tvar NODE_TYPE_COMMENT = 8;\n\n\t/**\n\t * Generic SVG element creation function\n\t *\n\t * @param svg SVG context, set to null if new\n\t * @param width Document width\n\t * @param height Document height\n\t */\n\texports.initSVG = function(svg, width, height) {\n\t    var defs, style, initialize = false;\n\n\t    if (svg && svg.querySelector) {\n\t        style = svg.querySelector('style');\n\t        if (style === null) {\n\t            initialize = true;\n\t        }\n\t    } else {\n\t        svg = DOM.newEl('svg', SVG_NS);\n\t        initialize = true;\n\t    }\n\n\t    if (initialize) {\n\t        defs = DOM.newEl('defs', SVG_NS);\n\t        style = DOM.newEl('style', SVG_NS);\n\t        DOM.setAttr(style, {\n\t            'type': 'text/css'\n\t        });\n\t        defs.appendChild(style);\n\t        svg.appendChild(defs);\n\t    }\n\n\t    //IE throws an exception if this is set and Chrome requires it to be set\n\t    if (svg.webkitMatchesSelector) {\n\t        svg.setAttribute('xmlns', SVG_NS);\n\t    }\n\n\t    //Remove comment nodes\n\t    for (var i = 0; i < svg.childNodes.length; i++) {\n\t        if (svg.childNodes[i].nodeType === NODE_TYPE_COMMENT) {\n\t            svg.removeChild(svg.childNodes[i]);\n\t        }\n\t    }\n\n\t    //Remove CSS\n\t    while (style.childNodes.length) {\n\t        style.removeChild(style.childNodes[0]);\n\t    }\n\n\t    DOM.setAttr(svg, {\n\t        'width': width,\n\t        'height': height,\n\t        'viewBox': '0 0 ' + width + ' ' + height,\n\t        'preserveAspectRatio': 'none'\n\t    });\n\n\t    return svg;\n\t};\n\n\t/**\n\t * Converts serialized SVG to a string suitable for data URI use\n\t * @param svgString Serialized SVG string\n\t * @param [base64] Use base64 encoding for data URI\n\t */\n\texports.svgStringToDataURI = function() {\n\t    var rawPrefix = 'data:image/svg+xml;charset=UTF-8,';\n\t    var base64Prefix = 'data:image/svg+xml;charset=UTF-8;base64,';\n\n\t    return function(svgString, base64) {\n\t        if (base64) {\n\t            return base64Prefix + btoa(global.unescape(encodeURIComponent(svgString)));\n\t        } else {\n\t            return rawPrefix + encodeURIComponent(svgString);\n\t        }\n\t    };\n\t}();\n\n\t/**\n\t * Returns serialized SVG with XML processing instructions\n\t *\n\t * @param svg SVG context\n\t * @param stylesheets CSS stylesheets to include\n\t */\n\texports.serializeSVG = function(svg, engineSettings) {\n\t    if (!global.XMLSerializer) return;\n\t    var serializer = new XMLSerializer();\n\t    var svgCSS = '';\n\t    var stylesheets = engineSettings.stylesheets;\n\n\t    //External stylesheets: Processing Instruction method\n\t    if (engineSettings.svgXMLStylesheet) {\n\t        var xml = DOM.createXML();\n\t        //Add <?xml-stylesheet ?> directives\n\t        for (var i = stylesheets.length - 1; i >= 0; i--) {\n\t            var csspi = xml.createProcessingInstruction('xml-stylesheet', 'href=\"' + stylesheets[i] + '\" rel=\"stylesheet\"');\n\t            xml.insertBefore(csspi, xml.firstChild);\n\t        }\n\n\t        xml.removeChild(xml.documentElement);\n\t        svgCSS = serializer.serializeToString(xml);\n\t    }\n\n\t    var svgText = serializer.serializeToString(svg);\n\t    svgText = svgText.replace(/\\&amp;(\\#[0-9]{2,}\\;)/g, '&$1');\n\t    return svgCSS + svgText;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/**\n\t * Generic new DOM element function\n\t *\n\t * @param tag Tag to create\n\t * @param namespace Optional namespace value\n\t */\n\texports.newEl = function(tag, namespace) {\n\t    if (!global.document) return;\n\n\t    if (namespace == null) {\n\t        return global.document.createElement(tag);\n\t    } else {\n\t        return global.document.createElementNS(namespace, tag);\n\t    }\n\t};\n\n\t/**\n\t * Generic setAttribute function\n\t *\n\t * @param el Reference to DOM element\n\t * @param attrs Object with attribute keys and values\n\t */\n\texports.setAttr = function (el, attrs) {\n\t    for (var a in attrs) {\n\t        el.setAttribute(a, attrs[a]);\n\t    }\n\t};\n\n\t/**\n\t * Creates a XML document\n\t * @private\n\t */\n\texports.createXML = function() {\n\t    if (!global.DOMParser) return;\n\t    return new DOMParser().parseFromString('<xml />', 'application/xml');\n\t};\n\n\t/**\n\t * Converts a value into an array of DOM nodes\n\t *\n\t * @param val A string, a NodeList, a Node, or an HTMLCollection\n\t */\n\texports.getNodeArray = function(val) {\n\t    var retval = null;\n\t    if (typeof(val) == 'string') {\n\t        retval = document.querySelectorAll(val);\n\t    } else if (global.NodeList && val instanceof global.NodeList) {\n\t        retval = val;\n\t    } else if (global.Node && val instanceof global.Node) {\n\t        retval = [val];\n\t    } else if (global.HTMLCollection && val instanceof global.HTMLCollection) {\n\t        retval = val;\n\t    } else if (val instanceof Array) {\n\t        retval = val;\n\t    } else if (val === null) {\n\t        retval = [];\n\t    }\n\n\t    retval = Array.prototype.slice.call(retval);\n\n\t    return retval;\n\t};\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tvar Color = function(color, options) {\n\t    //todo: support rgba, hsla, and rrggbbaa notation\n\t    //todo: use CIELAB internally\n\t    //todo: add clamp function (with sign)\n\t    if (typeof color !== 'string') return;\n\n\t    this.original = color;\n\n\t    if (color.charAt(0) === '#') {\n\t        color = color.slice(1);\n\t    }\n\n\t    if (/[^a-f0-9]+/i.test(color)) return;\n\n\t    if (color.length === 3) {\n\t        color = color.replace(/./g, '$&$&');\n\t    }\n\n\t    if (color.length !== 6) return;\n\n\t    this.alpha = 1;\n\n\t    if (options && options.alpha) {\n\t        this.alpha = options.alpha;\n\t    }\n\n\t    this.set(parseInt(color, 16));\n\t};\n\n\t//todo: jsdocs\n\tColor.rgb2hex = function(r, g, b) {\n\t    function format (decimal) {\n\t        var hex = (decimal | 0).toString(16);\n\t        if (decimal < 16) {\n\t            hex = '0' + hex;\n\t        }\n\t        return hex;\n\t    }\n\n\t    return [r, g, b].map(format).join('');\n\t};\n\n\t//todo: jsdocs\n\tColor.hsl2rgb = function (h, s, l) {\n\t    var H = h / 60;\n\t    var C = (1 - Math.abs(2 * l - 1)) * s;\n\t    var X = C * (1 - Math.abs(parseInt(H) % 2 - 1));\n\t    var m = l - (C / 2);\n\n\t    var r = 0, g = 0, b = 0;\n\n\t    if (H >= 0 && H < 1) {\n\t        r = C;\n\t        g = X;\n\t    } else if (H >= 1 && H < 2) {\n\t        r = X;\n\t        g = C;\n\t    } else if (H >= 2 && H < 3) {\n\t        g = C;\n\t        b = X;\n\t    } else if (H >= 3 && H < 4) {\n\t        g = X;\n\t        b = C;\n\t    } else if (H >= 4 && H < 5) {\n\t        r = X;\n\t        b = C;\n\t    } else if (H >= 5 && H < 6) {\n\t        r = C;\n\t        b = X;\n\t    }\n\n\t    r += m;\n\t    g += m;\n\t    b += m;\n\n\t    r = parseInt(r * 255);\n\t    g = parseInt(g * 255);\n\t    b = parseInt(b * 255);\n\n\t    return [r, g, b];\n\t};\n\n\t/**\n\t * Sets the color from a raw RGB888 integer\n\t * @param raw RGB888 representation of color\n\t */\n\t//todo: refactor into a static method\n\t//todo: factor out individual color spaces\n\t//todo: add HSL, CIELAB, and CIELUV\n\tColor.prototype.set = function (val) {\n\t    this.raw = val;\n\n\t    var r = (this.raw & 0xFF0000) >> 16;\n\t    var g = (this.raw & 0x00FF00) >> 8;\n\t    var b = (this.raw & 0x0000FF);\n\n\t    // BT.709\n\t    var y = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n\t    var u = -0.09991 * r - 0.33609 * g + 0.436 * b;\n\t    var v = 0.615 * r - 0.55861 * g - 0.05639 * b;\n\n\t    this.rgb = {\n\t        r: r,\n\t        g: g,\n\t        b: b\n\t    };\n\n\t    this.yuv = {\n\t        y: y,\n\t        u: u,\n\t        v: v\n\t    };\n\n\t    return this;\n\t};\n\n\t/**\n\t * Lighten or darken a color\n\t * @param multiplier Amount to lighten or darken (-1 to 1)\n\t */\n\tColor.prototype.lighten = function(multiplier) {\n\t    var cm = Math.min(1, Math.max(0, Math.abs(multiplier))) * (multiplier < 0 ? -1 : 1);\n\t    var bm = (255 * cm) | 0;\n\t    var cr = Math.min(255, Math.max(0, this.rgb.r + bm));\n\t    var cg = Math.min(255, Math.max(0, this.rgb.g + bm));\n\t    var cb = Math.min(255, Math.max(0, this.rgb.b + bm));\n\t    var hex = Color.rgb2hex(cr, cg, cb);\n\t    return new Color(hex);\n\t};\n\n\t/**\n\t * Output color in hex format\n\t * @param addHash Add a hash character to the beginning of the output\n\t */\n\tColor.prototype.toHex = function(addHash) {\n\t    return (addHash ? '#' : '') + this.raw.toString(16);\n\t};\n\n\t/**\n\t * Returns whether or not current color is lighter than another color\n\t * @param color Color to compare against\n\t */\n\tColor.prototype.lighterThan = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    return this.yuv.y > color.yuv.y;\n\t};\n\n\t/**\n\t * Returns the result of mixing current color with another color\n\t * @param color Color to mix with\n\t * @param multiplier How much to mix with the other color\n\t */\n\t/*\n\tColor.prototype.mix = function (color, multiplier) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var r = this.rgb.r;\n\t    var g = this.rgb.g;\n\t    var b = this.rgb.b;\n\t    var a = this.alpha;\n\n\t    var m = typeof multiplier !== 'undefined' ? multiplier : 0.5;\n\n\t    //todo: write a lerp function\n\t    r = r + m * (color.rgb.r - r);\n\t    g = g + m * (color.rgb.g - g);\n\t    b = b + m * (color.rgb.b - b);\n\t    a = a + m * (color.alpha - a);\n\n\t    return new Color(Color.rgbToHex(r, g, b), {\n\t        'alpha': a\n\t    });\n\t};\n\t*/\n\n\t/**\n\t * Returns the result of blending another color on top of current color with alpha\n\t * @param color Color to blend on top of current color, i.e. \"Ca\"\n\t */\n\t//todo: see if .blendAlpha can be merged into .mix\n\tColor.prototype.blendAlpha = function(color) {\n\t    if (!(color instanceof Color)) {\n\t        color = new Color(color);\n\t    }\n\n\t    var Ca = color;\n\t    var Cb = this;\n\n\t    //todo: write alpha blending function\n\t    var r = Ca.alpha * Ca.rgb.r + (1 - Ca.alpha) * Cb.rgb.r;\n\t    var g = Ca.alpha * Ca.rgb.g + (1 - Ca.alpha) * Cb.rgb.g;\n\t    var b = Ca.alpha * Ca.rgb.b + (1 - Ca.alpha) * Cb.rgb.b;\n\n\t    return new Color(Color.rgb2hex(r, g, b));\n\t};\n\n\tmodule.exports = Color;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\n\t  'version': '2.9.7',\n\t  'svg_ns': 'http://www.w3.org/2000/svg'\n\t};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar shaven = __webpack_require__(13);\n\n\tvar SVG = __webpack_require__(8);\n\tvar constants = __webpack_require__(11);\n\tvar utils = __webpack_require__(7);\n\n\tvar SVG_NS = constants.svg_ns;\n\n\tvar templates = {\n\t  'element': function (options) {\n\t    var tag = options.tag;\n\t    var content = options.content || '';\n\t    delete options.tag;\n\t    delete options.content;\n\t    return  [tag, content, options];\n\t  }\n\t};\n\n\t//todo: deprecate tag arg, infer tag from shape object\n\tfunction convertShape (shape, tag) {\n\t  return templates.element({\n\t    'tag': tag,\n\t    'width': shape.width,\n\t    'height': shape.height,\n\t    'fill': shape.properties.fill\n\t  });\n\t}\n\n\tfunction textCss (properties) {\n\t  return utils.cssProps({\n\t    'fill': properties.fill,\n\t    'font-weight': properties.font.weight,\n\t    'font-family': properties.font.family + ', monospace',\n\t    'font-size': properties.font.size + properties.font.units\n\t  });\n\t}\n\n\tfunction outlinePath (bgWidth, bgHeight, outlineWidth) {\n\t  var outlineOffsetWidth = outlineWidth / 2;\n\n\t  return [\n\t    'M', outlineOffsetWidth, outlineOffsetWidth,\n\t    'H', bgWidth - outlineOffsetWidth,\n\t    'V', bgHeight - outlineOffsetWidth,\n\t    'H', outlineOffsetWidth,\n\t    'V', 0,\n\t    'M', 0, outlineOffsetWidth,\n\t    'L', bgWidth, bgHeight - outlineOffsetWidth,\n\t    'M', 0, bgHeight - outlineOffsetWidth,\n\t    'L', bgWidth, outlineOffsetWidth\n\t  ].join(' ');\n\t}\n\n\tmodule.exports = function (sceneGraph, renderSettings) {\n\t  var engineSettings = renderSettings.engineSettings;\n\t  var stylesheets = engineSettings.stylesheets;\n\t  var stylesheetXml = stylesheets.map(function (stylesheet) {\n\t    return '<?xml-stylesheet rel=\"stylesheet\" href=\"' + stylesheet + '\"?>';\n\t  }).join('\\n');\n\n\t  var holderId = 'holder_' + Number(new Date()).toString(16);\n\n\t  var root = sceneGraph.root;\n\t  var textGroup = root.children.holderTextGroup;\n\n\t  var css = '#' + holderId + ' text { ' + textCss(textGroup.properties) + ' } ';\n\n\t  // push text down to be equally vertically aligned with canvas renderer\n\t  textGroup.y += textGroup.textPositionData.boundingBox.height * 0.8;\n\n\t  var wordTags = [];\n\n\t  Object.keys(textGroup.children).forEach(function (lineKey) {\n\t    var line = textGroup.children[lineKey];\n\n\t    Object.keys(line.children).forEach(function (wordKey) {\n\t      var word = line.children[wordKey];\n\t      var x = textGroup.x + line.x + word.x;\n\t      var y = textGroup.y + line.y + word.y;\n\t      var wordTag = templates.element({\n\t        'tag': 'text',\n\t        'content': word.properties.text,\n\t        'x': x,\n\t        'y': y\n\t      });\n\n\t      wordTags.push(wordTag);\n\t    });\n\t  });\n\n\t  var text = templates.element({\n\t    'tag': 'g',\n\t    'content': wordTags\n\t  });\n\n\t  var outline = null;\n\n\t  if (root.children.holderBg.properties.outline) {\n\t    var outlineProperties = root.children.holderBg.properties.outline;\n\t    outline = templates.element({\n\t      'tag': 'path',\n\t      'd': outlinePath(root.children.holderBg.width, root.children.holderBg.height, outlineProperties.width),\n\t      'stroke-width': outlineProperties.width,\n\t      'stroke': outlineProperties.fill,\n\t      'fill': 'none'\n\t    });\n\t  }\n\n\t  var bg = convertShape(root.children.holderBg, 'rect');\n\n\t  var sceneContent = [];\n\n\t  sceneContent.push(bg);\n\t  if (outlineProperties) {\n\t    sceneContent.push(outline);\n\t  }\n\t  sceneContent.push(text);\n\n\t  var scene = templates.element({\n\t    'tag': 'g',\n\t    'id': holderId,\n\t    'content': sceneContent\n\t  });\n\n\t  var style = templates.element({\n\t    'tag': 'style',\n\t    //todo: figure out how to add CDATA directive\n\t    'content': css,\n\t    'type': 'text/css'\n\t  });\n\n\t  var defs = templates.element({\n\t    'tag': 'defs',\n\t    'content': style\n\t  });\n\n\t  var svg = templates.element({\n\t    'tag': 'svg',\n\t    'content': [defs, scene],\n\t    'width': root.properties.width,\n\t    'height': root.properties.height,\n\t    'xmlns': SVG_NS,\n\t    'viewBox': [0, 0, root.properties.width, root.properties.height].join(' '),\n\t    'preserveAspectRatio': 'none'\n\t  });\n\n\t  var output = shaven(svg);\n\n\t  if (/\\&amp;(x)?#[0-9A-Fa-f]/.test(output[0])) {\n\t    output[0] = output[0].replace(/&amp;#/gm, '&#');\n\t  }\n\t  \n\t  output = stylesheetXml + output[0];\n\n\t  var svgString = SVG.svgStringToDataURI(output, renderSettings.mode === 'background');\n\t  return svgString;\n\t};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar escape = __webpack_require__(14)\n\n\t// TODO: remove namespace\n\n\tmodule.exports = function shaven (array, namespace, returnObject) {\n\n\t\t'use strict'\n\n\t\tvar i = 1\n\t\tvar doesEscape = true\n\t\tvar HTMLString\n\t\tvar attributeKey\n\t\tvar callback\n\t\tvar key\n\n\n\t\treturnObject = returnObject || {}\n\n\n\t\tfunction createElement (sugarString) {\n\n\t\t\tvar tags = sugarString.match(/^[\\w-]+/)\n\t\t\tvar element = {\n\t\t\t\ttag: tags ? tags[0] : 'div',\n\t\t\t\tattr: {},\n\t\t\t\tchildren: []\n\t\t\t}\n\t\t\tvar id = sugarString.match(/#([\\w-]+)/)\n\t\t\tvar reference = sugarString.match(/\\$([\\w-]+)/)\n\t\t\tvar classNames = sugarString.match(/\\.[\\w-]+/g)\n\n\n\t\t\t// Assign id if is set\n\t\t\tif (id) {\n\t\t\t\telement.attr.id = id[1]\n\n\t\t\t\t// Add element to the return object\n\t\t\t\treturnObject[id[1]] = element\n\t\t\t}\n\n\t\t\tif (reference)\n\t\t\t\treturnObject[reference[1]] = element\n\n\t\t\tif (classNames)\n\t\t\t\telement.attr.class = classNames.join(' ').replace(/\\./g, '')\n\n\t\t\tif (sugarString.match(/&$/g))\n\t\t\t\tdoesEscape = false\n\n\t\t\treturn element\n\t\t}\n\n\t\tfunction replacer (key, value) {\n\n\t\t\tif (value === null || value === false || value === undefined)\n\t\t\t\treturn\n\n\t\t\tif (typeof value !== 'string' && typeof value !== 'object')\n\t\t\t\treturn String(value)\n\n\t\t\treturn value\n\t\t}\n\n\t\tfunction escapeAttribute (string) {\n\t\t\treturn (string || string === 0) ?\n\t\t\t\tString(string)\n\t\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t\t.replace(/\"/g, '&quot;') :\n\t\t\t\t''\n\t\t}\n\n\t\tfunction escapeHTML (string) {\n\t\t\treturn String(string)\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/\"/g, '&quot;')\n\t\t\t\t.replace(/'/g, '&apos;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t}\n\n\n\t\tif (typeof array[0] === 'string')\n\t\t\tarray[0] = createElement(array[0])\n\n\t\telse if (Array.isArray(array[0]))\n\t\t\ti = 0\n\n\t\telse\n\t\t\tthrow new Error(\n\t\t\t\t'First element of array must be a string, ' +\n\t\t\t\t'or an array and not ' + JSON.stringify(array[0])\n\t\t\t)\n\n\n\t\tfor (; i < array.length; i++) {\n\n\t\t\t// Don't render element if value is false or null\n\t\t\tif (array[i] === false || array[i] === null) {\n\t\t\t\tarray[0] = false\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\t// Continue with next array value if current value is undefined or true\n\t\t\telse if (array[i] === undefined || array[i] === true) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'string') {\n\t\t\t\tif (doesEscape)\n\t\t\t\t\tarray[i] = escapeHTML(array[i])\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'number') {\n\n\t\t\t\tarray[0].children.push(array[i])\n\t\t\t}\n\n\t\t\telse if (Array.isArray(array[i])) {\n\n\t\t\t\tif (Array.isArray(array[i][0])) {\n\t\t\t\t\tarray[i].reverse().forEach(function (subArray) {\n\t\t\t\t\t\tarray.splice(i + 1, 0, subArray)\n\t\t\t\t\t})\n\n\t\t\t\t\tif (i !== 0)\n\t\t\t\t\t\tcontinue\n\t\t\t\t\ti++\n\t\t\t\t}\n\n\t\t\t\tshaven(array[i], namespace, returnObject)\n\n\t\t\t\tif (array[i][0])\n\t\t\t\t\tarray[0].children.push(array[i][0])\n\t\t\t}\n\n\t\t\telse if (typeof array[i] === 'function')\n\t\t\t\tcallback = array[i]\n\n\n\t\t\telse if (typeof array[i] === 'object') {\n\t\t\t\tfor (attributeKey in array[i])\n\t\t\t\t\tif (array[i].hasOwnProperty(attributeKey))\n\t\t\t\t\t\tif (array[i][attributeKey] !== null &&\n\t\t\t\t\t\t\tarray[i][attributeKey] !== false)\n\t\t\t\t\t\t\tif (attributeKey === 'style' &&\n\t\t\t\t\t\t\t\ttypeof array[i][attributeKey] === 'object')\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = JSON\n\t\t\t\t\t\t\t\t\t.stringify(array[i][attributeKey], replacer)\n\t\t\t\t\t\t\t\t\t.slice(2, -2)\n\t\t\t\t\t\t\t\t\t.replace(/\",\"/g, ';')\n\t\t\t\t\t\t\t\t\t.replace(/\":\"/g, ':')\n\t\t\t\t\t\t\t\t\t.replace(/\\\\\"/g, '\\'')\n\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tarray[0].attr[attributeKey] = array[i][attributeKey]\n\t\t\t}\n\n\t\t\telse\n\t\t\t\tthrow new TypeError('\"' + array[i] + '\" is not allowed as a value.')\n\t\t}\n\n\n\t\tif (array[0] !== false) {\n\n\t\t\tHTMLString = '<' + array[0].tag\n\n\t\t\tfor (key in array[0].attr)\n\t\t\t\tif (array[0].attr.hasOwnProperty(key))\n\t\t\t\t\tHTMLString += ' ' + key + '=\"' +\n\t\t\t\t\t\tescapeAttribute(array[0].attr[key]) + '\"'\n\n\t\t\tHTMLString += '>'\n\n\t\t\tarray[0].children.forEach(function (child) {\n\t\t\t\tHTMLString += child\n\t\t\t})\n\n\t\t\tHTMLString += '</' + array[0].tag + '>'\n\n\t\t\tarray[0] = HTMLString\n\t\t}\n\n\t\t// Return root element on index 0\n\t\treturnObject[0] = array[0]\n\n\t\tif (callback)\n\t\t\tcallback(array[0])\n\n\t\t// returns object containing all elements with an id and the root element\n\t\treturn returnObject\n\t}\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t/*!\n\t * escape-html\n\t * Copyright(c) 2012-2013 TJ Holowaychuk\n\t * Copyright(c) 2015 Andreas Lubbe\n\t * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n\t * MIT Licensed\n\t */\n\n\t'use strict';\n\n\t/**\n\t * Module variables.\n\t * @private\n\t */\n\n\tvar matchHtmlRegExp = /[\"'&<>]/;\n\n\t/**\n\t * Module exports.\n\t * @public\n\t */\n\n\tmodule.exports = escapeHtml;\n\n\t/**\n\t * Escape special characters in the given string of html.\n\t *\n\t * @param  {string} string The string to escape for inserting into HTML\n\t * @return {string}\n\t * @public\n\t */\n\n\tfunction escapeHtml(string) {\n\t  var str = '' + string;\n\t  var match = matchHtmlRegExp.exec(str);\n\n\t  if (!match) {\n\t    return str;\n\t  }\n\n\t  var escape;\n\t  var html = '';\n\t  var index = 0;\n\t  var lastIndex = 0;\n\n\t  for (index = match.index; index < str.length; index++) {\n\t    switch (str.charCodeAt(index)) {\n\t      case 34: // \"\n\t        escape = '&quot;';\n\t        break;\n\t      case 38: // &\n\t        escape = '&amp;';\n\t        break;\n\t      case 39: // '\n\t        escape = '&#39;';\n\t        break;\n\t      case 60: // <\n\t        escape = '&lt;';\n\t        break;\n\t      case 62: // >\n\t        escape = '&gt;';\n\t        break;\n\t      default:\n\t        continue;\n\t    }\n\n\t    if (lastIndex !== index) {\n\t      html += str.substring(lastIndex, index);\n\t    }\n\n\t    lastIndex = index + 1;\n\t    html += escape;\n\t  }\n\n\t  return lastIndex !== index\n\t    ? html + str.substring(lastIndex, index)\n\t    : html;\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar DOM = __webpack_require__(9);\n\tvar utils = __webpack_require__(7);\n\n\tmodule.exports = (function() {\n\t    var canvas = DOM.newEl('canvas');\n\t    var ctx = null;\n\n\t    return function(sceneGraph) {\n\t        if (ctx == null) {\n\t            ctx = canvas.getContext('2d');\n\t        }\n\n\t        var dpr = utils.canvasRatio();\n\t        var root = sceneGraph.root;\n\t        canvas.width = dpr * root.properties.width;\n\t        canvas.height = dpr * root.properties.height ;\n\t        ctx.textBaseline = 'middle';\n\n\t        var bg = root.children.holderBg;\n\t        var bgWidth = dpr * bg.width;\n\t        var bgHeight = dpr * bg.height;\n\t        //todo: parametrize outline width (e.g. in scene object)\n\t        var outlineWidth = 2;\n\t        var outlineOffsetWidth = outlineWidth / 2;\n\n\t        ctx.fillStyle = bg.properties.fill;\n\t        ctx.fillRect(0, 0, bgWidth, bgHeight);\n\n\t        if (bg.properties.outline) {\n\t            //todo: abstract this into a method\n\t            ctx.strokeStyle = bg.properties.outline.fill;\n\t            ctx.lineWidth = bg.properties.outline.width;\n\t            ctx.moveTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // TL, TR, BR, BL\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth - outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(outlineOffsetWidth, outlineOffsetWidth);\n\t            // Diagonals\n\t            ctx.moveTo(0, outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, bgHeight - outlineOffsetWidth);\n\t            ctx.moveTo(0, bgHeight - outlineOffsetWidth);\n\t            ctx.lineTo(bgWidth, outlineOffsetWidth);\n\t            ctx.stroke();\n\t        }\n\n\t        var textGroup = root.children.holderTextGroup;\n\t        ctx.font = textGroup.properties.font.weight + ' ' + (dpr * textGroup.properties.font.size) + textGroup.properties.font.units + ' ' + textGroup.properties.font.family + ', monospace';\n\t        ctx.fillStyle = textGroup.properties.fill;\n\n\t        for (var lineKey in textGroup.children) {\n\t            var line = textGroup.children[lineKey];\n\t            for (var wordKey in line.children) {\n\t                var word = line.children[wordKey];\n\t                var x = dpr * (textGroup.x + line.x + word.x);\n\t                var y = dpr * (textGroup.y + line.y + word.y + (textGroup.properties.leading / 2));\n\n\t                ctx.fillText(word.properties.text, x, y);\n\t            }\n\t        }\n\n\t        return canvas.toDataURL('image/png');\n\t    };\n\t})();\n\n/***/ })\n/******/ ])\n});\n;\n(function(ctx, isMeteorPackage) {\n    if (isMeteorPackage) {\n        Holder = ctx.Holder;\n    }\n})(this, typeof Meteor !== 'undefined' && typeof Package !== 'undefined');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/holderjs/holder.js\n// module id = 21\n// module chunks = 0","/**\n * 文件容量转换具体的bytes数值\n * @param fileSize 参数类型（String），例：2MB，230KB，1TB等\n * @param thousand 参数类型（boolean），是否以1000为计算单位，否则以默认的1024为计算单位\n */\nlet fileSize2Bytes = (fileSize, thousand) => {\n  if (!fileSize) return null;\n  let baseUnit = thousand ? 1000 : 1024;\n  let kb = baseUnit,\n    mb = kb * baseUnit,\n    gb = mb * baseUnit;\n  let tmpCode = fileSize.substring(fileSize.length - 2).toUpperCase();\n  let sizeNumber = fileSize.substring(0, fileSize.length - 2);\n  let num = Number.parseInt(sizeNumber);\n  let result = 0;\n  switch (tmpCode) {\n    case \"KB\":\n      result = num * kb;\n      break;\n    case \"MB\":\n      result = num * mb;\n      break;\n    case \"GB\":\n      result = num * gb;\n      break;\n  }\n  return result;\n};\n\nconst i18n = {\n  cn: {\n    messages: {\n      typeError: \"{file} 文件格式不正确。有效格式： {extensions}\",\n      sizeError: \"{file} 文件容量超过限制, 文件最大容量为： {sizeLimit}\",\n      minSizeError:\n        \"{file} 文件容量低于限制, 上传的文件最小容量为： {minSizeLimit}.\",\n      emptyError: \"{file} 文件为空，请选择其他文件进行上传。\",\n      noFilesError: \"未选择任何文件进行上传\",\n      tooManyItemsError:\n        \"太多文件 ({netItems}) 需要被上传，上传文件数量限制为： {itemLimit}个\",\n      maxHeightImageError: \"图片高度超过限制\",\n      maxWidthImageError: \"图片宽度超过限制\",\n      minHeightImageError: \"图片高度不足\",\n      minWidthImageError: \"图片宽度不足\",\n      retryFailTooManyItems: \"重试失败 - 您已达到文件数量上限。\",\n      onLeave: \"文件正在上传，若离开该页面，正在上传的文件将被取消\"\n    },\n    text: {\n      failUpload: \"上传失败\",\n      fileInputTitle: \"选择文件进行上传\"\n    },\n    ui: {\n      thumbnail: \"图片预览\",\n      choseFileButton: \"选择文件\",\n      dropHere: \"将文件拖到这里进行上传……\",\n      done: \"完成\",\n      fileTypes: \"文件类型\",\n      fileSizeLimit: \"文件容量限制\"\n    }\n  },\n  es: {\n    messages: {\n      typeError:\n        \"{file} El formato del archivo es incorrecto. Formato válido: {extensions}\",\n      sizeError:\n        \"{file} El tamaño del archivo excede el límite máximo permitido: {sizeLimit}\",\n      minSizeError:\n        \"{file} El tamaño del archivo es inferior al límite mínimo permitido: {minSizeLimit}.\",\n      emptyError:\n        \"{file} El archivo está vacío, elija otro archivo para cargar.\",\n      noFilesError: \"No hay archivos seleccionados para cargar\",\n      tooManyItemsError:\n        \"({netItems}) archivos. Demasiados para cargar. permitido： {itemLimit}个\",\n      maxHeightImageError: \"La altura de la imagen excede el límite.\",\n      maxWidthImageError: \"El ancho de la imagen excede el límite.\",\n      minHeightImageError: \"La altura de la imagen es insuficiente.\",\n      minWidthImageError: \"Ancho de imagen insuficiente.\",\n      retryFailTooManyItems:\n        \"Vuelva a intentarlo: ha alcanzado el número máximo de archivos.\",\n      onLeave:\n        \"Archivos cargando. Si sale de esta página se cancelarán todas las cargas.\"\n    },\n    text: {\n      failUpload: \"Error al subir.\",\n      fileInputTitle: \"Seleccionar archivo.\"\n    },\n    ui: {\n      thumbnail: \"Miniatura\",\n      choseFileButton: \"Seleccionar archivo..\",\n      dropHere: \"Arrastra los archivos aquí para subir.\",\n      done: \"Completado\",\n      fileTypes: \"Tipo de archivo\",\n      fileSizeLimit: \"Límite de tamaño de archivo\"\n    }\n  },\n  en: {\n    ui: {\n      thumbnail: \"thumbnail\",\n      choseFileButton: \"select file\",\n      dropHere: \"drop files here\",\n      done: \"done\",\n      fileTypes: \"file extensions\",\n      fileSizeLimit: \"file size limit\"\n    }\n  }\n};\n\nconst buildOptions = function() {\n  let p = {\n    multiple: this.multiple,\n    request: {\n      endpoint: this.uploadFileUrl,\n      inputName: this.uploadFileObjName,\n      //server side validate file info\n      params: {\n        fileSizeLimit: this.fileSizeLimit,\n        fileTypeExts: this.fileTypeExts\n      }\n    },\n    deleteFile: {\n      enabled: true,\n      method: \"POST\" //,\n      //'endpoint' : $webroot + 'upload/deleteUploadFile'\n    },\n    debug: true,\n    validation: {\n      allowedExtensions: this.fileTypeExts.split(\",\"),\n      sizeLimit: fileSize2Bytes(this.fileSizeLimit, true),\n      sizeLimitStr: this.fileSizeLimit,\n      image: {\n        maxHeight: this.imageMaxHeight,\n        maxWidth: this.imageMaxWidth,\n        minHeight: this.imageMinHeight,\n        minWidth: this.imageMinWidth\n      }\n    },\n    callbacks: {\n      //the callback when file upload finish\n      onComplete: function(id, name, json, xhr) {},\n      //the callback before delete file, return false can stop it.\n      onSubmitDelete: function(id) {}\n    }\n  };\n  if (this.language && this.language === \"cn\") {\n    p.messages = i18n.cn.messages;\n    p.text = i18n.cn.text;\n  }\n  if (this.callback && typeof this.callback === \"function\") {\n    p.callbacks.onComplete = (id, name, json, xhr) => {\n      if (json) this.callback(json);\n    };\n  }\n  return p;\n};\n\nconst getI18n = language => {\n  switch (language) {\n    case \"en\":\n      return i18n.en.ui;\n    case \"es\":\n      return i18n.es.ui;\n    default:\n      return i18n.cn.ui;\n  }\n};\n\nexport { buildOptions };\nexport { getI18n };\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.uploaderClass]},[(!_vm.multiple)?_c('div',{staticClass:\"single-upload\"},[(_vm.preview)?_c('div',{staticClass:\"image-box\"},[_c('img',{ref:\"simpleImg\",attrs:{\"src\":_vm.singleUploadImg,\"alt\":\"\",\"width\":_vm.previewWidth,\"height\":_vm.previewHeight}})]):_vm._e(),_vm._v(\" \"),_c('div',{ref:\"upload\",staticClass:\"btn singleFileUpload uploader-button\"},[(_vm.buttonIcon)?_c('i',{staticClass:\"v-upload-iconfont icon-uploader-open\"}):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.buttonText?_vm.buttonText:_vm.ui.choseFileButton))])])]):_vm._e(),_vm._v(\" \"),(_vm.multiple)?_c('div',{ref:\"multipleUpload\",staticClass:\"upload-list\"}):_vm._e(),_vm._v(\" \"),(_vm.multiple)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"uploadArea\"},[_c('div',{staticClass:\"qq-uploader-selector qq-uploader qq-gallery\",staticStyle:{\"height\":\"100%\"},attrs:{\"qq-drop-area-text\":_vm.ui.dropHere}},[_vm._m(0),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"qq-upload-button-selector qq-upload-button uploader-button\"},[_c('div',[(_vm.buttonIcon)?_c('i',{staticClass:\"v-upload-iconfont icon-uploader-open\"}):_vm._e(),_vm._v(\"\\n                    \"+_vm._s(_vm.buttonText?_vm.buttonText:_vm.ui.choseFileButton)+\"\\n                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"info-show\"},[_c('div',[_vm._v(\"\\n                    \"+_vm._s(_vm.ui.fileSizeLimit)+\"：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.fileSizeLimit)}}),_c('br'),_vm._v(\"\\n                    \"+_vm._s(_vm.ui.fileTypes)+\"：\"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.fileTypeExts)}})])]),_vm._v(\" \"),_vm._m(2)])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"qq-upload-list-selector qq-upload-list\",attrs:{\"role\":\"region\",\"aria-live\":\"polite\",\"aria-relevant\":\"additions removals\"}},[_c('li',[_c('span',{staticClass:\"qq-upload-status-text-selector qq-upload-status-text\",attrs:{\"role\":\"status\"}}),_vm._v(\" \"),_c('div',{staticClass:\"qq-progress-bar-container-selector qq-progress-bar-container\"},[_c('div',{staticClass:\"qq-progress-bar-selector qq-progress-bar\",attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"0\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})]),_vm._v(\" \"),_c('span',{staticClass:\"qq-upload-spinner-selector qq-upload-spinner\"}),_vm._v(\" \"),_c('div',{staticClass:\"qq-thumbnail-wrapper\"},[_c('img',{staticClass:\"qq-thumbnail-selector\",attrs:{\"qq-max-size\":\"120\",\"qq-server-scale\":\"\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-upload-cancel-selector qq-upload-cancel\",attrs:{\"type\":\"button\"}},[_vm._v(\"X\")]),_vm._v(\" \"),_c('button',{staticClass:\"qq-upload-retry-selector qq-upload-retry\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-retry-icon\",attrs:{\"aria-label\":\"Retry\"}}),_vm._v(\" Retry\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"qq-file-info\"},[_c('div',{staticClass:\"qq-file-name\"},[_c('span',{staticClass:\"qq-upload-file-selector qq-upload-file\"}),_vm._v(\" \"),_c('span',{staticClass:\"qq-edit-filename-icon-selector qq-edit-filename-icon\",attrs:{\"aria-label\":\"Edit filename\"}})]),_vm._v(\" \"),_c('input',{staticClass:\"qq-edit-filename-selector qq-edit-filename\",attrs:{\"tabindex\":\"0\",\"type\":\"text\"}}),_vm._v(\" \"),_c('span',{staticClass:\"qq-upload-size-selector qq-upload-size\"}),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-delete-selector qq-upload-delete\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-delete-icon\",attrs:{\"aria-label\":\"Delete\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-pause-selector qq-upload-pause\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-pause-icon\",attrs:{\"aria-label\":\"Pause\"}})]),_vm._v(\" \"),_c('button',{staticClass:\"qq-btn qq-upload-continue-selector qq-upload-continue\",attrs:{\"type\":\"button\"}},[_c('span',{staticClass:\"qq-btn qq-continue-icon\",attrs:{\"aria-label\":\"Continue\"}})])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qq-upload-drop-area-selector qq-upload-drop-area\",attrs:{\"qq-hide-dropzone\":\"\"}},[_c('span',{staticClass:\"qq-upload-drop-area-text-selector\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"qq-total-progress-bar-container-selector qq-total-progress-bar-container\"},[_c('div',{staticClass:\"qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar\",attrs:{\"role\":\"progressbar\",\"aria-valuenow\":\"0\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eca14c4c\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Uploader.vue\n// module id = 23\n// module chunks = 0"],"sourceRoot":""}